(()=>{(()=>{let _t="__pt_sdk_loaded__";if(window[_t])return;window[_t]=!0;let Nt="0.2.4",yt="_ptq",bt="__pt_anonymous_id",ut="__pt_user_id",St="__pt_session_id",wt="__pt_session_last",Ot=30*60*1e3,vt=200,Ut=5e3,Dt=[25,50,75,100],kt=80,Ht=[/doubleclick\.net/i,/googlesyndication\.com/i,/adservice\.google/i,/googleadservices\.com/i,/gampad\/ads/i,/adnxs\.com/i,/criteo/i,/pubmatic\.com/i,/openx\.net/i];function lt(t){try{let n=String(t||"");return n?Ht.some(e=>e.test(n)):!1}catch{return!1}}function $t(t){try{let n=t?.tagName?.toLowerCase()==="iframe"?t:t?.closest?.("iframe");if(!n)return!1;let e=n.getAttribute("src")||n.src||"";return lt(e)}catch{return!1}}function Vt(t){try{return!!(t?.matches?.("[data-ad-id],[data-ad-slot],[data-ad-provider]")||t?.closest?.("[data-ad-id],[data-ad-slot],[data-ad-provider]"))}catch{return!1}}function jt(t){try{return!!(t?.matches?.("[role='advertisement']")||t?.closest?.("[role='advertisement']"))}catch{return!1}}function Bt(t){return Vt(t)||jt(t)||$t(t)}function Wt(t){try{return t?.closest?.("[data-ad-id],[data-ad-slot],[data-ad-provider]")||t?.closest?.("[role='advertisement']")||(t?.tagName?.toLowerCase()==="iframe"?t:t?.closest?.("iframe"))||null}catch{return null}}function Ft(t){try{if(!t||!t.querySelectorAll)return!1;let n=Array.from(t.querySelectorAll("iframe[src]")||[]);for(let e of n){let u=e.getAttribute("src")||e.src||"";if(lt(u))return!0}}catch{}return!1}let o={meta:{project_id:null,cdnBase:null,tagVersion:null},config:{collectUrl:null,debug:!1,consentAnalytics:!0,trackPageViews:!0,trackClicks:!0,trackScroll:!0,trackErrors:!0,sampleRate:1,useBeaconOnUnload:!0,includeQueryHash:!1,scrollContainerSelector:null,plugins:{cards:!0,search:!1,ads:!1,checkout:!1},cards:{threshold:.5,minVisibleMs:300,scopeSelector:"main",cardSelector:"article,[data-article-id],[data-content-id],[data-product-id],[data-item-id],[data-sku],.product,.product-card,.item,.card,[data-testid*='card']",adExcludeSelector:"[data-ad-id],[data-ad-slot],[data-ad-provider],[role='advertisement']",minW:120,minH:80},search:{minEmitMs:350,maxWaitMs:4500,quietDebounceMs:220,recheckIntervalMs:300,firstFallbackMs:1600,searchContextWindowMs:10*60*1e3,captureRequestWindowMs:2500,scopeSelector:"main",resultItemSelector:"article,[data-article-id],[data-content-id],[data-result],.search-result,.result,[data-testid*='result'],.product,.product-card,.item,.card,[data-product-id],[data-sku],[data-item-id]",adExcludeSelector:"[data-ad-id],[data-ad-slot],[data-ad-provider],[role='advertisement']"},ads:{threshold:.5,minVisibleMs:300,minViewableMs:1e3,rescanIntervalMs:2e3,rescanTicks:15,containerSelector:"[data-ad-id],[data-ad-slot],[data-ad-provider],[role='advertisement'],iframe",dataSelector:"[data-ad-id],[data-ad-slot],[data-ad-provider]",dedupeWindowMs:5e3}},sampleSeed:null,sampledIn:!0,userId:null,entryReferrer:null,currentUrl:null,previousUrl:null,webVitals:{},__pt_scrollRootEl:null,__pt_scrollBound:!1,__pt_force_rescan_ts:0};function Z(){return Date.now()}function j(){return typeof crypto<"u"&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,t=>{let n=Math.random()*16|0;return(t==="x"?n:n&3|8).toString(16)})}function et(t){return t==null||(t=String(t),t=t.replace(/\s+/g," ").trim(),!t)?null:(t.length>kt&&(t=t.slice(0,kt)+"\u2026"),t=t.replace(/[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}/gi,"[redacted_email]"),t=t.replace(/\+?\d[\d\s\-()]{7,}\d/g,"[redacted_phone]"),t)}function Et(t){try{return localStorage.getItem(t)}catch{return null}}function At(t,n){try{localStorage.setItem(t,n)}catch{}}function zt(t){try{localStorage.removeItem(t)}catch{}}function Ct(t){try{return sessionStorage.getItem(t)}catch{return null}}function xt(t,n){try{sessionStorage.setItem(t,n)}catch{}}function Kt(){let t=Et(bt);return t||(t=j(),At(bt,t)),t}function Xt(){try{let t=Z(),n=Number(Ct(wt)||0),e=Ct(St);return(!e||!n||t-n>Ot)&&(e=j(),xt(St,e)),xt(wt,String(t)),e}catch{return j()}}function Lt(){if(o.userId)return o.userId;let t=Et(ut);return o.userId=t?String(t):null,o.userId}function Yt(t){if(t==null||t===""){o.userId=null,zt(ut);return}o.userId=String(t),At(ut,o.userId)}function dt(){if(o.config.includeQueryHash)return window.location.href;let t=new URL(window.location.href);return t.search="",t.hash="",t.toString()}function Qt(t){let n=String(t||"");return/ipad|tablet|silk/i.test(n)?"tablet":/mobi|android|iphone|ipod/i.test(n)?"mobile":"desktop"}function Gt(t){let n=String(t||"");return/windows nt/i.test(n)?"Windows":/mac os x/i.test(n)&&!/iphone|ipad|ipod/i.test(n)?"macOS":/android/i.test(n)?"Android":/iphone|ipad|ipod/i.test(n)?"iOS":/linux/i.test(n)?"Linux":"Other"}function Zt(t){let n=String(t||"");return/edg\//i.test(n)?"Edge":/chrome\//i.test(n)&&!/edg\//i.test(n)?"Chrome":/safari\//i.test(n)&&!/chrome\//i.test(n)?"Safari":/firefox\//i.test(n)?"Firefox":"Other"}function Jt(){let t=navigator.userAgent;return{ua:t,language:navigator.language,timezone:Intl.DateTimeFormat().resolvedOptions().timeZone,device_type:Qt(t),os:Gt(t),browser:Zt(t),screen:{w:window.screen.width,h:window.screen.height,dpr:window.devicePixelRatio||1},viewport:{w:window.innerWidth,h:window.innerHeight},ip:null,sdk_version:Nt,tag_version:o.meta.tagVersion||null}}function X(t,n={},e={}){let u=dt(),p=e.previous_url!==void 0?e.previous_url:o.previousUrl||null,a=typeof e.event_ts=="number"?e.event_ts:Z();return{project_id:o.meta.project_id,event_name:t,event_ts:a,anonymous_id:Kt(),session_id:Xt(),user_id:Lt(),page_url:u,page_path:window.location.pathname,page_title:document.title,referrer:o.entryReferrer||document.referrer||"direct",previous_url:p,context:Jt(),properties:n,web_vitals:o.webVitals||{}}}let J=[],ft=null;function B(...t){o.config.debug&&console.log("[pt-sdk]",...t)}function qt(){return o.sampledIn&&o.config.consentAnalytics!==!1&&!!o.meta.project_id&&!!o.config.collectUrl}function Y(t){if(qt()){if(o.config.debug)try{console.log("%cPT_EVT","font-weight:bold;color:#00b894",t.event_name,t)}catch{}J.push(t),J.length>=20?nt({reason:"size"}):te()}}function te(){ft||(ft=setTimeout(()=>{ft=null,nt({reason:"timer"})},Ut))}function ee(t,{useBeacon:n=!1}={}){if(window.__pt_debug_events=window.__pt_debug_events||[],window.__pt_debug_events.push(t),n&&navigator.sendBeacon)try{let e=new Blob([JSON.stringify(t)],{type:"application/json"}),u=navigator.sendBeacon(o.config.collectUrl,e);B("beacon sent:",u,t);return}catch(e){B("beacon failed, fallback to fetch",e)}fetch(o.config.collectUrl,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t),keepalive:!0}).then(async e=>{if(e.ok)B("collect ok:",e.status,"events:",t.events?.length);else{let u=await e.text().catch(()=>"");B("collect non-2xx:",e.status,u)}}).catch(e=>B("collect failed:",e))}function nt({reason:t}={}){if(!J.length||!qt())return;let n=J.splice(0,J.length),e=[];for(let p=0;p<n.length;p+=vt)e.push(n.slice(p,p+vt));let u=o.config.useBeaconOnUnload&&(t==="pagehide"||t==="hidden");e.forEach(p=>{let a={project_id:o.meta.project_id,sent_at:Z(),events:p};ee(a,{useBeacon:u})})}function ne(t){if(!t||!t.tagName)return null;let n=[],e=t;for(let u=0;u<4&&e&&e.tagName;u++){let p=e.tagName.toLowerCase();if(e.id){p+=`#${e.id}`,n.unshift(p);break}e.classList&&e.classList.length&&(p+="."+Array.from(e.classList).slice(0,2).join(".")),n.unshift(p),e=e.parentElement}return n.join(">")}function mt(t){let n=t?.closest?.("a,button,input,textarea,select,[role='button'],[role='link'],[data-elt]")||(t?.nodeType===1?t:t?.parentElement);if(!n)return null;let e=n.closest?.("[data-elt]")||n,u=e.getAttribute?.("data-elt")||e.getAttribute?.("data-testid")||e.getAttribute?.("aria-label")||e.getAttribute?.("id")||ne(e);return et(String(u||""))||String(u||"")||null}function re(t){if(!o.config.trackClicks)return;let n=t.target&&t.target.nodeType===1?t.target:t.target?.parentElement,e=mt(n),u=n?.closest?.("a,button,input,textarea,select,[role='button'],[role='link'],[data-elt]")||n;Y(X("click",{_event_id:j(),element_id:e,element_type:u?.tagName?u.tagName.toLowerCase():null,element_role:u?.getAttribute?.("role")||u?.getAttribute?.("data-role")||null,x:t.clientX,y:t.clientY,button:t.button}))}let ht=new Set;function oe(t){try{return(getComputedStyle(t).overflowY||"").toLowerCase()}catch{return""}}function Tt(t){try{if(!t||t===document.body||t===document.documentElement)return!1;let n=oe(t);if(!(n==="auto"||n==="scroll"))return!1;let e=t.clientHeight||0,u=t.scrollHeight||0;return e<200?!1:u-e>80}catch{return!1}}function pt(){try{let n=o.config.scrollContainerSelector;if(n){let e=document.querySelector(n);if(e)return e}}catch{}let t=document.scrollingElement||document.documentElement;try{if(t&&t.scrollHeight-t.clientHeight>80)return t}catch{}try{let n=["#__next","#root","[role='main']","main",".layout",".app",".container"];for(let e of n){let u=document.querySelector(e);if(u&&Tt(u))return u}}catch{}try{let n=[],e=Array.from(document.body?.children||[]);for(let a of e)n.push(a);for(let a of e){let d=Array.from(a.children||[]).slice(0,12);for(let m of d)n.push(m)}let u=null,p=0;for(let a of n){if(!Tt(a))continue;let d=(a.scrollHeight||0)-(a.clientHeight||0);d>p&&(p=d,u=a)}if(u)return u}catch{}return t||document.documentElement}function gt(){return o.__pt_scrollRootEl||(o.__pt_scrollRootEl=pt()),o.__pt_scrollRootEl}function ie(){let t=gt(),n=t===document.documentElement||t===document.body||t===document.scrollingElement,e=0,u=0,p=1;n?(e=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0,u=document.documentElement.scrollHeight||document.body.scrollHeight||0,p=window.innerHeight||document.documentElement.clientHeight||1):(e=t.scrollTop||0,u=t.scrollHeight||0,p=t.clientHeight||1);let a=Math.max(1,u-p),d=e/a*100;return Math.max(0,Math.min(100,d))}function rt(){if(!o.config.trackScroll)return;let t=ie(),n=Math.floor(t+.5);for(let e of Dt)n>=e&&!ht.has(e)&&(ht.add(e),Y(X("scroll",{_event_id:j(),scroll_depth:e})))}function se(){if(!o.__pt_scrollBound){o.__pt_scrollBound=!0,window.addEventListener("scroll",rt,{passive:!0,capture:!0});try{let t=gt();!(t===document.documentElement||t===document.body||t===document.scrollingElement)&&t&&t.addEventListener&&t.addEventListener("scroll",rt,{passive:!0,capture:!0})}catch{}}}function ot(){try{let t=o.__pt_scrollRootEl,n=pt();o.__pt_scrollRootEl=n;let e=t===document.documentElement||t===document.body||t===document.scrollingElement,u=n===document.documentElement||n===document.body||n===document.scrollingElement;t&&!e&&t.removeEventListener&&t.removeEventListener("scroll",rt,{capture:!0}),n&&!u&&n.addEventListener&&n.addEventListener("scroll",rt,{passive:!0,capture:!0})}catch{}}function ce(){try{let t=performance.getEntriesByType("navigation")[0];if(t&&t.responseStart&&(o.webVitals.ttfb=Math.round(t.responseStart)),window.PerformanceObserver){new PerformanceObserver(d=>{d.getEntries().forEach(m=>{m.name==="first-contentful-paint"&&(o.webVitals.fcp=Math.round(m.startTime))})}).observe({type:"paint",buffered:!0}),new PerformanceObserver(d=>{let m=d.getEntries(),x=m[m.length-1];x&&(o.webVitals.lcp=Math.round(x.startTime))}).observe({type:"largest-contentful-paint",buffered:!0});let u=0;new PerformanceObserver(d=>{d.getEntries().forEach(m=>{m.hadRecentInput||(u+=m.value)}),o.webVitals.cls=Number(u.toFixed(4))}).observe({type:"layout-shift",buffered:!0}),new PerformanceObserver(d=>{let m=d.getEntries()[0];m&&(o.webVitals.fid=Math.round(m.processingStart-m.startTime))}).observe({type:"first-input",buffered:!0}),ae()}}catch{}}function ae(){try{let d=function(q,D){if(!q.length)return 0;let T=q.slice().sort((R,I)=>R-I),P=Math.min(T.length-1,Math.max(0,Math.ceil(D*T.length)-1));return T[P]||0},x=function(){m||(m=setTimeout(()=>{m=null;let q=d(e,.98),D=d(e,.95);o.webVitals.inp=q||0,o.webVitals.inp_p95=D||0,o.webVitals.inp_worst=a||0},400))},E=function(){let q=Date.now();for(let[D,T]of n.entries())q-T.lastSeen>=p&&(e.push(T.maxDur),e.length>u&&e.splice(0,e.length-u),n.delete(D),x())};if(!window.PerformanceObserver||o.__inpObserverStarted)return;o.__inpObserverStarted=!0;let t=new Set(["pointermove","mousemove","scroll","wheel","touchmove"]),n=new Map,e=[],u=2e3,p=2e3,a=0,m=null;o.__inpCleanupInterval=setInterval(E,1e3);let L=new PerformanceObserver(q=>{let D=Date.now();for(let T of q.getEntries()){if(!T||!T.interactionId||t.has(T.name))continue;let P=Math.round(T.duration||0);if(P<=0)continue;let R=T.interactionId,I=n.get(R);I?(P>I.maxDur&&(I.maxDur=P),I.lastSeen=D,n.set(R,I)):n.set(R,{maxDur:P,lastSeen:D}),P>a&&(a=P)}E()});try{L.observe({type:"event",buffered:!0,durationThreshold:40})}catch{L.observe({type:"event",buffered:!0})}}catch{}}function It(){(o.sampleSeed===null||o.sampleSeed===void 0)&&(o.sampleSeed=Math.random());let t=typeof o.config.sampleRate=="number"?o.config.sampleRate:1,n=Math.max(0,Math.min(1,t));o.sampledIn=o.sampleSeed<n}function ue(){if(!o.config.trackErrors)return;let t=new Set,n=a=>{try{let d=JSON.stringify(a);return d.length>800?d.slice(0,800):d}catch{return String(a)}},e=a=>{try{if(a==null)return null;let d=String(a).trim();return d?(d.length>500&&(d=d.slice(0,500)+"\u2026"),d):null}catch{return null}},u=(a,d)=>{try{let m=a||d?.fileName||d?.sourceURL||d?.scriptURL||null;if(m)return m;let x=String(d?.stack||"");if(!x)return null;let E=x.match(/(https?:\/\/[^\s)]+|file:\/\/[^\s)]+)/i);if(E&&E[1])return E[1];let L=x.match(/(\b\/[^ \s)]+):\d+:\d+/);return L&&L[1]?L[1]:null}catch{return null}},p=a=>{let d=n(a);t.has(d)||(t.add(d),Y(X("error",{_event_id:j(),...a})))};window.addEventListener("error",a=>{try{if(!a.message&&(a.target||a.srcElement)){let E=a.target||a.srcElement,L=E?.currentSrc||E?.src||E?.href||E?.getAttribute?.("src")||E?.getAttribute?.("href")||null,q=e(L);p({error_type:"resource",message:"resource_load_error",source_url:q,resource_url:q,resource_tag:(E?.tagName||"").toLowerCase()||null,element_id:mt(E)||null,is_fatal:!1});return}let m=et(a?.message)||"js_error",x=e(u(a?.filename,a?.error))||e(a?.filename)||null;p({error_type:"js",message:m,filename:a?.filename||null,lineno:a?.lineno||null,colno:a?.colno||null,source_url:x,is_fatal:!1})}catch{p({error_type:"js",message:"js_error",source_url:null,is_fatal:!1})}},!0),window.addEventListener("unhandledrejection",a=>{try{let d=a?.reason?.message||String(a?.reason||""),m=et(d)||"unhandled_promise",x=e(u(null,a?.reason))||null;p({error_type:"unhandledrejection",message:m,source_url:x,is_fatal:!1})}catch{p({error_type:"unhandledrejection",message:"unhandled_promise",source_url:null,is_fatal:!1})}})}let it=[];function le(t){it.forEach(n=>{try{n.onPageContextChange?.(t)}catch(e){B("plugin onPageContextChange failed",e)}})}function st(t){let n=dt();n!==o.currentUrl&&(o.previousUrl=o.currentUrl,o.currentUrl=n,ht.clear(),ot(),o.__pt_force_rescan_ts=Z(),le(t),o.config.trackPageViews&&Y(X("page_view",{trigger:t,_event_id:j()},{previous_url:o.previousUrl})))}function de(){if(window.__pt_spa_patched)return;window.__pt_spa_patched=!0;let t=history.pushState,n=history.replaceState;history.pushState=function(){let e=t.apply(this,arguments);return setTimeout(()=>st("pushState"),0),e},history.replaceState=function(){let e=n.apply(this,arguments);return setTimeout(()=>st("replaceState"),0),e},window.addEventListener("popstate",()=>st("popstate")),window.addEventListener("hashchange",()=>st("hashchange"))}function ct(t){t&&typeof t.init=="function"&&it.push(t)}function fe(){let t={state:o,enqueue:Y,buildEvent:X,uuid:j,sanitizeText:et,getElementId:mt,dbg:B,now:Z,isAdElementStrong:Bt,findAdContainer:Wt,elementHasAdIframes:Ft,iframeSrcLooksLikeAd:lt};it.forEach(n=>{try{n.init(t)}catch(e){B("plugin init failed",e)}})}function Mt(){it.forEach(t=>{try{t.onConfigChange?.(o.config)}catch(n){B("plugin onConfigChange failed",n)}})}function me(){let t=null,n=null,e=null,u=null,p=null,a=0,d=new Set,m=new WeakSet,x=new WeakSet,E=new WeakMap;function L(){return t?.state?.config?.plugins?.cards!==!1}function q(b){try{if(!b||b.hidden)return!1;let l=window.getComputedStyle?getComputedStyle(b):null;if(l&&(l.display==="none"||l.visibility==="hidden"||l.opacity==="0")||b.getClientRects&&b.getClientRects().length===0)return!1;let S=b.getBoundingClientRect?.();return S?S.width>0&&S.height>0:!1}catch{return!0}}function D(b,l,S){try{let c=b.getBoundingClientRect?.();return c?c.width>=l&&c.height>=S:!1}catch{return!1}}function T(b,l){try{if(!b)return!1;if(t.isAdElementStrong(b)||t.elementHasAdIframes(b)||l&&(b?.matches?.(l)||b?.closest?.(l)))return!0;let S=String(b.className||"").toLowerCase(),c=String(b.id||"").toLowerCase(),g=String(b.getAttribute?.("data-testid")||"").toLowerCase(),_=String(b.getAttribute?.("data-elt")||"").toLowerCase(),y=String(b.getAttribute?.("aria-label")||"").toLowerCase(),f=`${S} ${c} ${g} ${_} ${y}`;return!!/\b(ad|ads|advert|advertisement|sponsor|sponsored|promoted|promo)\b/i.test(f)}catch{return!1}}function P(b){try{if(!b||b.nodeType!==1||b.closest("header,nav,footer"))return!1;let l=b.getBoundingClientRect?.();if(!l||l.width<160||l.height<100)return!1;let S=!!b.querySelector("a[href]");if(!S)return!1;let c=!!b.querySelector("img,picture,video"),g=!!b.querySelector("h1,h2,h3"),_=(b.innerText||"").trim(),y=_.length>=30,f=/\$\s?\d+|‚Ç¨\s?\d+|¬£\s?\d+|\b\d+\s?(usd|eur|gbp)\b/i.test(_);return c&&(g||y)||g&&y||f&&S}catch{return!1}}function R(){if(!L())return;let b=t.state.config.cards||{},l=document.querySelector(b.scopeSelector||"main")||document.body||document.documentElement,S=b.cardSelector||"article",c=b.adExcludeSelector||null,g=b.minW??120,_=b.minH??80,y=0;try{l.querySelectorAll(S).forEach(f=>{if(!(d.size>1200)&&q(f)&&D(f,g,_)&&!T(f,c)&&(d.add(f),y++,u&&!x.has(f)))try{u.observe(f),x.add(f)}catch{}})}catch{}if(y<5&&d.size<20)try{let f=l.querySelectorAll("article,li,section,div"),A=0;for(let M of f){if(A++,A>1800||d.size>1200)break;if(q(M)&&D(M,g,_)&&!T(M,c)&&P(M)&&(d.add(M),u&&!x.has(M)))try{u.observe(M),x.add(M)}catch{}}}catch{}}function I(b){try{if(!n||!b||m.has(b))return;m.add(b),n.observe(b)}catch{}}function $(){if(!L()||n)return;let b=t.state.config.cards||{},l=b.threshold??.5;n=new IntersectionObserver(S=>{for(let c of S){let g=c.target;if(!g)continue;let _=b.adExcludeSelector||null;if(T(g,_))continue;let y=c.isIntersecting&&(c.intersectionRatio||0)>=l,f=E.get(g);f||(f={timer:null,sent:!1,impression_id:null,lastRatio:0},E.set(g,f)),f.lastRatio=c.intersectionRatio||0,y&&!f.sent&&!f.timer&&(f.impression_id=f.impression_id||t.uuid(),f.timer=setTimeout(()=>{f.sent=!0,f.timer=null,t.enqueue(t.buildEvent("card_impression",{_event_id:t.uuid(),element_id:t.getElementId(g),impression_id:f.impression_id,viewport_percent:Math.round((f.lastRatio||0)*100)}))},b.minVisibleMs??300)),!y&&f.timer&&(clearTimeout(f.timer),f.timer=null),E.set(g,f)}},{threshold:[l]});try{u=new ResizeObserver(S=>{for(let c of S){let g=c.target;g&&(d.add(g),I(g))}})}catch{u=null}R(),d.forEach(S=>I(S)),e=new MutationObserver(()=>{R(),d.forEach(S=>I(S))});try{e.observe(document.documentElement,{childList:!0,subtree:!0,attributes:!0})}catch{}a=0,p=setInterval(()=>{a++,R(),d.forEach(S=>I(S)),a>=12&&(clearInterval(p),p=null)},1200)}function V(){try{e&&e.disconnect()}catch{}e=null;try{n&&n.disconnect()}catch{}n=null;try{u&&u.disconnect()}catch{}u=null,p&&(clearInterval(p),p=null),d.clear()}function W(){try{R(),d.forEach(b=>I(b))}catch{}p||(a=0,p=setInterval(()=>{a++,R(),d.forEach(b=>I(b)),a>=8&&(clearInterval(p),p=null)},1100))}return{init(b){t=b,L()&&$()},onConfigChange(){L()?$():V()},onPageContextChange(){L()&&W()}}}function he(){let t=null,n=null,e=null,u=null,p=null,a={query:null,results_count:null,search_latency_ms:null,ts:0};function d(){return!!t?.state?.config?.plugins?.search}function m(r){try{return String(r||"").toLowerCase()}catch{return""}}function x(r){try{if(!r||r.nodeType!==1)return!1;let s=m(r.getAttribute?.("name")||""),i=m(r.getAttribute?.("id")||r.id||""),h=m(r.getAttribute?.("role")||""),w=m(r.getAttribute?.("type")||""),v=m(r.getAttribute?.("aria-label")||""),k=m(r.getAttribute?.("placeholder")||""),O=m(r.getAttribute?.("title")||""),H=m(r.getAttribute?.("data-testid")||""),U=m(r.getAttribute?.("data-elt")||""),C=m(r.className||""),z=m(r.getAttribute?.("autocomplete")||""),G=m(r.getAttribute?.("enterkeyhint")||""),at=m(r.getAttribute?.("inputmode")||"");if(h==="searchbox"||w==="search"||G==="search"||at==="search"||s==="q"||s==="query"||s==="search"||s==="keyword"||s==="term"||i==="q"||i==="query"||i==="search"||i==="keyword"||i==="term")return!0;let tt=`${s} ${i} ${h} ${v} ${k} ${O} ${H} ${U} ${C} ${z} ${G} ${at}`;if(/(^|\b)(search|query|keyword|find|lookup)\b/.test(tt))return!0;let F=r.closest?.("form");if(F){let ve=`${m(F.getAttribute?.("role")||"")} ${m(F.getAttribute?.("action")||"")} ${m(F.id||"")} ${m(F.className||"")} ${m(F.getAttribute?.("aria-label")||"")}`;if(/search/.test(ve))return!0}return!!r.closest?.("[role='search'],[data-search],.search,.Search")}catch{return!1}}function E(r){try{if(!r||r.nodeType!==1)return!1;let s=m(r.tagName||""),i=s==="input"||s==="textarea",h=!i&&!!r.isContentEditable;if(!i&&!h)return!1;if(s==="input"){let w=m(r.getAttribute?.("type")||"");if(w&&new Set(["password","hidden","checkbox","radio","button","submit","reset","file","color","date","datetime-local","month","week","time","number","range"]).has(w)&&!x(r))return!1}return x(r)}catch{return!1}}function L(r){try{let s=r?.value!==void 0?r.value:r?.innerText||"";return t.sanitizeText(s)||""}catch{return""}}function q(r){try{let s=r?.closest?.("form")||null;if(s){let h=Array.from(s.querySelectorAll("input,textarea,[contenteditable='true']")).find(E);if(h)return h}let i=r?.closest?.("[role='search'],[data-search],.search,.Search")||null;if(i){let h=Array.from(i.querySelectorAll("input,textarea,[contenteditable='true']")).find(E);if(h)return h}return Array.from(document.querySelectorAll("input,textarea,[contenteditable='true']")).find(E)||null}catch{return null}}function D(r){try{if(!r)return!1;let s=m(r.tagName||"");if(!["button","a","div","span","input"].includes(s))return!1;let i=m(r.getAttribute?.("type")||"");if(s==="input"&&(i==="submit"||i==="button")){let C=r.closest?.("form");if(C&&Array.from(C.querySelectorAll("input,textarea,[contenteditable='true']")).find(E))return!0}if(s==="button"&&i==="submit"){let C=r.closest?.("form");if(C&&Array.from(C.querySelectorAll("input,textarea,[contenteditable='true']")).find(E))return!0}let h=m(r.getAttribute?.("role")||""),w=m(r.getAttribute?.("aria-label")||""),v=m(r.getAttribute?.("title")||""),k=m(r.getAttribute?.("data-elt")||r.getAttribute?.("data-testid")||""),O=m(r.innerText||""),H=`${w} ${v} ${k} ${O}`.trim(),U=/search|find|go|submit|lookup|magnifier|üîç/.test(H);return s==="button"&&(i==="submit"||i==="button")||s==="input"&&(i==="submit"||i==="button")||h==="button"||h==="link"||s==="a"?U:!1}catch{return!1}}function T(){let r=t?.state?.config?.search?.searchContextWindowMs??6e5;return!a?.query||!a?.ts?!1:t.now()-a.ts<=r}function P(r){try{if(!r||r.hidden)return!1;let s=window.getComputedStyle?getComputedStyle(r):null;if(s&&(s.display==="none"||s.visibility==="hidden"||s.opacity==="0")||r.getClientRects&&r.getClientRects().length===0)return!1;let i=r.getBoundingClientRect?.();return i?i.width>0&&i.height>0:!1}catch{return!0}}function R(r,s,i){try{let h=r.getBoundingClientRect?.();return h?h.width>=s&&h.height>=i:!1}catch{return!1}}function I(r){try{if(!r||t.isAdElementStrong(r))return!1;let s=m(r.tagName||""),i=m(r.className||""),h=m(r.getAttribute?.("data-testid")||""),w=m(r.getAttribute?.("data-elt")||""),v=!!r.getAttribute?.("data-article-id")||!!r.getAttribute?.("data-content-id")||!!r.getAttribute?.("data-product-id")||!!r.getAttribute?.("data-item-id")||!!r.getAttribute?.("data-sku")||!!r.querySelector?.("[data-article-id],[data-content-id],[data-product-id],[data-item-id],[data-sku]"),k=/(card|story|post|tile|teaser|item|result|entry|headline|featured|product)/i.test(i),O=/(card|story|tile|teaser|result|featured|hero|product)/i.test(h)||/(card|story|tile|teaser|featured|hero|product)/i.test(w),H=!!r.querySelector?.("img,picture,video"),U=!!r.querySelector?.("h1,h2,h3"),C=!!r.querySelector?.("a[href]")||s==="a",z=(r.innerText||"").slice(0,500),G=/\$\s?\d+|‚Ç¨\s?\d+|¬£\s?\d+|\b\d+\s?(usd|eur|gbp)\b/i.test(z);return!!(s==="article"||v||(k||O)&&(H||U||G)&&C)}catch{return!1}}function $(r){try{if(!r)return null;let s=r.closest?.("article,[data-article-id],[data-content-id],[data-product-id],[data-item-id],[data-sku],[data-elt],[data-testid]")||r;if(s&&I(s)&&R(s,120,80))return s;let i=r;for(let h=0;h<6&&i;h++){if(i.nodeType!==1){i=i.parentElement;continue}if(I(i)&&R(i,120,80))return i;i=i.parentElement}}catch{}return null}function V(r){try{if(!r)return!1;if(t.isAdElementStrong(r)||r.querySelector?.("[data-ad-id],[data-ad-slot],[data-ad-provider],[role='advertisement']")||t.elementHasAdIframes(r))return!0;let s=m(r.className||""),i=m(r.id||""),h=m(r.getAttribute?.("data-testid")||""),w=m(r.getAttribute?.("data-elt")||""),v=m(r.getAttribute?.("aria-label")||""),k=`${s} ${i} ${h} ${w} ${v}`;return!!/\b(ad|ads|advert|advertisement|sponsor|sponsored|promoted|promo)\b/i.test(k)}catch{return!1}}function W(r){try{return r&&(r.getAttribute?.("data-article-id")||r.getAttribute?.("data-content-id")||r.getAttribute?.("data-product-id")||r.getAttribute?.("data-item-id")||r.getAttribute?.("data-sku")||r.querySelector?.("[data-article-id]")?.getAttribute?.("data-article-id")||r.querySelector?.("[data-content-id]")?.getAttribute?.("data-content-id")||r.querySelector?.("[data-product-id]")?.getAttribute?.("data-product-id")||r.querySelector?.("[data-item-id]")?.getAttribute?.("data-item-id")||r.querySelector?.("[data-sku]")?.getAttribute?.("data-sku"))||null}catch{return null}}function b(){let r=t.state.config.search||{};return document.querySelector(r.scopeSelector||"main")||document.body||document.documentElement}function l(){let r=b(),i=Array.from(r.querySelectorAll("article,[data-article-id],[data-content-id],[data-product-id],[data-item-id],[data-sku],[data-elt],[data-testid],a[href]")),h=new Set;for(let v of i){if(!P(v)||v.closest?.("header, nav, footer"))continue;let k=$(v);k&&(k.closest?.("header, nav, footer")||P(k)&&R(k,120,80)&&I(k)&&(V(k)||h.add(k)))}let w=Array.from(h);try{let v=new Set([r,document.body,document.documentElement]),k=new Map;for(let U of w){let C=U.parentElement;for(let z=0;z<4&&C&&!v.has(C);z++)k.set(C,(k.get(C)||0)+1),C=C.parentElement}let O=null,H=0;for(let[U,C]of k.entries())!U||v.has(U)||C>H&&(O=U,H=C);O&&H>=2&&(w=w.filter(U=>O.contains(U)))}catch{}try{w=w.slice().sort((v,k)=>v===k?0:v.compareDocumentPosition(k)&Node.DOCUMENT_POSITION_FOLLOWING?-1:1)}catch{}return{scope:r,cards:w}}function S(r){try{let s=[];for(let i=0;i<r.length&&i<20;i++){let h=r[i],w=W(h)||"",k=(h.querySelector?.("a[href]")||h.closest?.("a[href]"))?.getAttribute?.("href")||"";s.push(String(w||k||t.getElementId(h)||"").slice(0,120))}return s.join("|")}catch{return""}}function c(r){try{let i=(r||document.body||document.documentElement).querySelectorAll("[data-testid*='no-result'],[data-testid*='no_results'],[class*='no-result'],[id*='no-result'],[role='status'],[role='alert']");for(let h of i){let w=(h.innerText||"").toLowerCase().trim();if(w&&(w.includes("no results")||w.includes("0 results")||w.includes("nothing found")||w.includes("\u0644\u0645 \u064A\u062A\u0645 \u0627\u0644\u0639\u062B\u0648\u0631")||w.includes("\u0644\u0627 \u062A\u0648\u062C\u062F \u0646\u062A\u0627\u0626\u062C")||w.includes("\u0645\u0627 \u0641\u064A \u0646\u062A\u0627\u0626\u062C")||w.includes("\u0644\u0627 \u064A\u0648\u062C\u062F \u0646\u062A\u0627\u0626\u062C")))return!0}}catch{}return!1}function g(){if(e){try{e.disconnect()}catch{}e=null}u&&(clearTimeout(u),u=null),p&&(clearTimeout(p),p=null)}function _(){n=null,g()}function y(){if(e)return;let r=t.state.config.search||{},s=document.querySelector(r.scopeSelector||"main")||document.body||document.documentElement;e=new MutationObserver(()=>{n&&(u&&clearTimeout(u),u=setTimeout(()=>{f(!1)},r.quietDebounceMs??220))});try{e.observe(s,{childList:!0,subtree:!0,attributes:!0})}catch{}}function f(r){if(!n)return!1;let s=t.state.config.search||{},i=Math.max(0,t.now()-n.startTs),{scope:h,cards:w}=l(),v=w.length,k=S(w),O=c(h),H=s.minEmitMs??350,U=s.maxWaitMs??4500,C=!0;try{let tt=typeof n.baselineCount=="number"?n.baselineCount:null,F=n.baselineSig||"";C=!1,(tt!==null&&v!==tt||F&&k&&k!==F||!F&&tt===null||n.reqDone&&(v>0||O))&&(C=!0)}catch{C=!0}if(!(r||i>=U||(v>0||O)&&i>=H&&C))return!1;let G=O?0:Math.max(0,v||0),at=Math.round(i);return a={query:n.query||"",results_count:G,search_latency_ms:at,ts:t.now()},t.enqueue(t.buildEvent("search",{_event_id:t.uuid(),element_id:n.elementId||"search_input",query:a.query,results_count:a.results_count,search_latency_ms:a.search_latency_ms,network_latency_ms:typeof n.reqLatencyMs=="number"?Math.round(n.reqLatencyMs):null,latency_source:"render"})),_(),!0}function A(){let r=t.state.config.search||{};if(!n||f(!1))return;let s=Math.max(0,t.now()-n.startTs),i=r.maxWaitMs??4500;if(s>=i){f(!0);return}p=setTimeout(A,r.recheckIntervalMs??300)}function M(r){if(!d())return;let s=L(r);if(!s)return;let i=(()=>{try{let{cards:w}=l();return{sig:S(w),count:w.length}}catch{return{sig:"",count:0}}})();n={token:t.uuid(),startTs:t.now(),elementId:t.getElementId(r)||"search_input",query:s,baselineSig:i.sig,baselineCount:i.count,reqCaptured:!1,reqDone:!1,reqLatencyMs:null,lastNavUrl:t.state.currentUrl||null},g(),y();let h=t.state.config.search||{};p=setTimeout(A,h.firstFallbackMs??1600)}function K(r){try{return String(r||"")}catch{return""}}function N(r,s){let i=K(r).toLowerCase();if(!i)return!1;if(i.includes("/search")||i.includes("search=")||i.includes("q=")||i.includes("query=")||i.includes("term="))return!0;if((i.includes("autocomplete")||i.includes("suggest"))&&!i.includes("/search")&&!i.includes("search=")&&!i.includes("q=")&&!i.includes("query="))return!1;if(s)try{let h=encodeURIComponent(String(s).toLowerCase());if(h&&(i.includes(h)||i.includes(String(s).toLowerCase())))return!0}catch{}return!1}function Q(r){if(!n)return!1;let i=(t.state.config.search||{}).captureRequestWindowMs??2500,h=t.now()-n.startTs;return h<0||h>i?!1:N(r,n.query)}function Pt(r){n&&(n.reqDone=!0,n.reqLatencyMs=Math.max(0,r),setTimeout(()=>f(!1),150))}function ye(){if(window.__pt_search_fetch_patched)return;window.__pt_search_fetch_patched=!0;let r=window.fetch;typeof r=="function"&&(window.fetch=async function(...s){let i=performance.now(),h=s[0],w=typeof h=="string"?h:h?.url,v=d()&&n&&!n.reqCaptured&&Q(w);v&&(n.reqCaptured=!0);let k;try{return k=await r.apply(this,s),k}finally{if(v){let O=performance.now();Pt(O-i)}}})}function be(){if(window.__pt_search_xhr_patched)return;window.__pt_search_xhr_patched=!0;let r=window.XMLHttpRequest;if(!r||!r.prototype)return;let s=r.prototype.open,i=r.prototype.send;r.prototype.open=function(h,w){return this.__pt_url=w,s.apply(this,arguments)},r.prototype.send=function(){let h=performance.now(),w=this.__pt_url,v=d()&&n&&!n.reqCaptured&&Q(w);v&&(n.reqCaptured=!0);let k=()=>{if(v){let O=performance.now();Pt(O-h)}};return this.addEventListener("load",k),this.addEventListener("error",k),this.addEventListener("abort",k),i.apply(this,arguments)}}function Se(r){if(!d()||!T()||!a?.query||typeof a.results_count!="number"||a.results_count<=0)return;let s=r.target&&r.target.nodeType===1?r.target:r.target?.parentElement;if(!s||t.isAdElementStrong(s)||t.isAdElementStrong(t.findAdContainer(s)))return;let{cards:i}=l();if(!i.length)return;let w=(t.state.config.search||{}).resultItemSelector||"article,.result,.search-result,.product,.card,.item",v=s.closest?.("a,button,input,[role='link'],[role='button']")||s;if(!v)return;let k=$(v)||v.closest?.(w);if(!k||V(k))return;let O=i.indexOf(k),H=O>=0?O+1:null,U=W(k)||v.getAttribute?.("data-article-id")||v.getAttribute?.("data-content-id")||v.getAttribute?.("data-product-id")||v.getAttribute?.("data-item-id")||v.getAttribute?.("data-sku")||v.getAttribute?.("href")||k.querySelector?.("a[href]")?.getAttribute?.("href")||null;t.enqueue(t.buildEvent("search_result_click",{_event_id:t.uuid(),element_id:t.getElementId(v),query:a.query,clicked_result_id:U,result_rank:H,results_count:a.results_count,search_latency_ms:a.search_latency_ms}))}function we(){try{if(!n||t.now()-n.startTs>8e3)return!1;let s=t.state.currentUrl||window.location.href;if(N(s,n.query))return!0;let i=new URL(s,window.location.origin);return!!(i.searchParams.get("q")||i.searchParams.get("query")||i.searchParams.get("search")||i.searchParams.get("term")||"").toLowerCase()}catch{return!1}}return{init(r){t=r,ye(),be(),document.addEventListener("keydown",s=>{if(!d())return;let i=s.target&&s.target.nodeType===1?s.target:s.target?.parentElement;if(i&&E(i)&&s.key==="Enter"){if(s.shiftKey)return;M(i)}},!0),document.addEventListener("submit",s=>{if(!d())return;let i=s.target;if(!i||i.nodeType!==1)return;let h=Array.from(i.querySelectorAll("input,textarea,[contenteditable='true']")).find(E);h&&M(h)},!0),document.addEventListener("click",s=>{if(!d())return;let h=(s.target&&s.target.nodeType===1?s.target:s.target?.parentElement)?.closest?.("button,a,input,[role='button'],[role='link'],div,span")||null;if(!h||!D(h))return;let w=q(h);w&&M(w)},!0),document.addEventListener("click",Se,!0);try{let s=t.state.currentUrl||window.location.href,i=new URL(s,window.location.origin),h=i.searchParams.get("q")||i.searchParams.get("query")||i.searchParams.get("search")||i.searchParams.get("term");if(h&&d()){n={token:t.uuid(),startTs:t.now(),elementId:"search_url",query:t.sanitizeText(h)||String(h||""),baselineSig:"",baselineCount:0,reqCaptured:!1,reqDone:!1,reqLatencyMs:null,lastNavUrl:s},g(),y();let w=t.state.config.search||{};p=setTimeout(A,w.firstFallbackMs??1600)}}catch{}},onConfigChange(){d()||_()},onPageContextChange(){if(d()&&n&&we()){g(),setTimeout(()=>{n&&(y(),f(!1))},0);let r=t.state.config.search||{};p&&clearTimeout(p),p=setTimeout(A,r.firstFallbackMs??1600);return}_()}}}function pe(){let t=null,n=null,e=null,u=null,p=null,a=0,d=new Set,m=new WeakSet,x=new WeakSet,E=new Map,L=new Map;function q(){return!!t?.state?.config?.plugins?.ads}function D(c){return t.iframeSrcLooksLikeAd(c?.getAttribute?.("src")||c?.src||"")||t.isAdElementStrong(c)}function T(c){let _=(t.state.config.ads||{}).dataSelector||"[data-ad-id],[data-ad-slot],[data-ad-provider]";try{return c?.closest?.(_)||c?.closest?.("[role='advertisement']")||(c?.tagName?.toLowerCase()==="iframe"?c:c?.closest?.("iframe"))||null}catch{return null}}function P(c){try{if(!c)return!1;let _=(t.state.config.ads||{}).dataSelector||"[data-ad-id],[data-ad-slot],[data-ad-provider]";return!!(c.closest?.(_)||c.matches?.(_)||c.closest?.("[role='advertisement']")||c.matches?.("[role='advertisement']")||t.iframeSrcLooksLikeAd(c?.getAttribute?.("src")||c?.src||"")||t.isAdElementStrong(c))}catch{return!1}}function R(c){let _=(t.state.config.ads||{}).dataSelector||"[data-ad-id],[data-ad-slot],[data-ad-provider]",y=T(c);if(!y)return null;let f=y.closest?.(_)||(y.matches?.(_)?y:null),A=y.tagName?.toLowerCase()==="iframe"?y:y.querySelector?.("iframe")||null,M=y.closest?.("[role='advertisement']")||(y.matches?.("[role='advertisement']")?y:null),K=t.getElementId(f||M||A||y);return K?{element_id:K,ad_id:f?.getAttribute?.("data-ad-id")||null,ad_slot:f?.getAttribute?.("data-ad-slot")||null,ad_provider:f?.getAttribute?.("data-ad-provider")||null}:null}function I(c){try{let g=c.getBoundingClientRect?.();return g?g.width>=40&&g.height>=40:!1}catch{return!1}}function $(c){let _=(t.state.config.ads||{}).dedupeWindowMs??5e3,y=t.now(),f=L.get(c);if(f&&y-f<_)return!0;if(L.set(c,y),L.size>500)for(let[A,M]of L.entries())y-M>_&&L.delete(A);return!1}function V(c){try{if(!n||!c||m.has(c))return;m.add(c),n.observe(c)}catch{}}function W(){if(!q())return;let c=t.state.config.ads||{},g=c.containerSelector||"[data-ad-id],[data-ad-slot],[data-ad-provider],[role='advertisement'],iframe",_=c.dataSelector||"[data-ad-id],[data-ad-slot],[data-ad-provider]";try{document.querySelectorAll(g).forEach(y=>{if(d.size>900)return;let f=T(y)||y;if(f&&P(f)&&I(f)&&!(f.tagName?.toLowerCase()==="iframe"&&(f.closest?.(_)||f.closest?.("[role='advertisement']")||!t.iframeSrcLooksLikeAd(f.getAttribute?.("src")||f.src||"")))&&(d.add(f),u&&!x.has(f)))try{u.observe(f),x.add(f)}catch{}})}catch{}}function b(){if(!q()||n)return;let c=t.state.config.ads||{},g=c.threshold??.5;n=new IntersectionObserver(_=>{for(let y of _){let f=y.target;if(!f||!P(f))continue;let A=R(f);if(!A?.element_id)continue;let M=y.intersectionRatio||0,K=y.isIntersecting&&M>=g;E.has(A.element_id)||E.set(A.element_id,{impTimer:null,impSent:!1,viewStart:null,viewableSent:!1,lastRatio:0});let N=E.get(A.element_id);if(N.lastRatio=M,K&&!N.impSent&&!N.impTimer&&(N.impTimer=setTimeout(()=>{N.impSent=!0,N.impTimer=null;let Q=A.ad_id||A.ad_slot||A.element_id;$(Q)||t.enqueue(t.buildEvent("ad_impression",{_event_id:t.uuid(),element_id:A.element_id,ad_id:A.ad_id,ad_slot:A.ad_slot,ad_provider:A.ad_provider}))},c.minVisibleMs??300)),!K&&N.impTimer&&(clearTimeout(N.impTimer),N.impTimer=null),K)N.viewStart===null&&(N.viewStart=t.now());else if(N.viewStart!==null&&!N.viewableSent){let Q=t.now()-N.viewStart;N.viewStart=null,Q>=(c.minViewableMs??1e3)&&(N.viewableSent=!0,t.enqueue(t.buildEvent("ad_viewable",{_event_id:t.uuid(),element_id:A.element_id,ad_id:A.ad_id,ad_slot:A.ad_slot,ad_provider:A.ad_provider,view_time_ms:Q,viewable_percent:Math.round(N.lastRatio*100)})))}E.set(A.element_id,N)}},{threshold:[g]});try{u=new ResizeObserver(_=>{for(let y of _){let f=y.target;!f||!P(f)||I(f)&&(d.add(f),V(f))}})}catch{u=null}W(),d.forEach(_=>V(_)),e=new MutationObserver(()=>{W(),d.forEach(_=>V(_))});try{e.observe(document.documentElement,{childList:!0,subtree:!0,attributes:!0})}catch{}a=0,p=setInterval(()=>{a++,W(),d.forEach(_=>V(_)),a>=(c.rescanTicks??15)&&(clearInterval(p),p=null)},c.rescanIntervalMs??2e3)}function l(){try{e&&e.disconnect()}catch{}e=null;try{n&&n.disconnect()}catch{}n=null;try{u&&u.disconnect()}catch{}u=null,p&&(clearInterval(p),p=null),d.clear(),E.clear(),L.clear()}function S(c){if(!q())return;let g=c.target&&c.target.nodeType===1?c.target:c.target?.parentElement,_=T(g)||g;if(!_||!P(_))return;let y=R(_);y?.element_id&&t.enqueue(t.buildEvent("ad_click",{_event_id:t.uuid(),element_id:y.element_id,ad_id:y.ad_id,ad_slot:y.ad_slot,ad_provider:y.ad_provider}))}return{init(c){t=c,document.addEventListener("click",S,!0),q()&&b()},onConfigChange(){q()?b():l()}}}function ge(){let t=null,n="__pt_checkout_id_ss",e="__pt_checkout_id_ls",u=1500,p=new Map;function a(){return!!t?.state?.config?.plugins?.checkout}function d(l){try{return sessionStorage.getItem(l)}catch{return null}}function m(l,S){try{sessionStorage.setItem(l,S)}catch{}}function x(l){try{sessionStorage.removeItem(l)}catch{}}function E(l){try{return localStorage.getItem(l)}catch{return null}}function L(l,S){try{localStorage.setItem(l,S)}catch{}}function q(l){try{return localStorage.removeItem(l)}catch{}}function D(){let l=d(n)||E(e);return l||(l=t.uuid(),m(n,l),L(e,l)),l}function T(){x(n),q(e)}function P(l){try{return/(checkout|payment|subscribe|billing|order|3ds|stripe|paypal)/i.test(String(l||""))}catch{return!1}}function R(l){let S=(location.pathname+" "+location.href).toLowerCase(),c=(typeof l=="string"?l:l?.innerText||l?.getAttribute?.("aria-label")||l?.getAttribute?.("data-elt")||l?.getAttribute?.("data-testid")||"").toLowerCase(),g=S+" "+c;return/(confirm|success|complete|thank)/i.test(g)?"payment_confirm":/(payment|card|cvv|cvc|3ds|stripe|paypal)/i.test(g)?"payment_form":/(plan|pricing|choose|select)/i.test(g)?"plan_select":(/(checkout|subscribe|billing|order)/i.test(g),"checkout_start")}function I(l,S,c){let g=`${D()}|${l}|${S}|${c||""}`,_=t.now(),y=p.get(g)||0;return _-y<u?!1:(p.set(g,_),!0)}function $(l,S,c,g={}){if(!a())return;let _=D();I(l,S,c)&&(t.enqueue(t.buildEvent("checkout",{_event_id:t.uuid(),element_id:c||null,checkout_id:_,checkout_step:l,status:S,...g})),l==="payment_confirm"&&S==="success"&&T())}function V(){if(window.__pt_checkout_fetch_patched)return;window.__pt_checkout_fetch_patched=!0;let l=window.fetch;typeof l=="function"&&(window.fetch=async function(...S){let c=performance.now(),g=S[0],_=typeof g=="string"?g:g?.url,y;try{return y=await l.apply(this,S),y}finally{try{if(!a())return;if(_&&P(_)){let f=Math.round(performance.now()-c),A=!!(y&&y.ok),M=R(String(_));$(M,A?"success":"fail","checkout_network",{checkout_latency_ms:f,checkout_url_hint:String(_).slice(0,300)})}}catch{}}})}function W(){if(window.__pt_checkout_xhr_patched)return;window.__pt_checkout_xhr_patched=!0;let l=window.XMLHttpRequest;if(!l||!l.prototype)return;let S=l.prototype.open,c=l.prototype.send;l.prototype.open=function(g,_){return this.__pt_checkout_url=_,S.apply(this,arguments)},l.prototype.send=function(){let g=performance.now(),_=this.__pt_checkout_url,y=()=>{try{if(!a())return;if(_&&P(_)){let f=Math.round(performance.now()-g),A=this.status>=200&&this.status<300,M=R(String(_));$(M,A?"success":"fail","checkout_network",{checkout_latency_ms:f,checkout_url_hint:String(_).slice(0,300),xhr_status:this.status||null})}}catch{}};return this.addEventListener("load",y),this.addEventListener("error",y),this.addEventListener("abort",y),c.apply(this,arguments)}}function b(){document.addEventListener("click",l=>{try{if(!a())return;let c=(l.target&&l.target.nodeType===1?l.target:l.target?.parentElement)?.closest?.("button,a,input,[role='button'],[role='link'],[data-elt],[data-testid]")||null;if(!c)return;let g=(c.getAttribute?.("data-elt")||c.getAttribute?.("data-testid")||c.getAttribute?.("aria-label")||c.innerText||"").toLowerCase();if(!/(checkout|pay|subscribe|payment|plan|pricing|order|buy|purchase)/i.test(g))return;let _=R(c),y=t.getElementId(c);$(_,"start",y)}catch{}},!0),document.addEventListener("submit",l=>{try{if(!a())return;let S=l.target;if(!S||S.nodeType!==1)return;let c=(S.innerText||"").toLowerCase();if(!(/(card|cvv|cvc|expiry|expiration|3ds|stripe|paypal|payment)/i.test(c)||/payment/i.test(location.pathname+" "+location.href)))return;$("payment_form","start","payment_form_submit")}catch{}},!0)}return{init(l){t=l,V(),W(),b()},onConfigChange(){}}}function Rt(t){if(!Array.isArray(t))return;let[n,e]=t;if(n==="__meta"){o.meta.project_id=e?.project_id||o.meta.project_id,o.meta.cdnBase=e?.cdnBase||o.meta.cdnBase,o.meta.tagVersion=e?.tagVersion||o.meta.tagVersion;return}if(n==="config"){if(!e)return;if(e.collectUrl&&(o.config.collectUrl=e.collectUrl),typeof e.debug=="boolean"&&(o.config.debug=e.debug),typeof e.trackPageViews=="boolean"&&(o.config.trackPageViews=e.trackPageViews),typeof e.trackClicks=="boolean"&&(o.config.trackClicks=e.trackClicks),typeof e.trackScroll=="boolean"&&(o.config.trackScroll=e.trackScroll),typeof e.trackErrors=="boolean"&&(o.config.trackErrors=e.trackErrors),typeof e.includeQueryHash=="boolean"&&(o.config.includeQueryHash=e.includeQueryHash),typeof e.scrollContainerSelector=="string"&&(o.config.scrollContainerSelector=e.scrollContainerSelector||null,ot()),typeof e.sampleRate=="number"&&(o.config.sampleRate=Math.max(0,Math.min(1,e.sampleRate)),It()),e.plugins&&typeof e.plugins=="object"){o.config.plugins=o.config.plugins||{};for(let u in e.plugins)typeof e.plugins[u]=="boolean"&&(o.config.plugins[u]=e.plugins[u])}e.cards&&typeof e.cards=="object"&&(o.config.cards=o.config.cards||{},Object.assign(o.config.cards,e.cards)),e.search&&typeof e.search=="object"&&(o.config.search=o.config.search||{},Object.assign(o.config.search,e.search)),e.ads&&typeof e.ads=="object"&&(o.config.ads=o.config.ads||{},Object.assign(o.config.ads,e.ads)),Mt();return}if(n==="consent"){e&&typeof e.analytics=="boolean"&&(o.config.consentAnalytics=e.analytics),Mt();return}if(n==="setUserId"){Yt(e);return}if(n==="event"){if(!e)return;let u=e.type||e.event_name;if(!u)return;let p=e.payload||e.properties||{},a=typeof e.event_ts=="number"?e.event_ts:void 0;Y(X(u,{_event_id:j(),...p},{event_ts:a}));return}n==="flush"&&nt({reason:"manual"})}function _e(){o.entryReferrer=document.referrer||"direct",o.currentUrl=dt(),o.previousUrl=null,Lt(),It();let t=window[yt]=window[yt]||[];t.forEach(Rt);let n=t.push.bind(t);t.push=function(...e){return e.forEach(Rt),n(...e)},de(),ce(),ue(),o.config.trackClicks&&document.addEventListener("click",re,!0),o.config.trackScroll&&(o.__pt_scrollRootEl=pt(),se(),setTimeout(()=>ot(),800),setTimeout(()=>ot(),2e3)),window.addEventListener("pagehide",()=>nt({reason:"pagehide"})),ct(me()),ct(he()),ct(pe()),ct(ge()),fe(),o.config.trackPageViews&&Y(X("page_view",{trigger:"initial",_event_id:j()},{previous_url:null})),B("initialized",{project_id:o.meta.project_id,collectUrl:o.config.collectUrl,consent:o.config.consentAnalytics,sampledIn:o.sampledIn,includeQueryHash:o.config.includeQueryHash,plugins:o.config.plugins,scrollRoot:(()=>{let e=gt();return e===document.scrollingElement?"document.scrollingElement":e?.tagName||"unknown"})()})}_e()})();})();
