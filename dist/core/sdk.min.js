(()=>{(()=>{let vt="__pt_sdk_loaded__";if(window[vt])return;window[vt]=!0;let Ht="0.2.4",kt="_ptq",At="__pt_anonymous_id",ht="__pt_user_id",Et="__pt_session_id",Ct="__pt_session_last",$t=1800*1e3,xt=200,Vt=5e3,jt=[25,50,75,100],Lt=80,Bt=[/doubleclick\.net/i,/googlesyndication\.com/i,/adservice\.google/i,/googleadservices\.com/i,/gampad\/ads/i,/adnxs\.com/i,/criteo/i,/pubmatic\.com/i,/openx\.net/i];function gt(t){try{let n=String(t||"");return n?Bt.some(e=>e.test(n)):!1}catch{return!1}}function Wt(t){try{let n=t?.tagName?.toLowerCase()==="iframe"?t:t?.closest?.("iframe");if(!n)return!1;let e=n.getAttribute("src")||n.src||"";return gt(e)}catch{return!1}}function Ft(t){try{return!!(t?.matches?.("[data-ad-id],[data-ad-slot],[data-ad-provider]")||t?.closest?.("[data-ad-id],[data-ad-slot],[data-ad-provider]"))}catch{return!1}}function zt(t){try{return!!(t?.matches?.("[role='advertisement']")||t?.closest?.("[role='advertisement']"))}catch{return!1}}function Kt(t){return Ft(t)||zt(t)||Wt(t)}function Xt(t){try{return t?.closest?.("[data-ad-id],[data-ad-slot],[data-ad-provider]")||t?.closest?.("[role='advertisement']")||(t?.tagName?.toLowerCase()==="iframe"?t:t?.closest?.("iframe"))||null}catch{return null}}function Yt(t){try{if(!t||!t.querySelectorAll)return!1;let n=Array.from(t.querySelectorAll("iframe[src]")||[]);for(let e of n){let u=e.getAttribute("src")||e.src||"";if(gt(u))return!0}}catch{}return!1}let i={meta:{project_id:null,cdnBase:null,tagVersion:null},config:{collectUrl:null,debug:!1,consentAnalytics:!0,trackPageViews:!0,trackClicks:!0,trackScroll:!0,trackErrors:!0,sampleRate:1,useBeaconOnUnload:!0,includeQueryHash:!1,scrollContainerSelector:null,plugins:{cards:!0,search:!1,ads:!1,checkout:!1},cards:{threshold:.5,minVisibleMs:300,scopeSelector:"main",cardSelector:"article,[data-article-id],[data-content-id],[data-product-id],[data-item-id],[data-sku],.product,.product-card,.item,.card,[data-testid*='card']",adExcludeSelector:"[data-ad-id],[data-ad-slot],[data-ad-provider],[role='advertisement']",minW:120,minH:80},search:{minEmitMs:350,maxWaitMs:4500,quietDebounceMs:220,recheckIntervalMs:300,firstFallbackMs:1600,searchContextWindowMs:600*1e3,captureRequestWindowMs:2500,scopeSelector:"main",resultItemSelector:"article,[data-article-id],[data-content-id],[data-result],.search-result,.result,[data-testid*='result'],.product,.product-card,.item,.card,[data-product-id],[data-sku],[data-item-id]",adExcludeSelector:"[data-ad-id],[data-ad-slot],[data-ad-provider],[role='advertisement']"},ads:{threshold:.5,minVisibleMs:300,minViewableMs:1e3,rescanIntervalMs:2e3,rescanTicks:15,containerSelector:"[data-ad-id],[data-ad-slot],[data-ad-provider],[role='advertisement'],iframe",dataSelector:"[data-ad-id],[data-ad-slot],[data-ad-provider]",dedupeWindowMs:5e3}},sampleSeed:null,sampledIn:!0,userId:null,entryReferrer:null,currentUrl:null,previousUrl:null,webVitals:{},__pt_scrollRootEl:null,__pt_scrollBound:!1,__pt_force_rescan_ts:0};function nt(){return Date.now()}function W(){return typeof crypto<"u"&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,t=>{let n=Math.random()*16|0;return(t==="x"?n:n&3|8).toString(16)})}function st(t){return t==null||(t=String(t),t=t.replace(/\s+/g," ").trim(),!t)?null:(t.length>Lt&&(t=t.slice(0,Lt)+"\u2026"),t=t.replace(/[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}/gi,"[redacted_email]"),t=t.replace(/\+?\d[\d\s\-()]{7,}\d/g,"[redacted_phone]"),t)}function qt(t){try{return localStorage.getItem(t)}catch{return null}}function Tt(t,n){try{localStorage.setItem(t,n)}catch{}}function Qt(t){try{localStorage.removeItem(t)}catch{}}function It(t){try{return sessionStorage.getItem(t)}catch{return null}}function Mt(t,n){try{sessionStorage.setItem(t,n)}catch{}}function Gt(){let t=qt(At);return t||(t=W(),Tt(At,t)),t}function Zt(){try{let t=nt(),n=Number(It(Ct)||0),e=It(Et);return(!e||!n||t-n>$t)&&(e=W(),Mt(Et,e)),Mt(Ct,String(t)),e}catch{return W()}}function Rt(){if(i.userId)return i.userId;let t=qt(ht);return i.userId=t?String(t):null,i.userId}function Jt(t){if(t==null||t===""){i.userId=null,Qt(ht);return}i.userId=String(t),Tt(ht,i.userId)}function pt(){if(i.config.includeQueryHash)return window.location.href;let t=new URL(window.location.href);return t.search="",t.hash="",t.toString()}function te(t){let n=String(t||"");return/ipad|tablet|silk/i.test(n)?"tablet":/mobi|android|iphone|ipod/i.test(n)?"mobile":"desktop"}function ee(t){let n=String(t||"");return/windows nt/i.test(n)?"Windows":/mac os x/i.test(n)&&!/iphone|ipad|ipod/i.test(n)?"macOS":/android/i.test(n)?"Android":/iphone|ipad|ipod/i.test(n)?"iOS":/linux/i.test(n)?"Linux":"Other"}function ne(t){let n=String(t||"");return/edg\//i.test(n)?"Edge":/chrome\//i.test(n)&&!/edg\//i.test(n)?"Chrome":/safari\//i.test(n)&&!/chrome\//i.test(n)?"Safari":/firefox\//i.test(n)?"Firefox":"Other"}function re(){let t=navigator.userAgent;return{ua:t,language:navigator.language,timezone:Intl.DateTimeFormat().resolvedOptions().timeZone,device_type:te(t),os:ee(t),browser:ne(t),screen:{w:window.screen.width,h:window.screen.height,dpr:window.devicePixelRatio||1},viewport:{w:window.innerWidth,h:window.innerHeight},ip:null,sdk_version:Ht,tag_version:i.meta.tagVersion||null}}function Z(t,n={},e={}){let u=pt(),g=e.previous_url!==void 0?e.previous_url:i.previousUrl||null,a=typeof e.event_ts=="number"?e.event_ts:nt();return{project_id:i.meta.project_id,event_name:t,event_ts:a,anonymous_id:Gt(),session_id:Zt(),user_id:Rt(),page_url:u,page_path:window.location.pathname,page_title:document.title,referrer:i.entryReferrer||document.referrer||"direct",previous_url:g,context:re(),properties:n,web_vitals:i.webVitals||{}}}let rt=[],_t=null;function F(...t){i.config.debug&&console.log("[pt-sdk]",...t)}function Pt(){return i.sampledIn&&i.config.consentAnalytics!==!1&&!!i.meta.project_id&&!!i.config.collectUrl}function J(t){if(Pt()){if(i.config.debug)try{console.log("%cPT_EVT","font-weight:bold;color:#00b894",t.event_name,t)}catch{}rt.push(t),rt.length>=20?ct({reason:"size"}):oe()}}function oe(){_t||(_t=setTimeout(()=>{_t=null,ct({reason:"timer"})},Vt))}function ie(t,{useBeacon:n=!1}={}){if(window.__pt_debug_events=window.__pt_debug_events||[],window.__pt_debug_events.push(t),n&&navigator.sendBeacon)try{let e=new Blob([JSON.stringify(t)],{type:"application/json"}),u=navigator.sendBeacon(i.config.collectUrl,e);F("beacon sent:",u,t);return}catch(e){F("beacon failed, fallback to fetch",e)}fetch(i.config.collectUrl,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t),keepalive:!0}).then(async e=>{if(e.ok)F("collect ok:",e.status,"events:",t.events?.length);else{let u=await e.text().catch(()=>"");F("collect non-2xx:",e.status,u)}}).catch(e=>F("collect failed:",e))}function ct({reason:t}={}){if(!rt.length||!Pt())return;let n=rt.splice(0,rt.length),e=[];for(let g=0;g<n.length;g+=xt)e.push(n.slice(g,g+xt));let u=i.config.useBeaconOnUnload&&(t==="pagehide"||t==="hidden");e.forEach(g=>{let a={project_id:i.meta.project_id,sent_at:nt(),events:g};ie(a,{useBeacon:u})})}function se(t){if(!t||!t.tagName)return null;let n=[],e=t;for(let u=0;u<4&&e&&e.tagName;u++){let g=e.tagName.toLowerCase();if(e.id){g+=`#${e.id}`,n.unshift(g);break}e.classList&&e.classList.length&&(g+="."+Array.from(e.classList).slice(0,2).join(".")),n.unshift(g),e=e.parentElement}return n.join(">")}function yt(t){let n=t?.closest?.("a,button,input,textarea,select,[role='button'],[role='link'],[data-elt]")||(t?.nodeType===1?t:t?.parentElement);if(!n)return null;let e=n.closest?.("[data-elt]")||n,u=e.getAttribute?.("data-elt")||e.getAttribute?.("data-testid")||e.getAttribute?.("aria-label")||e.getAttribute?.("id")||se(e);return st(String(u||""))||String(u||"")||null}function ce(t){if(!i.config.trackClicks)return;let n=t.target&&t.target.nodeType===1?t.target:t.target?.parentElement,e=yt(n),u=n?.closest?.("a,button,input,textarea,select,[role='button'],[role='link'],[data-elt]")||n;J(Z("click",{_event_id:W(),element_id:e,element_type:u?.tagName?u.tagName.toLowerCase():null,element_role:u?.getAttribute?.("role")||u?.getAttribute?.("data-role")||null,x:t.clientX,y:t.clientY,button:t.button}))}let bt=new Set;function ae(t){try{return(getComputedStyle(t).overflowY||"").toLowerCase()}catch{return""}}function Nt(t){try{if(!t||t===document.body||t===document.documentElement)return!1;let n=ae(t);if(!(n==="auto"||n==="scroll"))return!1;let e=t.clientHeight||0,u=t.scrollHeight||0;return e<200?!1:u-e>80}catch{return!1}}function St(){try{let n=i.config.scrollContainerSelector;if(n){let e=document.querySelector(n);if(e)return e}}catch{}let t=document.scrollingElement||document.documentElement;try{if(t&&t.scrollHeight-t.clientHeight>80)return t}catch{}try{let n=["#__next","#root","[role='main']","main",".layout",".app",".container"];for(let e of n){let u=document.querySelector(e);if(u&&Nt(u))return u}}catch{}try{let n=[],e=Array.from(document.body?.children||[]);for(let a of e)n.push(a);for(let a of e){let l=Array.from(a.children||[]).slice(0,12);for(let d of l)n.push(d)}let u=null,g=0;for(let a of n){if(!Nt(a))continue;let l=(a.scrollHeight||0)-(a.clientHeight||0);l>g&&(g=l,u=a)}if(u)return u}catch{}return t||document.documentElement}function wt(){return i.__pt_scrollRootEl||(i.__pt_scrollRootEl=St()),i.__pt_scrollRootEl}function ue(){let t=wt(),n=t===document.documentElement||t===document.body||t===document.scrollingElement,e=0,u=0,g=1;n?(e=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0,u=document.documentElement.scrollHeight||document.body.scrollHeight||0,g=window.innerHeight||document.documentElement.clientHeight||1):(e=t.scrollTop||0,u=t.scrollHeight||0,g=t.clientHeight||1);let a=Math.max(1,u-g),l=e/a*100;return Math.max(0,Math.min(100,l))}function at(){if(!i.config.trackScroll)return;let t=ue(),n=Math.floor(t+.5);for(let e of jt)n>=e&&!bt.has(e)&&(bt.add(e),J(Z("scroll",{_event_id:W(),scroll_depth:e})))}function le(){if(!i.__pt_scrollBound){i.__pt_scrollBound=!0,window.addEventListener("scroll",at,{passive:!0,capture:!0});try{let t=wt();!(t===document.documentElement||t===document.body||t===document.scrollingElement)&&t&&t.addEventListener&&t.addEventListener("scroll",at,{passive:!0,capture:!0})}catch{}}}function ut(){try{let t=i.__pt_scrollRootEl,n=St();i.__pt_scrollRootEl=n;let e=t===document.documentElement||t===document.body||t===document.scrollingElement,u=n===document.documentElement||n===document.body||n===document.scrollingElement;t&&!e&&t.removeEventListener&&t.removeEventListener("scroll",at,{capture:!0}),n&&!u&&n.addEventListener&&n.addEventListener("scroll",at,{passive:!0,capture:!0})}catch{}}function de(){try{let t=performance.getEntriesByType("navigation")[0];if(t&&t.responseStart&&(i.webVitals.ttfb=Math.round(t.responseStart)),window.PerformanceObserver){new PerformanceObserver(l=>{l.getEntries().forEach(d=>{d.name==="first-contentful-paint"&&(i.webVitals.fcp=Math.round(d.startTime))})}).observe({type:"paint",buffered:!0}),new PerformanceObserver(l=>{let d=l.getEntries(),T=d[d.length-1];T&&(i.webVitals.lcp=Math.round(T.startTime))}).observe({type:"largest-contentful-paint",buffered:!0});let u=0;new PerformanceObserver(l=>{l.getEntries().forEach(d=>{d.hadRecentInput||(u+=d.value)}),i.webVitals.cls=Number(u.toFixed(4))}).observe({type:"layout-shift",buffered:!0}),new PerformanceObserver(l=>{let d=l.getEntries()[0];d&&(i.webVitals.fid=Math.round(d.processingStart-d.startTime))}).observe({type:"first-input",buffered:!0}),fe()}}catch{}}function fe(){try{let l=function(P,$){if(!P.length)return 0;let N=P.slice().sort((D,M)=>D-M),O=Math.min(N.length-1,Math.max(0,Math.ceil($*N.length)-1));return N[O]||0},T=function(){d||(d=setTimeout(()=>{d=null;let P=l(e,.98),$=l(e,.95);i.webVitals.inp=P||0,i.webVitals.inp_p95=$||0,i.webVitals.inp_worst=a||0},400))},C=function(){let P=Date.now();for(let[$,N]of n.entries())P-N.lastSeen>=g&&(e.push(N.maxDur),e.length>u&&e.splice(0,e.length-u),n.delete($),T())};if(!window.PerformanceObserver||i.__inpObserverStarted)return;i.__inpObserverStarted=!0;let t=new Set(["pointermove","mousemove","scroll","wheel","touchmove"]),n=new Map,e=[],u=2e3,g=2e3,a=0,d=null;i.__inpCleanupInterval=setInterval(C,1e3);let I=new PerformanceObserver(P=>{let $=Date.now();for(let N of P.getEntries()){if(!N||!N.interactionId||t.has(N.name))continue;let O=Math.round(N.duration||0);if(O<=0)continue;let D=N.interactionId,M=n.get(D);M?(O>M.maxDur&&(M.maxDur=O),M.lastSeen=$,n.set(D,M)):n.set(D,{maxDur:O,lastSeen:$}),O>a&&(a=O)}C()});try{I.observe({type:"event",buffered:!0,durationThreshold:40})}catch{I.observe({type:"event",buffered:!0})}}catch{}}function Ot(){(i.sampleSeed===null||i.sampleSeed===void 0)&&(i.sampleSeed=Math.random());let t=typeof i.config.sampleRate=="number"?i.config.sampleRate:1,n=Math.max(0,Math.min(1,t));i.sampledIn=i.sampleSeed<n}function me(){if(!i.config.trackErrors)return;let t=new Set,n=a=>{try{let l=JSON.stringify(a);return l.length>800?l.slice(0,800):l}catch{return String(a)}},e=a=>{try{if(a==null)return null;let l=String(a).trim();return l?(l.length>500&&(l=l.slice(0,500)+"\u2026"),l):null}catch{return null}},u=(a,l)=>{try{let d=a||l?.fileName||l?.sourceURL||l?.scriptURL||null;if(d)return d;let T=String(l?.stack||"");if(!T)return null;let C=T.match(/(https?:\/\/[^\s)]+|file:\/\/[^\s)]+)/i);if(C&&C[1])return C[1];let I=T.match(/(\b\/[^ \s)]+):\d+:\d+/);return I&&I[1]?I[1]:null}catch{return null}},g=a=>{let l=n(a);t.has(l)||(t.add(l),J(Z("error",{_event_id:W(),...a})))};window.addEventListener("error",a=>{try{if(!a.message&&(a.target||a.srcElement)){let C=a.target||a.srcElement,I=C?.currentSrc||C?.src||C?.href||C?.getAttribute?.("src")||C?.getAttribute?.("href")||null,P=e(I);g({error_type:"resource",message:"resource_load_error",source_url:P,resource_url:P,resource_tag:(C?.tagName||"").toLowerCase()||null,element_id:yt(C)||null,is_fatal:!1});return}let d=st(a?.message)||"js_error",T=e(u(a?.filename,a?.error))||e(a?.filename)||null;g({error_type:"js",message:d,filename:a?.filename||null,lineno:a?.lineno||null,colno:a?.colno||null,source_url:T,is_fatal:!1})}catch{g({error_type:"js",message:"js_error",source_url:null,is_fatal:!1})}},!0),window.addEventListener("unhandledrejection",a=>{try{let l=a?.reason?.message||String(a?.reason||""),d=st(l)||"unhandled_promise",T=e(u(null,a?.reason))||null;g({error_type:"unhandledrejection",message:d,source_url:T,is_fatal:!1})}catch{g({error_type:"unhandledrejection",message:"unhandled_promise",source_url:null,is_fatal:!1})}})}let lt=[];function he(t){lt.forEach(n=>{try{n.onPageContextChange?.(t)}catch(e){F("plugin onPageContextChange failed",e)}})}function dt(t){let n=pt();n!==i.currentUrl&&(i.previousUrl=i.currentUrl,i.currentUrl=n,bt.clear(),ut(),i.__pt_force_rescan_ts=nt(),he(t),i.config.trackPageViews&&J(Z("page_view",{trigger:t,_event_id:W()},{previous_url:i.previousUrl})))}function ge(){if(window.__pt_spa_patched)return;window.__pt_spa_patched=!0;let t=history.pushState,n=history.replaceState;history.pushState=function(){let e=t.apply(this,arguments);return setTimeout(()=>dt("pushState"),0),e},history.replaceState=function(){let e=n.apply(this,arguments);return setTimeout(()=>dt("replaceState"),0),e},window.addEventListener("popstate",()=>dt("popstate")),window.addEventListener("hashchange",()=>dt("hashchange"))}function ft(t){t&&typeof t.init=="function"&&lt.push(t)}function pe(){let t={state:i,enqueue:J,buildEvent:Z,uuid:W,sanitizeText:st,getElementId:yt,dbg:F,now:nt,isAdElementStrong:Kt,findAdContainer:Xt,elementHasAdIframes:Yt,iframeSrcLooksLikeAd:gt};lt.forEach(n=>{try{n.init(t)}catch(e){F("plugin init failed",e)}})}function Ut(){lt.forEach(t=>{try{t.onConfigChange?.(i.config)}catch(n){F("plugin onConfigChange failed",n)}})}function _e(){let t=null,n=null,e=null,u=null,g=null,a=0,l=new Set,d=new WeakSet,T=new WeakSet,C=new WeakMap;function I(){return t?.state?.config?.plugins?.cards!==!1}function P(p){try{if(!p||p.hidden)return!1;let x=window.getComputedStyle?getComputedStyle(p):null;if(x&&(x.display==="none"||x.visibility==="hidden"||x.opacity==="0")||p.getClientRects&&p.getClientRects().length===0)return!1;let E=p.getBoundingClientRect?.();return E?E.width>0&&E.height>0:!1}catch{return!0}}function $(p,x,E){try{let f=p.getBoundingClientRect?.();return f?f.width>=x&&f.height>=E:!1}catch{return!1}}function N(p,x){try{if(!p)return!1;if(t.isAdElementStrong(p)||t.elementHasAdIframes(p)||x&&(p?.matches?.(x)||p?.closest?.(x)))return!0;let E=String(p.className||"").toLowerCase(),f=String(p.id||"").toLowerCase(),S=String(p.getAttribute?.("data-testid")||"").toLowerCase(),b=String(p.getAttribute?.("data-elt")||"").toLowerCase(),_=String(p.getAttribute?.("aria-label")||"").toLowerCase(),o=`${E} ${f} ${S} ${b} ${_}`;return!!/\b(ad|ads|advert|advertisement|sponsor|sponsored|promoted|promo)\b/i.test(o)}catch{return!1}}function O(p){try{if(!p||p.nodeType!==1||p.closest("header,nav,footer"))return!1;let x=p.getBoundingClientRect?.();if(!x||x.width<160||x.height<100)return!1;let E=!!p.querySelector("a[href]");if(!E)return!1;let f=!!p.querySelector("img,picture,video"),S=!!p.querySelector("h1,h2,h3"),b=(p.innerText||"").trim(),_=b.length>=30,o=/\$\s?\d+|‚Ç¨\s?\d+|¬£\s?\d+|\b\d+\s?(usd|eur|gbp)\b/i.test(b);return f&&(S||_)||S&&_||o&&E}catch{return!1}}function D(){if(!I())return;let p=t.state.config.cards||{},x=document.querySelector(p.scopeSelector||"main")||document.body||document.documentElement,E=p.cardSelector||"article",f=p.adExcludeSelector||null,S=p.minW??120,b=p.minH??80,_=0;try{x.querySelectorAll(E).forEach(o=>{if(!(l.size>1200)&&P(o)&&$(o,S,b)&&!N(o,f)&&(l.add(o),_++,u&&!T.has(o)))try{u.observe(o),T.add(o)}catch{}})}catch{}if(_<5&&l.size<20)try{let o=x.querySelectorAll("article,li,section,div"),m=0;for(let v of o){if(m++,m>1800||l.size>1200)break;if(P(v)&&$(v,S,b)&&!N(v,f)&&O(v)&&(l.add(v),u&&!T.has(v)))try{u.observe(v),T.add(v)}catch{}}}catch{}}function M(p){try{if(!n||!p||d.has(p))return;d.add(p),n.observe(p)}catch{}}function j(){if(!I()||n)return;let p=t.state.config.cards||{},x=p.threshold??.5;n=new IntersectionObserver(E=>{for(let f of E){let S=f.target;if(!S)continue;let b=p.adExcludeSelector||null;if(N(S,b))continue;let _=f.isIntersecting&&(f.intersectionRatio||0)>=x,o=C.get(S);o||(o={timer:null,sent:!1,impression_id:null,lastRatio:0},C.set(S,o)),o.lastRatio=f.intersectionRatio||0,_&&!o.sent&&!o.timer&&(o.impression_id=o.impression_id||t.uuid(),o.timer=setTimeout(()=>{o.sent=!0,o.timer=null,t.enqueue(t.buildEvent("card_impression",{_event_id:t.uuid(),element_id:t.getElementId(S),impression_id:o.impression_id,viewport_percent:Math.round((o.lastRatio||0)*100)}))},p.minVisibleMs??300)),!_&&o.timer&&(clearTimeout(o.timer),o.timer=null),C.set(S,o)}},{threshold:[x]});try{u=new ResizeObserver(E=>{for(let f of E){let S=f.target;S&&(l.add(S),M(S))}})}catch{u=null}D(),l.forEach(E=>M(E)),e=new MutationObserver(()=>{D(),l.forEach(E=>M(E))});try{e.observe(document.documentElement,{childList:!0,subtree:!0,attributes:!0})}catch{}a=0,g=setInterval(()=>{a++,D(),l.forEach(E=>M(E)),a>=12&&(clearInterval(g),g=null)},1200)}function B(){try{e&&e.disconnect()}catch{}e=null;try{n&&n.disconnect()}catch{}n=null;try{u&&u.disconnect()}catch{}u=null,g&&(clearInterval(g),g=null),l.clear()}function z(){try{D(),l.forEach(p=>M(p))}catch{}g||(a=0,g=setInterval(()=>{a++,D(),l.forEach(p=>M(p)),a>=8&&(clearInterval(g),g=null)},1100))}return{init(p){t=p,I()&&j()},onConfigChange(){I()?j():B()},onPageContextChange(){I()&&z()}}}function ye(){let t=null,n=null,e=null,u=null,g=null,a={query:null,results_count:null,search_latency_ms:null,ts:0};function l(){return!!t?.state?.config?.plugins?.search}function d(r){try{return String(r||"").toLowerCase()}catch{return""}}function T(r){try{if(!r||r.nodeType!==1)return!1;let c=d(r.getAttribute?.("name")||""),s=d(r.getAttribute?.("id")||r.id||""),h=d(r.getAttribute?.("role")||""),y=d(r.getAttribute?.("type")||""),w=d(r.getAttribute?.("aria-label")||""),A=d(r.getAttribute?.("placeholder")||""),U=d(r.getAttribute?.("title")||""),V=d(r.getAttribute?.("data-testid")||""),H=d(r.getAttribute?.("data-elt")||""),q=d(r.className||""),Y=d(r.getAttribute?.("autocomplete")||""),et=d(r.getAttribute?.("enterkeyhint")||""),mt=d(r.getAttribute?.("inputmode")||"");if(h==="searchbox"||y==="search"||et==="search"||mt==="search"||c==="q"||c==="query"||c==="search"||c==="keyword"||c==="term"||s==="q"||s==="query"||s==="search"||s==="keyword"||s==="term")return!0;let it=`${c} ${s} ${h} ${w} ${A} ${U} ${V} ${H} ${q} ${Y} ${et} ${mt}`;if(/(^|\b)(search|query|keyword|find|lookup)\b/.test(it))return!0;let K=r.closest?.("form");if(K){let ve=`${d(K.getAttribute?.("role")||"")} ${d(K.getAttribute?.("action")||"")} ${d(K.id||"")} ${d(K.className||"")} ${d(K.getAttribute?.("aria-label")||"")}`;if(/search/.test(ve))return!0}return!!r.closest?.("[role='search'],[data-search],.search,.Search")}catch{return!1}}function C(r){try{if(!r||r.nodeType!==1)return!1;let c=d(r.tagName||""),s=c==="input"||c==="textarea",h=!s&&!!r.isContentEditable;if(!s&&!h)return!1;if(c==="input"){let y=d(r.getAttribute?.("type")||"");if(y&&new Set(["password","hidden","checkbox","radio","button","submit","reset","file","color","date","datetime-local","month","week","time","number","range"]).has(y)&&!T(r))return!1}return T(r)}catch{return!1}}function I(r){try{let c=r?.value!==void 0?r.value:r?.innerText||"";return t.sanitizeText(c)||""}catch{return""}}function P(r){try{let c=r?.closest?.("form")||null;if(c){let h=Array.from(c.querySelectorAll("input,textarea,[contenteditable='true']")).find(C);if(h)return h}let s=r?.closest?.("[role='search'],[data-search],.search,.Search")||null;if(s){let h=Array.from(s.querySelectorAll("input,textarea,[contenteditable='true']")).find(C);if(h)return h}return Array.from(document.querySelectorAll("input,textarea,[contenteditable='true']")).find(C)||null}catch{return null}}function $(r){try{if(!r)return!1;let c=d(r.tagName||"");if(!["button","a","div","span","input"].includes(c))return!1;let s=d(r.getAttribute?.("type")||"");if(c==="input"&&(s==="submit"||s==="button")){let q=r.closest?.("form");if(q&&Array.from(q.querySelectorAll("input,textarea,[contenteditable='true']")).find(C))return!0}if(c==="button"&&s==="submit"){let q=r.closest?.("form");if(q&&Array.from(q.querySelectorAll("input,textarea,[contenteditable='true']")).find(C))return!0}let h=d(r.getAttribute?.("role")||""),y=d(r.getAttribute?.("aria-label")||""),w=d(r.getAttribute?.("title")||""),A=d(r.getAttribute?.("data-elt")||r.getAttribute?.("data-testid")||""),U=d(r.innerText||""),V=`${y} ${w} ${A} ${U}`.trim(),H=/search|find|go|submit|lookup|magnifier|üîç/.test(V);return c==="button"&&(s==="submit"||s==="button")||c==="input"&&(s==="submit"||s==="button")||h==="button"||h==="link"||c==="a"?H:!1}catch{return!1}}function N(){let r=t?.state?.config?.search?.searchContextWindowMs??6e5;return!a?.query||!a?.ts?!1:t.now()-a.ts<=r}function O(r){try{if(!r||r.hidden)return!1;let c=window.getComputedStyle?getComputedStyle(r):null;if(c&&(c.display==="none"||c.visibility==="hidden"||c.opacity==="0")||r.getClientRects&&r.getClientRects().length===0)return!1;let s=r.getBoundingClientRect?.();return s?s.width>0&&s.height>0:!1}catch{return!0}}function D(r,c,s){try{let h=r.getBoundingClientRect?.();return h?h.width>=c&&h.height>=s:!1}catch{return!1}}function M(r){try{if(!r||t.isAdElementStrong(r))return!1;let c=d(r.tagName||""),s=d(r.className||""),h=d(r.getAttribute?.("data-testid")||""),y=d(r.getAttribute?.("data-elt")||""),w=!!r.getAttribute?.("data-article-id")||!!r.getAttribute?.("data-content-id")||!!r.getAttribute?.("data-product-id")||!!r.getAttribute?.("data-item-id")||!!r.getAttribute?.("data-sku")||!!r.querySelector?.("[data-article-id],[data-content-id],[data-product-id],[data-item-id],[data-sku]"),A=/(card|story|post|tile|teaser|item|result|entry|headline|featured|product)/i.test(s),U=/(card|story|tile|teaser|result|featured|hero|product)/i.test(h)||/(card|story|tile|teaser|featured|hero|product)/i.test(y),V=!!r.querySelector?.("img,picture,video"),H=!!r.querySelector?.("h1,h2,h3"),q=!!r.querySelector?.("a[href]")||c==="a",Y=(r.innerText||"").slice(0,500),et=/\$\s?\d+|‚Ç¨\s?\d+|¬£\s?\d+|\b\d+\s?(usd|eur|gbp)\b/i.test(Y);return!!(c==="article"||w||(A||U)&&(V||H||et)&&q)}catch{return!1}}function j(r){try{if(!r)return null;let c=r.closest?.("article,[data-article-id],[data-content-id],[data-product-id],[data-item-id],[data-sku],[data-elt],[data-testid]")||r;if(c&&M(c)&&D(c,120,80))return c;let s=r;for(let h=0;h<6&&s;h++){if(s.nodeType!==1){s=s.parentElement;continue}if(M(s)&&D(s,120,80))return s;s=s.parentElement}}catch{}return null}function B(r){try{if(!r)return!1;if(t.isAdElementStrong(r)||r.querySelector?.("[data-ad-id],[data-ad-slot],[data-ad-provider],[role='advertisement']")||t.elementHasAdIframes(r))return!0;let c=d(r.className||""),s=d(r.id||""),h=d(r.getAttribute?.("data-testid")||""),y=d(r.getAttribute?.("data-elt")||""),w=d(r.getAttribute?.("aria-label")||""),A=`${c} ${s} ${h} ${y} ${w}`;return!!/\b(ad|ads|advert|advertisement|sponsor|sponsored|promoted|promo)\b/i.test(A)}catch{return!1}}function z(r){try{return r&&(r.getAttribute?.("data-article-id")||r.getAttribute?.("data-content-id")||r.getAttribute?.("data-product-id")||r.getAttribute?.("data-item-id")||r.getAttribute?.("data-sku")||r.querySelector?.("[data-article-id]")?.getAttribute?.("data-article-id")||r.querySelector?.("[data-content-id]")?.getAttribute?.("data-content-id")||r.querySelector?.("[data-product-id]")?.getAttribute?.("data-product-id")||r.querySelector?.("[data-item-id]")?.getAttribute?.("data-item-id")||r.querySelector?.("[data-sku]")?.getAttribute?.("data-sku"))||null}catch{return null}}function p(){let r=t.state.config.search||{};return document.querySelector(r.scopeSelector||"main")||document.body||document.documentElement}function x(){let r=p(),s=Array.from(r.querySelectorAll("article,[data-article-id],[data-content-id],[data-product-id],[data-item-id],[data-sku],[data-elt],[data-testid],a[href]")),h=new Set;for(let w of s){if(!O(w)||w.closest?.("header, nav, footer"))continue;let A=j(w);A&&(A.closest?.("header, nav, footer")||O(A)&&D(A,120,80)&&M(A)&&(B(A)||h.add(A)))}let y=Array.from(h);try{let w=new Set([r,document.body,document.documentElement]),A=new Map;for(let H of y){let q=H.parentElement;for(let Y=0;Y<4&&q&&!w.has(q);Y++)A.set(q,(A.get(q)||0)+1),q=q.parentElement}let U=null,V=0;for(let[H,q]of A.entries())!H||w.has(H)||q>V&&(U=H,V=q);U&&V>=2&&(y=y.filter(H=>U.contains(H)))}catch{}try{y=y.slice().sort((w,A)=>w===A?0:w.compareDocumentPosition(A)&Node.DOCUMENT_POSITION_FOLLOWING?-1:1)}catch{}return{scope:r,cards:y}}function E(r){try{let c=[];for(let s=0;s<r.length&&s<20;s++){let h=r[s],y=z(h)||"",A=(h.querySelector?.("a[href]")||h.closest?.("a[href]"))?.getAttribute?.("href")||"";c.push(String(y||A||t.getElementId(h)||"").slice(0,120))}return c.join("|")}catch{return""}}function f(r){try{let s=(r||document.body||document.documentElement).querySelectorAll("[data-testid*='no-result'],[data-testid*='no_results'],[class*='no-result'],[id*='no-result'],[role='status'],[role='alert']");for(let h of s){let y=(h.innerText||"").toLowerCase().trim();if(y&&(y.includes("no results")||y.includes("0 results")||y.includes("nothing found")||y.includes("\u0644\u0645 \u064A\u062A\u0645 \u0627\u0644\u0639\u062B\u0648\u0631")||y.includes("\u0644\u0627 \u062A\u0648\u062C\u062F \u0646\u062A\u0627\u0626\u062C")||y.includes("\u0645\u0627 \u0641\u064A \u0646\u062A\u0627\u0626\u062C")||y.includes("\u0644\u0627 \u064A\u0648\u062C\u062F \u0646\u062A\u0627\u0626\u062C")))return!0}}catch{}return!1}function S(){if(e){try{e.disconnect()}catch{}e=null}u&&(clearTimeout(u),u=null),g&&(clearTimeout(g),g=null)}function b(){n=null,S()}function _(){if(e)return;let r=t.state.config.search||{},c=document.querySelector(r.scopeSelector||"main")||document.body||document.documentElement;e=new MutationObserver(()=>{n&&(u&&clearTimeout(u),u=setTimeout(()=>{o(!1)},r.quietDebounceMs??220))});try{e.observe(c,{childList:!0,subtree:!0,attributes:!0})}catch{}}function o(r){if(!n)return!1;let c=t.state.config.search||{},s=Math.max(0,t.now()-n.startTs),{scope:h,cards:y}=x(),w=y.length,A=E(y),U=f(h),V=c.minEmitMs??350,H=c.maxWaitMs??4500,q=!0;try{let it=typeof n.baselineCount=="number"?n.baselineCount:null,K=n.baselineSig||"";q=!1,(it!==null&&w!==it||K&&A&&A!==K||!K&&it===null||n.reqDone&&(w>0||U))&&(q=!0)}catch{q=!0}if(!(r||s>=H||(w>0||U)&&s>=V&&q))return!1;let et=U?0:Math.max(0,w||0),mt=Math.round(s);return a={query:n.query||"",results_count:et,search_latency_ms:mt,ts:t.now()},t.enqueue(t.buildEvent("search",{_event_id:t.uuid(),element_id:n.elementId||"search_input",query:a.query,results_count:a.results_count,search_latency_ms:a.search_latency_ms,network_latency_ms:typeof n.reqLatencyMs=="number"?Math.round(n.reqLatencyMs):null,latency_source:"render"})),b(),!0}function m(){let r=t.state.config.search||{};if(!n||o(!1))return;let c=Math.max(0,t.now()-n.startTs),s=r.maxWaitMs??4500;if(c>=s){o(!0);return}g=setTimeout(m,r.recheckIntervalMs??300)}function v(r){if(!l())return;let c=I(r);if(!c)return;let s=(()=>{try{let{cards:y}=x();return{sig:E(y),count:y.length}}catch{return{sig:"",count:0}}})();n={token:t.uuid(),startTs:t.now(),elementId:t.getElementId(r)||"search_input",query:c,baselineSig:s.sig,baselineCount:s.count,reqCaptured:!1,reqDone:!1,reqLatencyMs:null,lastNavUrl:t.state.currentUrl||null},S(),_();let h=t.state.config.search||{};g=setTimeout(m,h.firstFallbackMs??1600)}function L(r){try{return String(r||"")}catch{return""}}function k(r,c){let s=L(r).toLowerCase();if(!s)return!1;if(s.includes("/search")||s.includes("search=")||s.includes("q=")||s.includes("query=")||s.includes("term="))return!0;if((s.includes("autocomplete")||s.includes("suggest"))&&!s.includes("/search")&&!s.includes("search=")&&!s.includes("q=")&&!s.includes("query="))return!1;if(c)try{let h=encodeURIComponent(String(c).toLowerCase());if(h&&(s.includes(h)||s.includes(String(c).toLowerCase())))return!0}catch{}return!1}function R(r){if(!n)return!1;let s=(t.state.config.search||{}).captureRequestWindowMs??2500,h=t.now()-n.startTs;return h<0||h>s?!1:k(r,n.query)}function X(r){n&&(n.reqDone=!0,n.reqLatencyMs=Math.max(0,r),setTimeout(()=>o(!1),150))}function Q(){if(window.__pt_search_fetch_patched)return;window.__pt_search_fetch_patched=!0;let r=window.fetch;typeof r=="function"&&(window.fetch=async function(...c){let s=performance.now(),h=c[0],y=typeof h=="string"?h:h?.url,w=l()&&n&&!n.reqCaptured&&R(y);w&&(n.reqCaptured=!0);let A;try{return A=await r.apply(this,c),A}finally{if(w){let U=performance.now();X(U-s)}}})}function tt(){if(window.__pt_search_xhr_patched)return;window.__pt_search_xhr_patched=!0;let r=window.XMLHttpRequest;if(!r||!r.prototype)return;let c=r.prototype.open,s=r.prototype.send;r.prototype.open=function(h,y){return this.__pt_url=y,c.apply(this,arguments)},r.prototype.send=function(){let h=performance.now(),y=this.__pt_url,w=l()&&n&&!n.reqCaptured&&R(y);w&&(n.reqCaptured=!0);let A=()=>{if(w){let U=performance.now();X(U-h)}};return this.addEventListener("load",A),this.addEventListener("error",A),this.addEventListener("abort",A),s.apply(this,arguments)}}function G(r){if(!l()||!N()||!a?.query||typeof a.results_count!="number"||a.results_count<=0)return;let c=r.target&&r.target.nodeType===1?r.target:r.target?.parentElement;if(!c||t.isAdElementStrong(c)||t.isAdElementStrong(t.findAdContainer(c)))return;let{cards:s}=x();if(!s.length)return;let y=(t.state.config.search||{}).resultItemSelector||"article,.result,.search-result,.product,.card,.item",w=c.closest?.("a,button,input,[role='link'],[role='button']")||c;if(!w)return;let A=j(w)||w.closest?.(y);if(!A||B(A))return;let U=s.indexOf(A),V=U>=0?U+1:null,H=z(A)||w.getAttribute?.("data-article-id")||w.getAttribute?.("data-content-id")||w.getAttribute?.("data-product-id")||w.getAttribute?.("data-item-id")||w.getAttribute?.("data-sku")||w.getAttribute?.("href")||A.querySelector?.("a[href]")?.getAttribute?.("href")||null;t.enqueue(t.buildEvent("search_result_click",{_event_id:t.uuid(),element_id:t.getElementId(w),query:a.query,clicked_result_id:H,result_rank:V,results_count:a.results_count,search_latency_ms:a.search_latency_ms}))}function ot(){try{if(!n||t.now()-n.startTs>8e3)return!1;let c=t.state.currentUrl||window.location.href;if(k(c,n.query))return!0;let s=new URL(c,window.location.origin);return!!(s.searchParams.get("q")||s.searchParams.get("query")||s.searchParams.get("search")||s.searchParams.get("term")||"").toLowerCase()}catch{return!1}}return{init(r){t=r,Q(),tt(),document.addEventListener("keydown",c=>{if(!l())return;let s=c.target&&c.target.nodeType===1?c.target:c.target?.parentElement;if(s&&C(s)&&c.key==="Enter"){if(c.shiftKey)return;v(s)}},!0),document.addEventListener("submit",c=>{if(!l())return;let s=c.target;if(!s||s.nodeType!==1)return;let h=Array.from(s.querySelectorAll("input,textarea,[contenteditable='true']")).find(C);h&&v(h)},!0),document.addEventListener("click",c=>{if(!l())return;let h=(c.target&&c.target.nodeType===1?c.target:c.target?.parentElement)?.closest?.("button,a,input,[role='button'],[role='link'],div,span")||null;if(!h||!$(h))return;let y=P(h);y&&v(y)},!0),document.addEventListener("click",G,!0);try{let c=t.state.currentUrl||window.location.href,s=new URL(c,window.location.origin),h=s.searchParams.get("q")||s.searchParams.get("query")||s.searchParams.get("search")||s.searchParams.get("term");if(h&&l()){n={token:t.uuid(),startTs:t.now(),elementId:"search_url",query:t.sanitizeText(h)||String(h||""),baselineSig:"",baselineCount:0,reqCaptured:!1,reqDone:!1,reqLatencyMs:null,lastNavUrl:c},S(),_();let y=t.state.config.search||{};g=setTimeout(m,y.firstFallbackMs??1600)}}catch{}},onConfigChange(){l()||b()},onPageContextChange(){if(l()&&n&&ot()){S(),setTimeout(()=>{n&&(_(),o(!1))},0);let r=t.state.config.search||{};g&&clearTimeout(g),g=setTimeout(m,r.firstFallbackMs??1600);return}b()}}}function be(){let t=null,n=null,e=null,u=null,g=null,a=0,l=new Set,d=new WeakSet,T=new WeakSet,C=new Map,I=new Map;function P(){return!!t?.state?.config?.plugins?.ads}function $(f){return t.iframeSrcLooksLikeAd(f?.getAttribute?.("src")||f?.src||"")||t.isAdElementStrong(f)}function N(f){let b=(t.state.config.ads||{}).dataSelector||"[data-ad-id],[data-ad-slot],[data-ad-provider]";try{return f?.closest?.(b)||f?.closest?.("[role='advertisement']")||(f?.tagName?.toLowerCase()==="iframe"?f:f?.closest?.("iframe"))||null}catch{return null}}function O(f){try{if(!f)return!1;let b=(t.state.config.ads||{}).dataSelector||"[data-ad-id],[data-ad-slot],[data-ad-provider]";return!!(f.closest?.(b)||f.matches?.(b)||f.closest?.("[role='advertisement']")||f.matches?.("[role='advertisement']")||t.iframeSrcLooksLikeAd(f?.getAttribute?.("src")||f?.src||"")||t.isAdElementStrong(f))}catch{return!1}}function D(f){let b=(t.state.config.ads||{}).dataSelector||"[data-ad-id],[data-ad-slot],[data-ad-provider]",_=N(f);if(!_)return null;let o=_.closest?.(b)||(_.matches?.(b)?_:null),m=_.tagName?.toLowerCase()==="iframe"?_:_.querySelector?.("iframe")||null,v=_.closest?.("[role='advertisement']")||(_.matches?.("[role='advertisement']")?_:null),L=t.getElementId(o||v||m||_);return L?{element_id:L,ad_id:o?.getAttribute?.("data-ad-id")||null,ad_slot:o?.getAttribute?.("data-ad-slot")||null,ad_provider:o?.getAttribute?.("data-ad-provider")||null}:null}function M(f){try{let S=f.getBoundingClientRect?.();return S?S.width>=40&&S.height>=40:!1}catch{return!1}}function j(f){let b=(t.state.config.ads||{}).dedupeWindowMs??5e3,_=t.now(),o=I.get(f);if(o&&_-o<b)return!0;if(I.set(f,_),I.size>500)for(let[m,v]of I.entries())_-v>b&&I.delete(m);return!1}function B(f){try{if(!n||!f||d.has(f))return;d.add(f),n.observe(f)}catch{}}function z(){if(!P())return;let f=t.state.config.ads||{},S=f.containerSelector||"[data-ad-id],[data-ad-slot],[data-ad-provider],[role='advertisement'],iframe",b=f.dataSelector||"[data-ad-id],[data-ad-slot],[data-ad-provider]";try{document.querySelectorAll(S).forEach(_=>{if(l.size>900)return;let o=N(_)||_;if(o&&O(o)&&M(o)&&!(o.tagName?.toLowerCase()==="iframe"&&(o.closest?.(b)||o.closest?.("[role='advertisement']")||!t.iframeSrcLooksLikeAd(o.getAttribute?.("src")||o.src||"")))&&(l.add(o),u&&!T.has(o)))try{u.observe(o),T.add(o)}catch{}})}catch{}}function p(){if(!P()||n)return;let f=t.state.config.ads||{},S=f.threshold??.5;n=new IntersectionObserver(b=>{for(let _ of b){let o=_.target;if(!o||!O(o))continue;let m=D(o);if(!m?.element_id)continue;let v=_.intersectionRatio||0,L=_.isIntersecting&&v>=S;C.has(m.element_id)||C.set(m.element_id,{impTimer:null,impSent:!1,viewStart:null,viewableSent:!1,lastRatio:0});let k=C.get(m.element_id);if(k.lastRatio=v,L&&!k.impSent&&!k.impTimer&&(k.impTimer=setTimeout(()=>{k.impSent=!0,k.impTimer=null;let R=m.ad_id||m.ad_slot||m.element_id;j(R)||t.enqueue(t.buildEvent("ad_impression",{_event_id:t.uuid(),element_id:m.element_id,ad_id:m.ad_id,ad_slot:m.ad_slot,ad_provider:m.ad_provider}))},f.minVisibleMs??300)),!L&&k.impTimer&&(clearTimeout(k.impTimer),k.impTimer=null),L)k.viewStart===null&&(k.viewStart=t.now());else if(k.viewStart!==null&&!k.viewableSent){let R=t.now()-k.viewStart;k.viewStart=null,R>=(f.minViewableMs??1e3)&&(k.viewableSent=!0,t.enqueue(t.buildEvent("ad_viewable",{_event_id:t.uuid(),element_id:m.element_id,ad_id:m.ad_id,ad_slot:m.ad_slot,ad_provider:m.ad_provider,view_time_ms:R,viewable_percent:Math.round(k.lastRatio*100)})))}C.set(m.element_id,k)}},{threshold:[S]});try{u=new ResizeObserver(b=>{for(let _ of b){let o=_.target;!o||!O(o)||M(o)&&(l.add(o),B(o))}})}catch{u=null}z(),l.forEach(b=>B(b)),e=new MutationObserver(()=>{z(),l.forEach(b=>B(b))});try{e.observe(document.documentElement,{childList:!0,subtree:!0,attributes:!0})}catch{}a=0,g=setInterval(()=>{a++,z(),l.forEach(b=>B(b)),a>=(f.rescanTicks??15)&&(clearInterval(g),g=null)},f.rescanIntervalMs??2e3)}function x(){try{e&&e.disconnect()}catch{}e=null;try{n&&n.disconnect()}catch{}n=null;try{u&&u.disconnect()}catch{}u=null,g&&(clearInterval(g),g=null),l.clear(),C.clear(),I.clear()}function E(f){if(!P())return;let S=f.target&&f.target.nodeType===1?f.target:f.target?.parentElement,b=N(S)||S;if(!b||!O(b))return;let _=D(b);_?.element_id&&t.enqueue(t.buildEvent("ad_click",{_event_id:t.uuid(),element_id:_.element_id,ad_id:_.ad_id,ad_slot:_.ad_slot,ad_provider:_.ad_provider}))}return{init(f){t=f,document.addEventListener("click",E,!0),P()&&p()},onConfigChange(){P()?p():x()}}}function Se(){let t=null,n="__pt_checkout_id_ss",e="__pt_checkout_id_ls",u=1500,g=new Map,a=new Map,l=null;function d(){return!!t?.state?.config?.plugins?.checkout}function T(o){try{return sessionStorage.getItem(o)}catch{return null}}function C(o,m){try{sessionStorage.setItem(o,m)}catch{}}function I(o){try{return sessionStorage.removeItem(o)}catch{}}function P(o){try{return localStorage.getItem(o)}catch{return null}}function $(o,m){try{return localStorage.setItem(o,m)}catch{}}function N(o){try{return localStorage.removeItem(o)}catch{}}function O(){let o=T(n)||P(e);return o||(o=t.uuid(),C(n,o),$(e,o)),o}function D(){I(n),N(e),a.clear(),l=null}function M(o){try{return/(checkout|payment|subscribe|billing|order|3ds|stripe|paypal)/i.test(String(o||""))}catch{return!1}}function j(o){let m=(location.pathname+" "+location.href).toLowerCase(),v=(typeof o=="string"?o:o?.innerText||o?.getAttribute?.("aria-label")||o?.getAttribute?.("data-elt")||o?.getAttribute?.("data-testid")||"").toLowerCase(),L=m+" "+v;return/(confirm|success|complete|thank)/i.test(L)?"payment_confirm":/(payment|card|cvv|cvc|3ds|stripe|paypal)/i.test(L)?"payment_form":/(plan|pricing|choose|select)/i.test(L)?"plan_select":(/(checkout|subscribe|billing|order)/i.test(L),"checkout_start")}function B(o,m,v){let L=`${O()}|${o}|${m}|${v||""}`,k=t.now(),R=g.get(L)||0;return k-R<u?!1:(g.set(L,k),!0)}function z(o){let m=a.get(o);return m?.startedAt?Math.max(0,t.now()-m.startedAt):null}function p(o){let m=a.get(o)||{startedAt:null,lastStatus:null};m.startedAt||(m.startedAt=t.now()),m.lastStatus="start",a.set(o,m),l=o}function x(o){return!!a.get(o)?.startedAt}function E(o,m,v,L={}){if(!d())return;let k=O();if(m==="start")p(o);else{if(!x(o))return;let R=a.get(o)||{startedAt:t.now(),lastStatus:null};R.lastStatus=m,a.set(o,R)}B(o,m,v)&&(t.enqueue(t.buildEvent("checkout",{_event_id:t.uuid(),element_id:v||null,checkout_id:k,checkout_step:o,status:m,step_duration_ms:z(o),...L})),o==="payment_confirm"&&m==="success"&&D())}function f(o){try{if(!d()||!l)return;let m=a.get(l);if(!m||m.lastStatus==="success")return;E(l,"dropoff","checkout_dropoff",{dropoff_reason:o||"leave"})}catch{}}function S(){if(window.__pt_checkout_fetch_patched)return;window.__pt_checkout_fetch_patched=!0;let o=window.fetch;typeof o=="function"&&(window.fetch=async function(...m){let v=performance.now(),L=m[0],k=typeof L=="string"?L:L?.url,R,X=null;try{return R=await o.apply(this,m),R}catch(Q){throw X=Q,Q}finally{try{if(!d()||!k||!M(k))return;let Q=Math.round(performance.now()-v),tt=!!(R&&R.ok),G=j(String(k)),ot=x(G)?G:l;if(!ot||!x(ot))return;E(ot,tt?"success":"fail","checkout_network",{checkout_latency_ms:Q,checkout_url_hint:String(k).slice(0,300),http_status:R?R.status:null,error:X?String(X?.message||X):null,via:"fetch"})}catch{}}})}function b(){if(window.__pt_checkout_xhr_patched)return;window.__pt_checkout_xhr_patched=!0;let o=window.XMLHttpRequest;if(!o||!o.prototype)return;let m=o.prototype.open,v=o.prototype.send;o.prototype.open=function(L,k){return this.__pt_checkout_url=k,m.apply(this,arguments)},o.prototype.send=function(){let L=performance.now(),k=this.__pt_checkout_url,R=()=>{try{if(!d()||!k||!M(k))return;let X=Math.round(performance.now()-L),Q=this.status>=200&&this.status<300,tt=j(String(k)),G=x(tt)?tt:l;if(!G||!x(G))return;E(G,Q?"success":"fail","checkout_network",{checkout_latency_ms:X,checkout_url_hint:String(k).slice(0,300),xhr_status:this.status||null,via:"xhr"})}catch{}};return this.addEventListener("load",R),this.addEventListener("error",R),this.addEventListener("abort",R),v.apply(this,arguments)}}function _(){document.addEventListener("click",o=>{try{if(!d())return;let v=(o.target&&o.target.nodeType===1?o.target:o.target?.parentElement)?.closest?.("button,a,input,[role='button'],[role='link'],[data-elt],[data-testid]")||null;if(!v)return;let L=(v.getAttribute?.("data-elt")||v.getAttribute?.("data-testid")||v.getAttribute?.("aria-label")||v.innerText||"").toLowerCase();if(!/(checkout|pay|subscribe|payment|plan|pricing|order|buy|purchase|continue|confirm)/i.test(L))return;let k=j(v),R=t.getElementId(v);E(k,"start",R,{trigger:"click"})}catch{}},!0),document.addEventListener("submit",o=>{try{if(!d())return;let m=o.target;if(!m||m.nodeType!==1)return;let v=(m.innerText||"").toLowerCase();if(!(/(card|cvv|cvc|expiry|expiration|3ds|stripe|paypal|payment)/i.test(v)||/payment/i.test(location.pathname+" "+location.href)))return;E("payment_form","start","payment_form_submit",{trigger:"submit"})}catch{}},!0),window.addEventListener("beforeunload",()=>f("beforeunload"),!0),document.addEventListener("visibilitychange",()=>{document.visibilityState==="hidden"&&f("hidden")})}return{init(o){t=o,S(),b(),_();try{if(d()&&M(location.href)){let m=j(location.href);E(m,"start","checkout_page",{trigger:"page"}),m==="payment_confirm"&&E("payment_confirm","success","checkout_page",{trigger:"page"})}}catch{}},onConfigChange(){}}}function Dt(t){if(!Array.isArray(t))return;let[n,e]=t;if(n==="__meta"){i.meta.project_id=e?.project_id||i.meta.project_id,i.meta.cdnBase=e?.cdnBase||i.meta.cdnBase,i.meta.tagVersion=e?.tagVersion||i.meta.tagVersion;return}if(n==="config"){if(!e)return;if(e.collectUrl&&(i.config.collectUrl=e.collectUrl),typeof e.debug=="boolean"&&(i.config.debug=e.debug),typeof e.trackPageViews=="boolean"&&(i.config.trackPageViews=e.trackPageViews),typeof e.trackClicks=="boolean"&&(i.config.trackClicks=e.trackClicks),typeof e.trackScroll=="boolean"&&(i.config.trackScroll=e.trackScroll),typeof e.trackErrors=="boolean"&&(i.config.trackErrors=e.trackErrors),typeof e.includeQueryHash=="boolean"&&(i.config.includeQueryHash=e.includeQueryHash),typeof e.scrollContainerSelector=="string"&&(i.config.scrollContainerSelector=e.scrollContainerSelector||null,ut()),typeof e.sampleRate=="number"&&(i.config.sampleRate=Math.max(0,Math.min(1,e.sampleRate)),Ot()),e.plugins&&typeof e.plugins=="object"){i.config.plugins=i.config.plugins||{};for(let u in e.plugins)typeof e.plugins[u]=="boolean"&&(i.config.plugins[u]=e.plugins[u])}e.cards&&typeof e.cards=="object"&&(i.config.cards=i.config.cards||{},Object.assign(i.config.cards,e.cards)),e.search&&typeof e.search=="object"&&(i.config.search=i.config.search||{},Object.assign(i.config.search,e.search)),e.ads&&typeof e.ads=="object"&&(i.config.ads=i.config.ads||{},Object.assign(i.config.ads,e.ads)),Ut();return}if(n==="consent"){e&&typeof e.analytics=="boolean"&&(i.config.consentAnalytics=e.analytics),Ut();return}if(n==="setUserId"){Jt(e);return}if(n==="event"){if(!e)return;let u=e.type||e.event_name;if(!u)return;let g=e.payload||e.properties||{},a=typeof e.event_ts=="number"?e.event_ts:void 0;J(Z(u,{_event_id:W(),...g},{event_ts:a}));return}n==="flush"&&ct({reason:"manual"})}function we(){i.entryReferrer=document.referrer||"direct",i.currentUrl=pt(),i.previousUrl=null,Rt(),Ot();let t=window[kt]=window[kt]||[];t.forEach(Dt);let n=t.push.bind(t);t.push=function(...e){return e.forEach(Dt),n(...e)},ge(),de(),me(),i.config.trackClicks&&document.addEventListener("click",ce,!0),i.config.trackScroll&&(i.__pt_scrollRootEl=St(),le(),setTimeout(()=>ut(),800),setTimeout(()=>ut(),2e3)),window.addEventListener("pagehide",()=>ct({reason:"pagehide"})),ft(_e()),ft(ye()),ft(be()),ft(Se()),pe(),i.config.trackPageViews&&J(Z("page_view",{trigger:"initial",_event_id:W()},{previous_url:null})),F("initialized",{project_id:i.meta.project_id,collectUrl:i.config.collectUrl,consent:i.config.consentAnalytics,sampledIn:i.sampledIn,includeQueryHash:i.config.includeQueryHash,plugins:i.config.plugins,scrollRoot:(()=>{let e=wt();return e===document.scrollingElement?"document.scrollingElement":e?.tagName||"unknown"})()})}we()})();})();
