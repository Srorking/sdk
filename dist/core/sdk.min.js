(()=>{(()=>{let X="__pt_sdk_loaded__";if(window[X])return;window[X]=!0;let fe="0.2.2",K="_ptq",Y="__pt_anonymous_id",D="__pt_user_id",$="__pt_session_id",Z="__pt_session_last",me=30*60*1e3,G=200,pe=5e3,ge=[25,50,75,100],J=80,r={meta:{project_id:null,cdnBase:null,tagVersion:null},config:{collectUrl:null,debug:!1,consentAnalytics:!0,trackPageViews:!0,trackClicks:!0,trackScroll:!0,trackErrors:!0,sampleRate:1,useBeaconOnUnload:!0,includeQueryHash:!1,plugins:{cards:!0,search:!1,ads:!1},cards:{threshold:.5,minVisibleMs:300,scopeSelector:"main",cardSelector:"article,[data-article-id],[data-content-id],[data-product-id],[data-item-id],[data-sku],.product,.product-card,.item,.card,[data-testid*='card']",adExcludeSelector:"[data-ad-id],[data-ad-slot],[data-ad-provider],[role='advertisement'],iframe",minW:120,minH:80},search:{minEmitMs:350,maxWaitMs:4500,quietDebounceMs:220,recheckIntervalMs:300,firstFallbackMs:2200,scopeSelector:"main",resultItemSelector:"article,[data-article-id],[data-content-id],[data-result],.search-result,.result,[data-testid*='result'],.product,.product-card,.item,.card,[data-product-id],[data-sku],[data-item-id]",adExcludeSelector:"[data-ad-id],[data-ad-slot],[data-ad-provider],[role='advertisement'],iframe",searchContextWindowMs:10*60*1e3},ads:{threshold:.5,minVisibleMs:300,minViewableMs:1e3,rescanIntervalMs:2e3,rescanTicks:15,containerSelector:"[data-ad-id],[data-ad-slot],[data-ad-provider],[role='advertisement'],iframe",dataSelector:"[data-ad-id],[data-ad-slot],[data-ad-provider]"}},sampleSeed:null,sampledIn:!0,userId:null,entryReferrer:null,currentUrl:null,previousUrl:null,webVitals:{}};function V(){return Date.now()}function R(){return typeof crypto<"u"&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{let o=Math.random()*16|0;return(e==="x"?o:o&3|8).toString(16)})}function j(e){return!e||typeof e!="string"||(e=e.replace(/\s+/g," ").trim(),!e)?null:(e.length>J&&(e=e.slice(0,J)+"\u2026"),e=e.replace(/[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}/gi,"[redacted_email]"),e=e.replace(/\+?\d[\d\s\-()]{7,}\d/g,"[redacted_phone]"),e)}function ee(e){try{return localStorage.getItem(e)}catch{return null}}function te(e,o){try{localStorage.setItem(e,o)}catch{}}function he(e){try{localStorage.removeItem(e)}catch{}}function ne(e){try{return sessionStorage.getItem(e)}catch{return null}}function re(e,o){try{sessionStorage.setItem(e,o)}catch{}}function _e(){let e=ee(Y);return e||(e=R(),te(Y,e)),e}function ye(){try{let e=V(),o=Number(ne(Z)||0),t=ne($);return(!t||!o||e-o>me)&&(t=R(),re($,t)),re(Z,String(e)),t}catch{return R()}}function oe(){if(r.userId)return r.userId;let e=ee(D);return r.userId=e?String(e):null,r.userId}function be(e){if(e==null||e===""){r.userId=null,he(D);return}r.userId=String(e),te(D,r.userId)}function ie(){if(r.config.includeQueryHash)return window.location.href;let e=new URL(window.location.href);return e.search="",e.hash="",e.toString()}function we(){return{ua:navigator.userAgent,language:navigator.language,timezone:Intl.DateTimeFormat().resolvedOptions().timeZone,screen:{w:window.screen.width,h:window.screen.height,dpr:window.devicePixelRatio||1},viewport:{w:window.innerWidth,h:window.innerHeight},sdk_version:fe,tag_version:r.meta.tagVersion||null}}function U(e,o={},t={}){let u=ie(),m=t.previous_url!==void 0?t.previous_url:r.previousUrl||null,d=typeof t.event_ts=="number"?t.event_ts:V();return{project_id:r.meta.project_id,event_name:e,event_ts:d,anonymous_id:_e(),session_id:ye(),user_id:oe(),page_url:u,page_path:window.location.pathname,page_title:document.title,referrer:r.entryReferrer||document.referrer||null,previous_url:m,context:we(),properties:o,web_vitals:r.webVitals||{}}}let N=[],W=null;function M(...e){r.config.debug&&console.log("[pt-sdk]",...e)}function ae(){return r.sampledIn&&r.config.consentAnalytics!==!1&&!!r.meta.project_id&&!!r.config.collectUrl}function O(e){if(ae()){if(r.config.debug)try{console.log("%cPT_EVT","font-weight:bold;color:#00b894",e.event_name,e)}catch{}N.push(e),N.length>=20?B({reason:"size"}):ve()}}function ve(){W||(W=setTimeout(()=>{W=null,B({reason:"timer"})},pe))}function Se(e,{useBeacon:o=!1}={}){if(window.__pt_debug_events=window.__pt_debug_events||[],window.__pt_debug_events.push(e),o&&navigator.sendBeacon)try{let t=new Blob([JSON.stringify(e)],{type:"application/json"}),u=navigator.sendBeacon(r.config.collectUrl,t);M("beacon sent:",u,e);return}catch(t){M("beacon failed, fallback to fetch",t)}fetch(r.config.collectUrl,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e),keepalive:!0}).then(async t=>{if(t.ok)M("collect ok:",t.status,"events:",e.events?.length);else{let u=await t.text().catch(()=>"");M("collect non-2xx:",t.status,u)}}).catch(t=>M("collect failed:",t))}function B({reason:e}={}){if(!N.length||!ae())return;let o=N.splice(0,N.length),t=[];for(let m=0;m<o.length;m+=G)t.push(o.slice(m,m+G));let u=r.config.useBeaconOnUnload&&(e==="pagehide"||e==="hidden");t.forEach(m=>{let d={project_id:r.meta.project_id,sent_at:V(),events:m};Se(d,{useBeacon:u})})}function Ee(e){if(!e||!e.tagName)return null;let o=[],t=e;for(let u=0;u<4&&t&&t.tagName;u++){let m=t.tagName.toLowerCase();if(t.id){m+=`#${t.id}`,o.unshift(m);break}t.classList&&t.classList.length&&(m+="."+Array.from(t.classList).slice(0,2).join(".")),o.unshift(m),t=t.parentElement}return o.join(">")}function z(e){let o=e?.closest?.("a,button,input,textarea,select,[role='button'],[role='link'],[data-elt]")||e;if(!o)return null;let t=o.closest?.("[data-elt]")||o,u=t.getAttribute?.("data-elt")||t.getAttribute?.("data-testid")||t.getAttribute?.("aria-label")||Ee(t);return j(String(u||""))||u||null}function ke(e){if(!r.config.trackClicks)return;let o=z(e.target),t=e.target?.closest?.("a,button,input,textarea,select,[role='button'],[role='link'],[data-elt]")||e.target;O(U("click",{_event_id:R(),element_id:o,element_type:t?.tagName?t.tagName.toLowerCase():null,element_role:t?.getAttribute?.("role")||t?.getAttribute?.("data-role")||null,x:e.clientX,y:e.clientY,button:e.button}))}let se=new Set;function xe(){try{let e=r.config.scrollContainerSelector;if(e){let o=document.querySelector(e);if(o)return o}}catch{}return document.documentElement}function Ce(){let e=xe(),o=e.scrollTop||0,t=e.scrollHeight||0,u=e.clientHeight||1,m=Math.max(1,t-u),d=o/m*100;return Math.max(0,Math.min(100,d))}function ce(){if(!r.config.trackScroll)return;let e=Ce(),o=Math.floor(e+.5);for(let t of ge)o>=t&&!se.has(t)&&(se.add(t),O(U("scroll",{_event_id:R(),scroll_depth:t})))}function Ae(){window.addEventListener("scroll",ce,{passive:!0});try{let e=r.config.scrollContainerSelector;if(e){let o=document.querySelector(e);o&&o.addEventListener("scroll",ce,{passive:!0})}}catch{}}function Ie(){try{let e=performance.getEntriesByType("navigation")[0];if(e&&e.responseStart&&(r.webVitals.ttfb=Math.round(e.responseStart)),window.PerformanceObserver){new PerformanceObserver(p=>{p.getEntries().forEach(h=>{h.name==="first-contentful-paint"&&(r.webVitals.fcp=Math.round(h.startTime))})}).observe({type:"paint",buffered:!0}),new PerformanceObserver(p=>{let h=p.getEntries(),w=h[h.length-1];w&&(r.webVitals.lcp=Math.round(w.startTime))}).observe({type:"largest-contentful-paint",buffered:!0});let u=0;new PerformanceObserver(p=>{p.getEntries().forEach(h=>{h.hadRecentInput||(u+=h.value)}),r.webVitals.cls=Number(u.toFixed(4))}).observe({type:"layout-shift",buffered:!0}),new PerformanceObserver(p=>{let h=p.getEntries()[0];h&&(r.webVitals.fid=Math.round(h.processingStart-h.startTime))}).observe({type:"first-input",buffered:!0}),Le()}}catch{}}function Le(){try{let p=function(x,C){if(!x.length)return 0;let y=x.slice().sort((L,A)=>L-A),E=Math.min(y.length-1,Math.max(0,Math.ceil(C*y.length)-1));return y[E]||0},w=function(){h||(h=setTimeout(()=>{h=null;let x=p(t,.98),C=p(t,.95);r.webVitals.inp=x||0,r.webVitals.inp_p95=C||0,r.webVitals.inp_worst=d||0},400))},_=function(){let x=Date.now();for(let[C,y]of o.entries())x-y.lastSeen>=m&&(t.push(y.maxDur),t.length>u&&t.splice(0,t.length-u),o.delete(C),w())};if(!window.PerformanceObserver||r.__inpObserverStarted)return;r.__inpObserverStarted=!0;let e=new Set(["pointermove","mousemove","scroll","wheel","touchmove"]),o=new Map,t=[],u=2e3,m=2e3,d=0,h=null,v=setInterval(_,1e3);r.__inpCleanupInterval=v;let I=new PerformanceObserver(x=>{let C=Date.now();for(let y of x.getEntries()){if(!y||!y.interactionId||e.has(y.name))continue;let E=Math.round(y.duration||0);if(E<=0)continue;let L=y.interactionId,A=o.get(L);A?(E>A.maxDur&&(A.maxDur=E),A.lastSeen=C,o.set(L,A)):o.set(L,{maxDur:E,lastSeen:C}),E>d&&(d=E)}_()});try{I.observe({type:"event",buffered:!0,durationThreshold:40})}catch{I.observe({type:"event",buffered:!0})}}catch{}}function le(){(r.sampleSeed===null||r.sampleSeed===void 0)&&(r.sampleSeed=Math.random());let e=typeof r.config.sampleRate=="number"?r.config.sampleRate:1,o=Math.max(0,Math.min(1,e));r.sampledIn=r.sampleSeed<o}function Re(){if(!r.config.trackErrors)return;let e=new Set,o=d=>{try{let p=JSON.stringify(d);return p.length>800?p.slice(0,800):p}catch{return String(d)}},t=d=>{try{if(d==null)return null;let p=String(d).trim();return p?(p.length>500&&(p=p.slice(0,500)+"\u2026"),p):null}catch{return null}},u=(d,p)=>{try{let h=d||p?.fileName||p?.sourceURL||p?.scriptURL||null;if(h)return h;let w=String(p?.stack||"");if(!w)return null;let _=w.match(/(https?:\/\/[^\s)]+|file:\/\/[^\s)]+)/i);if(_&&_[1])return _[1];let v=w.match(/(\b\/[^\s)]+):\d+:\d+/);return v&&v[1]?v[1]:null}catch{return null}},m=d=>{let p=o(d);e.has(p)||(e.add(p),O(U("error",{_event_id:R(),...d})))};window.addEventListener("error",d=>{try{if(!d.message&&(d.target||d.srcElement)){let _=d.target||d.srcElement,v=_?.currentSrc||_?.src||_?.href||_?.getAttribute?.("src")||_?.getAttribute?.("href")||null,I=t(v);m({error_type:"resource",message:"resource_load_error",source_url:I,resource_url:I,resource_tag:(_?.tagName||"").toLowerCase()||null,element_id:z(_)||null,is_fatal:!1});return}let h=j(d?.message)||"js_error",w=t(u(d?.filename,d?.error))||t(d?.filename)||null;m({error_type:"js",message:h,filename:d?.filename||null,lineno:d?.lineno||null,colno:d?.colno||null,source_url:w,is_fatal:!1})}catch{m({error_type:"js",message:"js_error",source_url:null,is_fatal:!1})}},!0),window.addEventListener("unhandledrejection",d=>{try{let p=d?.reason?.message||String(d?.reason||""),h=j(p)||"unhandled_promise",w=t(u(null,d?.reason))||null;m({error_type:"unhandledrejection",message:h,source_url:w,is_fatal:!1})}catch{m({error_type:"unhandledrejection",message:"unhandled_promise",source_url:null,is_fatal:!1})}})}let F=[];function Q(e){e&&typeof e.init=="function"&&F.push(e)}function Me(){let e={state:r,enqueue:O,buildEvent:U,uuid:R,sanitizeText:j,getElementId:z,dbg:M,now:V};F.forEach(o=>{try{o.init(e)}catch(t){M("plugin init failed",t)}})}function ue(){F.forEach(e=>{try{e.onConfigChange?.(r.config)}catch(o){M("plugin onConfigChange failed",o)}})}function qe(){let e=null,o=null,t=null,u=null,m=null,d=0,p=new Set,h=new WeakSet,w=new WeakSet,_=new WeakMap;function v(){return e?.state?.config?.plugins?.cards!==!1}function I(n){try{if(!n||n.hidden)return!1;let a=window.getComputedStyle?getComputedStyle(n):null;if(a&&(a.display==="none"||a.visibility==="hidden"||a.opacity==="0")||n.getClientRects&&n.getClientRects().length===0)return!1;let l=n.getBoundingClientRect?.();return l?l.width>0&&l.height>0:!1}catch{return!0}}function x(n,a,l){try{let f=n.getBoundingClientRect?.();return f?f.width>=a&&f.height>=l:!1}catch{return!1}}function C(n,a){try{return a?!!(n?.matches?.(a)||n?.closest?.(a)):!1}catch{return!1}}function y(){if(!v())return;let n=e.state.config.cards||{},a=document.querySelector(n.scopeSelector||"main")||document.body||document.documentElement,l=n.cardSelector||"article",f=n.adExcludeSelector||null,i=n.minW??120,g=n.minH??80;try{a.querySelectorAll(l).forEach(s=>{if(!(p.size>1e3)&&I(s)&&x(s,i,g)&&!C(s,f)&&(p.add(s),u&&!w.has(s)))try{u.observe(s),w.add(s)}catch{}})}catch{}}function E(n){try{if(!o||!n||h.has(n))return;h.add(n),o.observe(n)}catch{}}function L(){if(!v()||o)return;let n=e.state.config.cards||{},a=n.threshold??.5;o=new IntersectionObserver(l=>{for(let f of l){let i=f.target;if(!i)continue;let g=n.adExcludeSelector||null;if(C(i,g))continue;let s=f.isIntersecting&&(f.intersectionRatio||0)>=a,c=_.get(i);c||(c={timer:null,sent:!1,impression_id:null,lastRatio:0},_.set(i,c)),c.lastRatio=f.intersectionRatio||0,s&&!c.sent&&!c.timer&&(c.impression_id=c.impression_id||e.uuid(),c.timer=setTimeout(()=>{c.sent=!0,c.timer=null,e.enqueue(e.buildEvent("card_impression",{_event_id:e.uuid(),element_id:e.getElementId(i),impression_id:c.impression_id,viewport_percent:Math.round((c.lastRatio||0)*100)}))},n.minVisibleMs??300)),!s&&c.timer&&(clearTimeout(c.timer),c.timer=null),_.set(i,c)}},{threshold:[a]});try{u=new ResizeObserver(l=>{for(let f of l){let i=f.target;i&&(p.add(i),E(i))}})}catch{u=null}y(),p.forEach(l=>E(l)),t=new MutationObserver(()=>{y(),p.forEach(l=>E(l))});try{t.observe(document.documentElement,{childList:!0,subtree:!0,attributes:!0})}catch{}d=0,m=setInterval(()=>{d++,y(),p.forEach(l=>E(l)),d>=10&&(clearInterval(m),m=null)},1500)}function A(){try{t&&t.disconnect()}catch{}t=null;try{o&&o.disconnect()}catch{}o=null;try{u&&u.disconnect()}catch{}u=null,m&&(clearInterval(m),m=null),p.clear()}return{init(n){e=n,v()&&L()},onConfigChange(){v()?L():A()}}}function Te(){let e=null,o=null,t={query:null,results_count:null,search_latency_ms:null,ts:0};function u(){return!!e?.state?.config?.plugins?.search}function m(n){let a=(n?.tagName||"").toLowerCase();if(a!=="input"&&a!=="textarea")return!1;let l=(n.getAttribute?.("type")||"").toLowerCase(),f=n.getAttribute?.("role")||"",i=n.getAttribute?.("name")||"",g=n.getAttribute?.("placeholder")||"";return f==="searchbox"||l==="search"||/search/i.test(i)||/search/i.test(g)}function d(n){try{let a=n?.closest?.("form")||null;if(a){let l=Array.from(a.querySelectorAll("input,textarea")).find(m);if(l)return l}return Array.from(document.querySelectorAll("input,textarea")).find(m)||null}catch{return null}}function p(n){try{if(!n)return!1;let a=(n.tagName||"").toLowerCase();if(!["button","a","div","span"].includes(a))return!1;let l=(n.getAttribute?.("type")||"").toLowerCase();if(a==="button"&&l==="submit"){let q=n.closest?.("form");if(q&&Array.from(q.querySelectorAll("input,textarea")).find(m))return!0}let f=(n.getAttribute?.("role")||"").toLowerCase(),i=(n.getAttribute?.("aria-label")||"").toLowerCase(),g=(n.getAttribute?.("title")||"").toLowerCase(),s=(n.getAttribute?.("data-elt")||n.getAttribute?.("data-testid")||"").toLowerCase(),c=(n.innerText||"").toLowerCase(),k=`${i} ${g} ${s} ${c}`.trim(),b=/search|find|go|submit|lookup|magnifier|üîç/.test(k);return a==="button"&&(l==="submit"||l==="button")||f==="button"||f==="link"||a==="a"?b:!1}catch{return!1}}function h(){let n=e?.state?.config?.search?.searchContextWindowMs??6e5;return!t?.query||!t?.ts?!1:e.now()-t.ts<=n}function w(n){try{if(!n||n.hidden)return!1;let a=window.getComputedStyle?getComputedStyle(n):null;if(a&&(a.display==="none"||a.visibility==="hidden"||a.opacity==="0")||n.getClientRects&&n.getClientRects().length===0)return!1;let l=n.getBoundingClientRect?.();return l?l.width>0&&l.height>0:!1}catch{return!0}}function _(){try{let n=e.state.config.search||{},a=document.querySelector(n.scopeSelector||"main")||document.body||document.documentElement,l=n.resultItemSelector||"article,[data-article-id],[data-content-id]",f=n.adExcludeSelector||"[data-ad-id],[data-ad-slot],[data-ad-provider],[role='advertisement'],iframe",i=Array.from(a.querySelectorAll(l)),g=0;for(let s of i){if(!w(s)||s.closest?.("header,nav,footer")||f&&(s.matches?.(f)||s.closest?.(f)))continue;let c=s.getBoundingClientRect?.();c&&(c.width<80||c.height<40)||g++}return g}catch{return null}}function v(n){try{return String(n||"")}catch{return""}}function I(n){let a=v(n).toLowerCase();return a?!!(a.includes("/search")||a.includes("search=")||a.includes("q=")||a.includes("query=")||a.includes("suggest")||a.includes("autocomplete")):!1}function x(n){if(!u())return;let a=e.sanitizeText(n?.value)||"";if(!a)return;let l=e.uuid(),f=e.now(),i=e.getElementId(n)||"search_input";o={token:l,startTs:f,elementId:i,query:a,armedAt:f,capturedReq:!1};let g=_();e.enqueue(e.buildEvent("search",{_event_id:e.uuid(),element_id:i,query:a,results_count:typeof g=="number"?g:null,search_latency_ms:null,latency_source:"network"})),t={query:a,results_count:typeof g=="number"?g:null,search_latency_ms:null,ts:e.now()}}function C(n){if(!o)return!1;let l=(e.state.config.search||{}).captureRequestWindowMs??2e3,f=e.now()-o.armedAt;if(f<0||f>l)return!1;if(I(n))return!0;try{let i=o.query||"";if(i&&i.length>=2){let g=v(n).toLowerCase(),s=encodeURIComponent(i.toLowerCase());if(g.includes(s)||g.includes(i.toLowerCase()))return!0}}catch{}return!1}function y(n){o&&(t.search_latency_ms=Math.max(0,Math.round(n)),t.ts=e.now(),setTimeout(()=>{let a=_();typeof a=="number"&&(t.results_count=a)},250),o=null)}function E(){let n=window.fetch;typeof n=="function"&&(window.__pt_search_fetch_patched||(window.__pt_search_fetch_patched=!0,window.fetch=async function(...a){let l=performance.now(),f=a[0],i=typeof f=="string"?f:f?.url,g=u()&&C(i)&&o&&!o.capturedReq;g&&(o.capturedReq=!0);let s;try{return s=await n.apply(this,a),s}finally{if(g){let c=performance.now();y(c-l)}}}))}function L(){let n=window.XMLHttpRequest;if(!n||!n.prototype||window.__pt_search_xhr_patched)return;window.__pt_search_xhr_patched=!0;let a=n.prototype.open,l=n.prototype.send;n.prototype.open=function(f,i){return this.__pt_url=i,a.apply(this,arguments)},n.prototype.send=function(){let f=performance.now(),i=this.__pt_url,g=u()&&C(i)&&o&&!o.capturedReq;g&&(o.capturedReq=!0);let s=()=>{if(g){let c=performance.now();y(c-f)}};return this.addEventListener("load",s),this.addEventListener("error",s),this.addEventListener("abort",s),l.apply(this,arguments)}}function A(n){if(!u()||!h()||!t?.query)return;let a=e.state.config.search||{},l=document.querySelector(a.scopeSelector||"main")||document.body||document.documentElement,f=a.adExcludeSelector||"[data-ad-id],[data-ad-slot],[data-ad-provider],[role='advertisement'],iframe",i=a.resultItemSelector||"article,[data-article-id],[data-content-id]",g=n.target,s=g?.closest?.("a,button,[role='link'],[role='button']")||g;if(!s||f&&(s.matches?.(f)||s.closest?.(f)))return;let c=s.closest?.(i);if(!c||f&&(c.matches?.(f)||c.closest?.(f)))return;let b=Array.from(l.querySelectorAll(i)).filter(H=>H&&w(H)&&!(f&&(H.matches?.(f)||H.closest?.(f)))).indexOf(c),q=b>=0?b+1:null,T=c.getAttribute?.("data-article-id")||c.getAttribute?.("data-content-id")||c.getAttribute?.("data-result-id")||s.getAttribute?.("href")||null,S=_(),P=typeof S=="number"?S:t.results_count;e.enqueue(e.buildEvent("search_result_click",{_event_id:e.uuid(),element_id:e.getElementId(s),query:t.query,clicked_result_id:T,result_rank:q,results_count:typeof P=="number"?P:null,search_latency_ms:typeof t.search_latency_ms=="number"?t.search_latency_ms:null,latency_source:"network"}))}return{init(n){e=n,E(),L(),document.addEventListener("keydown",a=>{if(!u())return;let l=a.target;m(l)&&a.key==="Enter"&&x(l)},!0),document.addEventListener("submit",a=>{if(!u())return;let l=a.target;if(!l||l.nodeType!==1)return;let f=Array.from(l.querySelectorAll("input,textarea")).find(m);f&&x(f)},!0),document.addEventListener("click",a=>{if(!u())return;let l=a.target?.closest?.("button,a,[role='button'],[role='link'],div,span");if(!l||!p(l))return;let f=d(l);f&&x(f)},!0),document.addEventListener("click",A,!0)},onConfigChange(){u()||(o=null)}}}function Ue(){let e=null,o=[/doubleclick\.net/i,/googlesyndication\.com/i,/adservice\.google/i,/googleadservices\.com/i,/gampad\/ads/i,/adnxs\.com/i,/criteo/i,/pubmatic\.com/i,/openx\.net/i],t=null,u=null,m=null,d=null,p=0,h=new Set,w=new WeakSet,_=new WeakSet,v=new Map;function I(){return!!e?.state?.config?.plugins?.ads}function x(i){try{let g=i?.tagName?.toLowerCase()==="iframe"?i:i?.closest?.("iframe");if(!g)return!1;let s=g.getAttribute("src")||"";return s?o.some(c=>c.test(s)):!1}catch{return!1}}function C(i){let s=(e.state.config.ads||{}).dataSelector||"[data-ad-id],[data-ad-slot],[data-ad-provider]";return i?.closest?.(s)||i?.closest?.("[role='advertisement']")||(i?.tagName?.toLowerCase()==="iframe"?i:i?.closest?.("iframe"))||null}function y(i){try{if(!i)return!1;let s=(e.state.config.ads||{}).dataSelector||"[data-ad-id],[data-ad-slot],[data-ad-provider]";return!!(i.closest?.(s)||i.closest?.("[role='advertisement']")||x(i))}catch{return!1}}function E(i){let s=(e.state.config.ads||{}).dataSelector||"[data-ad-id],[data-ad-slot],[data-ad-provider]",c=C(i);if(!c)return null;let k=c.closest?.(s)||(c.matches?.(s)?c:null),b=c.tagName?.toLowerCase()==="iframe"?c:c.querySelector?.("iframe")||null,q=c.closest?.("[role='advertisement']")||(c.matches?.("[role='advertisement']")?c:null),T=e.getElementId(k||q||b||c);return T?{element_id:T,ad_id:k?.getAttribute?.("data-ad-id")||null,ad_slot:k?.getAttribute?.("data-ad-slot")||null,ad_provider:k?.getAttribute?.("data-ad-provider")||null}:null}function L(i){try{let g=i.getBoundingClientRect?.();return g?g.width>=40&&g.height>=40:!1}catch{return!1}}function A(i){try{if(!t||!i||w.has(i))return;w.add(i),t.observe(i)}catch{}}function n(){if(!I())return;let g=(e.state.config.ads||{}).containerSelector||"[data-ad-id],[data-ad-slot],[data-ad-provider],[role='advertisement'],iframe";try{document.querySelectorAll(g).forEach(s=>{if(!(h.size>900)&&y(s)){if(m&&!_.has(s))try{m.observe(s),_.add(s)}catch{}L(s)&&h.add(s)}})}catch{}}function a(){if(!I()||t)return;let i=e.state.config.ads||{},g=i.threshold??.5;t=new IntersectionObserver(s=>{for(let c of s){let k=c.target;if(!k||!y(k))continue;let b=E(k);if(!b?.element_id)continue;let q=c.intersectionRatio||0,T=c.isIntersecting&&q>=g;v.has(b.element_id)||v.set(b.element_id,{impTimer:null,impSent:!1,viewStart:null,viewableSent:!1,lastRatio:0});let S=v.get(b.element_id);if(S.lastRatio=q,T&&!S.impSent&&!S.impTimer&&(S.impTimer=setTimeout(()=>{S.impSent=!0,S.impTimer=null,e.enqueue(e.buildEvent("ad_impression",{_event_id:e.uuid(),element_id:b.element_id,ad_id:b.ad_id,ad_slot:b.ad_slot,ad_provider:b.ad_provider}))},i.minVisibleMs??300)),!T&&S.impTimer&&(clearTimeout(S.impTimer),S.impTimer=null),T)S.viewStart===null&&(S.viewStart=e.now());else if(S.viewStart!==null&&!S.viewableSent){let P=e.now()-S.viewStart;S.viewStart=null,P>=(i.minViewableMs??1e3)&&(S.viewableSent=!0,e.enqueue(e.buildEvent("ad_viewable",{_event_id:e.uuid(),element_id:b.element_id,ad_id:b.ad_id,ad_slot:b.ad_slot,ad_provider:b.ad_provider,view_time_ms:P,viewable_percent:Math.round(S.lastRatio*100)})))}v.set(b.element_id,S)}},{threshold:[g]});try{m=new ResizeObserver(s=>{for(let c of s){let k=c.target;!k||!y(k)||L(k)&&(h.add(k),A(k))}})}catch{m=null}n(),h.forEach(s=>A(s)),u=new MutationObserver(()=>{n(),h.forEach(s=>A(s))});try{u.observe(document.documentElement,{childList:!0,subtree:!0,attributes:!0})}catch{}p=0,d=setInterval(()=>{p++,n(),h.forEach(s=>A(s)),p>=(i.rescanTicks??15)&&(clearInterval(d),d=null)},i.rescanIntervalMs??2e3)}function l(){try{u&&u.disconnect()}catch{}u=null;try{t&&t.disconnect()}catch{}t=null;try{m&&m.disconnect()}catch{}m=null,d&&(clearInterval(d),d=null),h.clear(),v.clear()}function f(i){if(!I())return;let g=i.target,s=g?.closest?.("a,button,input,textarea,select,[role='button'],[role='link'],[data-elt],iframe,[role='advertisement'],[data-ad-id],[data-ad-slot],[data-ad-provider]")||g;if(!s||!y(s))return;let c=E(s);c?.element_id&&e.enqueue(e.buildEvent("ad_click",{_event_id:e.uuid(),element_id:c.element_id,ad_id:c.ad_id,ad_slot:c.ad_slot,ad_provider:c.ad_provider}))}return{init(i){e=i,document.addEventListener("click",f,!0),I()&&a()},onConfigChange(){I()?a():l()}}}function de(e){if(!Array.isArray(e))return;let[o,t]=e;if(o==="__meta"){r.meta.project_id=t?.project_id||r.meta.project_id,r.meta.cdnBase=t?.cdnBase||r.meta.cdnBase,r.meta.tagVersion=t?.tagVersion||r.meta.tagVersion;return}if(o==="config"){if(!t)return;if(t.collectUrl&&(r.config.collectUrl=t.collectUrl),typeof t.debug=="boolean"&&(r.config.debug=t.debug),typeof t.trackPageViews=="boolean"&&(r.config.trackPageViews=t.trackPageViews),typeof t.trackClicks=="boolean"&&(r.config.trackClicks=t.trackClicks),typeof t.trackScroll=="boolean"&&(r.config.trackScroll=t.trackScroll),typeof t.trackErrors=="boolean"&&(r.config.trackErrors=t.trackErrors),typeof t.includeQueryHash=="boolean"&&(r.config.includeQueryHash=t.includeQueryHash),typeof t.sampleRate=="number"&&(r.config.sampleRate=Math.max(0,Math.min(1,t.sampleRate)),le()),t.plugins&&typeof t.plugins=="object"){r.config.plugins=r.config.plugins||{};for(let u in t.plugins)typeof t.plugins[u]=="boolean"&&(r.config.plugins[u]=t.plugins[u])}t.cards&&typeof t.cards=="object"&&(r.config.cards=r.config.cards||{},Object.assign(r.config.cards,t.cards)),t.search&&typeof t.search=="object"&&(r.config.search=r.config.search||{},Object.assign(r.config.search,t.search)),t.ads&&typeof t.ads=="object"&&(r.config.ads=r.config.ads||{},Object.assign(r.config.ads,t.ads)),ue();return}if(o==="consent"){t&&typeof t.analytics=="boolean"&&(r.config.consentAnalytics=t.analytics),ue();return}if(o==="setUserId"){be(t);return}if(o==="event"){if(!t)return;let u=t.type||t.event_name;if(!u)return;let m=t.payload||t.properties||{},d=typeof t.event_ts=="number"?t.event_ts:void 0;O(U(u,{_event_id:R(),...m},{event_ts:d}));return}o==="flush"&&B({reason:"manual"})}function Oe(){r.entryReferrer=document.referrer||null,r.currentUrl=ie(),r.previousUrl=null,oe(),le();let e=window[K]=window[K]||[];e.forEach(de);let o=e.push.bind(e);e.push=function(...t){return t.forEach(de),o(...t)},Ie(),r.config.trackClicks&&document.addEventListener("click",ke,!0),r.config.trackScroll&&Ae(),window.addEventListener("pagehide",()=>B({reason:"pagehide"})),Re(),Q(qe()),Q(Te()),Q(Ue()),Me(),r.config.trackPageViews&&O(U("page_view",{trigger:"initial",_event_id:R()},{previous_url:null})),M("initialized",{project_id:r.meta.project_id,collectUrl:r.config.collectUrl,consent:r.config.consentAnalytics,sampledIn:r.sampledIn,includeQueryHash:r.config.includeQueryHash,plugins:r.config.plugins})}Oe()})();})();
