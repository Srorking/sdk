(()=>{(function(){if(typeof window<"u"){if(window.__pt_sdk_loaded)return;window.__pt_sdk_loaded=!0,window.__pt_sdk_version="0.2.2"}let fe="0.2.2",$="_ptq",X="__pt_anonymous_id",z="__pt_user_id",Z="__pt_session_id",J="__pt_session_last",ge=30*60*1e3,G=200,me=5e3,pe=[25,50,75,100],ee=80,n={meta:{project_id:null,cdnBase:null,tagVersion:null},config:{collectUrl:null,debug:!1,consentAnalytics:!0,trackPageViews:!0,trackClicks:!0,trackScroll:!0,trackErrors:!0,sampleRate:1,useBeaconOnUnload:!0,includeQueryHash:!1,plugins:{search:!1,ads:!1},search:{minEmitMs:350,maxWaitMs:4500,quietDebounceMs:220,recheckIntervalMs:300,firstFallbackMs:2200,scopeSelector:"main",resultItemSelector:"article,[data-article-id],[data-content-id],[data-result],.search-result,.result,[data-testid*='result']",adExcludeSelector:"[data-ad-id],[data-ad-slot],[data-ad-provider],[role='advertisement'],iframe"},ads:{threshold:.5,minVisibleMs:300,minViewableMs:1e3,rescanIntervalMs:2e3,rescanTicks:15,containerSelector:"[data-ad-id],[data-ad-slot],[data-ad-provider],[role='advertisement'],iframe",dataSelector:"[data-ad-id],[data-ad-slot],[data-ad-provider]"}},sampleSeed:null,sampledIn:!0,userId:null,entryReferrer:null,currentUrl:null,previousUrl:null,webVitals:{}};function q(){return Date.now()}function S(){return typeof crypto<"u"&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{let i=Math.random()*16|0;return(e==="x"?i:i&3|8).toString(16)})}function L(e){return!e||typeof e!="string"||(e=e.replace(/\s+/g," ").trim(),!e)?null:(e.length>ee&&(e=e.slice(0,ee)+"\u2026"),e=e.replace(/[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}/gi,"[redacted_email]"),e=e.replace(/\+?\d[\d\s\-()]{7,}\d/g,"[redacted_phone]"),e)}function te(e){try{return localStorage.getItem(e)}catch{return null}}function ne(e,i){try{localStorage.setItem(e,i)}catch{}}function he(e){try{localStorage.removeItem(e)}catch{}}function re(e){try{return sessionStorage.getItem(e)}catch{return null}}function ie(e,i){try{sessionStorage.setItem(e,i)}catch{}}function _e(){let e=te(X);return e||(e=S(),ne(X,e)),e}function ye(){try{let e=q(),i=Number(re(J)||0),t=re(Z);return(!t||!i||e-i>ge)&&(t=S(),ie(Z,t)),ie(J,String(e)),t}catch{return S()}}function oe(){if(n.userId)return n.userId;let e=te(z);return n.userId=e?String(e):null,n.userId}function be(e){if(e==null||e===""){n.userId=null,he(z);return}n.userId=String(e),ne(z,n.userId)}function x(){if(n.config.includeQueryHash)return window.location.href;let e=new URL(window.location.href);return e.search="",e.hash="",e.toString()}function ve(){return{ua:navigator.userAgent,language:navigator.language,timezone:Intl.DateTimeFormat().resolvedOptions().timeZone,screen:{w:window.screen.width,h:window.screen.height,dpr:window.devicePixelRatio||1},viewport:{w:window.innerWidth,h:window.innerHeight},sdk_version:fe,tag_version:n.meta.tagVersion||null}}function A(e,i={},t={}){let c=t.page_url!==void 0?t.page_url:x(),d=typeof t.event_ts=="number"&&Number.isFinite(t.event_ts)?t.event_ts:q(),s=t.previous_url!==void 0?t.previous_url:n.previousUrl||null,l=t.page_title!==void 0?t.page_title:document.title;return{project_id:n.meta.project_id,event_name:e,event_ts:d,anonymous_id:_e(),session_id:ye(),user_id:oe(),page_url:c,page_path:window.location.pathname,page_title:l,referrer:n.entryReferrer||document.referrer||null,previous_url:s,context:ve(),properties:i,web_vitals:n.webVitals||{}}}let M=[],D=null;function E(...e){n.config.debug&&console.log("[pt-sdk]",...e)}function ae(){return n.sampledIn&&n.config.consentAnalytics!==!1&&!!n.meta.project_id&&!!n.config.collectUrl}function C(e){ae()&&(M.push(e),M.length>=20?O({reason:"size"}):we())}function we(){D||(D=setTimeout(()=>{D=null,O({reason:"timer"})},me))}function Se(e,{useBeacon:i=!1}={}){if(window.__pt_debug_events=window.__pt_debug_events||[],window.__pt_debug_events.push(e),i&&navigator.sendBeacon)try{let t=new Blob([JSON.stringify(e)],{type:"application/json"}),c=navigator.sendBeacon(n.config.collectUrl,t);E("beacon sent:",c,e);return}catch(t){E("beacon failed, fallback to fetch",t)}fetch(n.config.collectUrl,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e),keepalive:!0}).then(async t=>{if(t.ok)E("collect ok:",t.status,"events:",e.events?.length);else{let c=await t.text().catch(()=>"");E("collect non-2xx:",t.status,c)}}).catch(t=>E("collect failed:",t))}function O({reason:e}={}){if(!M.length||!ae())return;let i=M.splice(0,M.length),t=[];for(let d=0;d<i.length;d+=G)t.push(i.slice(d,d+G));let c=n.config.useBeaconOnUnload&&e==="pagehide";t.forEach(d=>{let s={project_id:n.meta.project_id,sent_at:q(),events:d};Se(s,{useBeacon:c})})}function Ee(e){if(!e||!e.tagName)return null;let i=[],t=e;for(let c=0;c<4&&t&&t.tagName;c++){let d=t.tagName.toLowerCase();if(t.id){d+=`#${t.id}`,i.unshift(d);break}t.classList&&t.classList.length&&(d+="."+Array.from(t.classList).slice(0,2).join(".")),i.unshift(d),t=t.parentElement}return i.join(">")}function Q(e){let i=e?.closest?.("a,button,input,textarea,select,[role='button'],[role='link'],[data-elt]")||e;if(!i)return null;let t=i.closest?.("[data-elt]")||i,c=t.getAttribute?.("data-elt")||t.getAttribute?.("data-testid")||t.getAttribute?.("aria-label")||Ee(t);return L(String(c||""))||c||null}function ke(e){if(!n.config.trackClicks)return;let i=Q(e.target),t=e.target?.closest?.("a,button,input,textarea,select,[role='button'],[role='link'],[data-elt]")||e.target;C(A("click",{_event_id:S(),element_id:i,element_type:t?.tagName?t.tagName.toLowerCase():null,element_role:t?.getAttribute?.("role")||t?.getAttribute?.("data-role")||null,x:e.clientX,y:e.clientY,button:e.button}))}let W=new Set;function xe(){let e=document.documentElement,i=e.scrollTop||document.body.scrollTop||0,t=e.scrollHeight||document.body.scrollHeight||0,c=e.clientHeight||1;return Math.max(0,Math.min(100,i/Math.max(1,t-c)*100))}function Ae(){if(!n.config.trackScroll)return;let e=xe();for(let i of pe)e>=i&&!W.has(i)&&(W.add(i),C(A("scroll",{_event_id:S(),scroll_depth:i})))}function Ce(){try{let e=performance.getEntriesByType("navigation")[0];if(e&&e.responseStart&&(n.webVitals.ttfb=Math.round(e.responseStart)),window.PerformanceObserver){new PerformanceObserver(l=>{l.getEntries().forEach(g=>{g.name==="first-contentful-paint"&&(n.webVitals.fcp=Math.round(g.startTime))})}).observe({type:"paint",buffered:!0}),new PerformanceObserver(l=>{let g=l.getEntries(),p=g[g.length-1];p&&(n.webVitals.lcp=Math.round(p.startTime))}).observe({type:"largest-contentful-paint",buffered:!0});let c=0;new PerformanceObserver(l=>{l.getEntries().forEach(g=>{g.hadRecentInput||(c+=g.value)}),n.webVitals.cls=Number(c.toFixed(4))}).observe({type:"layout-shift",buffered:!0}),new PerformanceObserver(l=>{let g=l.getEntries()[0];g&&(n.webVitals.fid=Math.round(g.processingStart-g.startTime))}).observe({type:"first-input",buffered:!0})}}catch{}}function se(){(n.sampleSeed===null||n.sampleSeed===void 0)&&(n.sampleSeed=Math.random());let e=typeof n.config.sampleRate=="number"?n.config.sampleRate:1,i=Math.max(0,Math.min(1,e));n.sampledIn=n.sampleSeed<i}function Ie(){if(!n.config.trackErrors)return;let e=new Set,i=s=>{try{let l=JSON.stringify(s);return l.length>800?l.slice(0,800):l}catch{return String(s)}},t=s=>{try{if(s==null)return null;let l=String(s).trim();return l?(l.length>500&&(l=l.slice(0,500)+"\u2026"),l):null}catch{return null}},c=(s,l)=>{try{let g=s||l?.fileName||l?.sourceURL||l?.scriptURL||null;if(g)return g;let p=String(l?.stack||"");if(!p)return null;let _=p.match(/(https?:\/\/[^\s)]+|file:\/\/[^\s)]+)/i);if(_&&_[1])return _[1];let w=p.match(/(\b\/[^\s)]+):\d+:\d+/);return w&&w[1]?w[1]:null}catch{return null}},d=s=>{let l=i(s);e.has(l)||(e.add(l),C(A("error",{_event_id:S(),...s})))};window.addEventListener("error",s=>{try{if(!s.message&&(s.target||s.srcElement)){let _=s.target||s.srcElement,w=_?.currentSrc||_?.src||_?.href||_?.getAttribute?.("src")||_?.getAttribute?.("href")||null,b=t(w);d({error_type:"resource",message:"resource_load_error",source_url:b,resource_url:b,resource_tag:(_?.tagName||"").toLowerCase()||null,element_id:Q(_)||null,is_fatal:!1});return}let g=L(s?.message)||"js_error",p=t(c(s?.filename,s?.error))||t(s?.filename)||null;d({error_type:"js",message:g,filename:s?.filename||null,lineno:s?.lineno||null,colno:s?.colno||null,source_url:p,is_fatal:!1})}catch{d({error_type:"js",message:"js_error",source_url:null,is_fatal:!1})}},!0),window.addEventListener("unhandledrejection",s=>{try{let l=s?.reason?.message||String(s?.reason||""),g=L(l)||"unhandled_promise",p=t(c(null,s?.reason))||null;d({error_type:"unhandledrejection",message:g,source_url:p,is_fatal:!1})}catch{d({error_type:"unhandledrejection",message:"unhandled_promise",source_url:null,is_fatal:!1})}}),window.addEventListener("rejectionhandled",s=>{try{let l=s?.reason?.message||String(s?.reason||""),g=L(l)||"rejection_handled_late",p=t(c(null,s?.reason))||null;d({error_type:"rejectionhandled",message:g,source_url:p,is_fatal:!1})}catch{}})}let V=[];function ce(e){e&&typeof e.init=="function"&&V.push(e)}function Te(){let e={state:n,enqueue:C,buildEvent:A,uuid:S,sanitizeText:L,getElementId:Q,dbg:E,now:q};V.forEach(i=>{try{i.init(e)}catch(t){E("plugin init failed",t)}})}function le(){V.forEach(e=>{try{e.onConfigChange?.(n.config)}catch(i){E("plugin onConfigChange failed",i)}})}function Ue(e,i,t){V.forEach(c=>{try{c.onRouteChange?.({kind:e,prevUrl:i,nextUrl:t})}catch(d){E("plugin onRouteChange failed",d)}})}function Le(){let e=null,i=null,t=null,c=null,d=null,s=null,l=null,g=null,p={query:null,results_count:0,search_latency_ms:null};function _(){return!!e?.state?.config?.plugins?.search}function w(){try{if(/search/i.test(location.pathname)||/search/i.test(location.href))return!0;let o=location.search||"";return/[?&](q|query|search)=/i.test(o)}catch{return!1}}function b(o){let r=(o?.tagName||"").toLowerCase();if(r!=="input"&&r!=="textarea")return!1;let a=(o.getAttribute?.("type")||"").toLowerCase(),u=o.getAttribute?.("role")||"",h=o.getAttribute?.("name")||"",v=o.getAttribute?.("placeholder")||"";return u==="searchbox"||a==="search"||/search/i.test(h)||/search/i.test(v)}function K(o){try{let r=o?.closest?.("form")||null;if(r){let a=Array.from(r.querySelectorAll("input,textarea")).find(b);if(a)return a}return Array.from(document.querySelectorAll("input,textarea")).find(b)||null}catch{return null}}function Y(o){try{if(!o)return!1;let r=(o.tagName||"").toLowerCase();if(!["button","a","div","span"].includes(r))return!1;let a=(o.getAttribute?.("type")||"").toLowerCase(),u=(o.getAttribute?.("role")||"").toLowerCase(),h=(o.getAttribute?.("aria-label")||"").toLowerCase(),v=(o.getAttribute?.("title")||"").toLowerCase(),y=(o.getAttribute?.("data-elt")||o.getAttribute?.("data-testid")||"").toLowerCase(),m=(o.innerText||"").toLowerCase(),U=`${h} ${v} ${y} ${m}`.trim();return r==="button"&&(a==="submit"||a==="button")?/search|find|go/.test(U):u==="button"||u==="link"?/search|find|go/.test(U):r==="a"?/search|find|go/.test(U):!1}catch{return!1}}function I(o){try{if(!o||o.hidden)return!1;let r=window.getComputedStyle?getComputedStyle(o):null;if(r&&(r.display==="none"||r.visibility==="hidden"||r.opacity==="0")||o.getClientRects&&o.getClientRects().length===0)return!1;let a=o.getBoundingClientRect?.();return a?a.width>0&&a.height>0:!1}catch{return!0}}function H(){try{let o=e.state.config.search||{},r=document.querySelector(o.scopeSelector||"main")||document.body||document.documentElement,a=o.resultItemSelector||"article,[data-article-id],[data-content-id]",u=o.adExcludeSelector||"[data-ad-id],[role='advertisement'],iframe",h=Array.from(r.querySelectorAll(a)),v=0;for(let y of h){if(!I(y)||y.closest?.("header,nav,footer")||u&&(y.matches?.(u)||y.closest?.(u)))continue;let m=y.getBoundingClientRect?.();m&&(m.width<80||m.height<40)||v++}return v}catch{return 0}}function R(){if(s){try{s.disconnect()}catch{}s=null}l&&(clearTimeout(l),l=null),g&&(clearTimeout(g),g=null)}function k(){i=null,t=null,c=null,d=null,R()}function T(o=!1){if(!i||!t)return!1;let r=e.state.config.search||{},a=Math.max(0,e.now()-t),u=H();return o||u>0&&a>=(r.minEmitMs??350)||a>=(r.maxWaitMs??4500)?(p={query:d||"",results_count:u,search_latency_ms:Math.round(a)},e.enqueue(e.buildEvent("search",{_event_id:e.uuid(),element_id:c||"search_input",query:p.query,results_count:p.results_count,search_latency_ms:p.search_latency_ms})),k(),!0):!1}function N(){if(s)return;let o=e.state.config.search||{},r=document.querySelector(o.scopeSelector||"main")||document.body||document.documentElement;s=new MutationObserver(()=>{i&&(l&&clearTimeout(l),l=setTimeout(()=>{T(!1)},o.quietDebounceMs??220))});try{s.observe(r,{childList:!0,subtree:!0,attributes:!0})}catch{}}function P(){let o=e.state.config.search||{};if(!i||!t)return;let r=Math.max(0,e.now()-t),a=o.maxWaitMs??4500;if(!T(!1)){if(r>=a){T(!0);return}g=setTimeout(P,o.recheckIntervalMs??300)}}function j(o){if(!_())return;let r=e.sanitizeText(o?.value)||"";if(!r)return;i=e.uuid(),t=e.now(),c=e.getElementId(o)||"search_input",d=r,R(),N();let a=e.state.config.search||{};g=setTimeout(P,a.firstFallbackMs??2200)}function f(o){if(!_()||!w()||!p||(p.results_count||0)<=0)return;let r=e.state.config.search||{},a=document.querySelector(r.scopeSelector||"main")||document.body||document.documentElement,u=r.adExcludeSelector||"[data-ad-id],[role='advertisement'],iframe",h=r.resultItemSelector||"article,[data-article-id],[data-content-id]",v=o.target,y=v?.closest?.("a,button,[role='link'],[role='button']")||v;if(!y||u&&(y.matches?.(u)||y.closest?.(u)))return;let m=y.closest?.(h);if(!m||u&&(m.matches?.(u)||m.closest?.(u)))return;let de=Array.from(a.querySelectorAll(h)).filter(F=>F&&I(F)&&!(u&&(F.matches?.(u)||F.closest?.(u)))).indexOf(m),Pe=de>=0?de+1:null,je=m.getAttribute?.("data-article-id")||m.getAttribute?.("data-content-id")||m.getAttribute?.("data-result-id")||y.getAttribute?.("href")||null;e.enqueue(e.buildEvent("search_result_click",{_event_id:e.uuid(),element_id:e.getElementId(y),query:p.query,clicked_result_id:je,result_rank:Pe,results_count:p.results_count}))}return{init(o){e=o,document.addEventListener("keydown",r=>{if(!_())return;let a=r.target;b(a)&&r.key==="Enter"&&j(a)},!0),document.addEventListener("submit",r=>{if(!_())return;let a=r.target;if(!a||a.nodeType!==1)return;let u=Array.from(a.querySelectorAll("input,textarea")).find(b);u&&j(u)},!0),document.addEventListener("click",r=>{if(!_())return;let a=r.target?.closest?.("button,a,[role='button'],[role='link'],div,span");if(!a||!Y(a))return;let u=K(a);u&&j(u)},!0),document.addEventListener("click",f,!0)},onRouteChange(){k(),p={query:null,results_count:0,search_latency_ms:null}},onConfigChange(){_()||k()}}}function Me(){let e=null,i=[/doubleclick\.net/i,/googlesyndication\.com/i,/adservice\.google/i,/googleadservices\.com/i,/gampad\/ads/i,/adnxs\.com/i,/criteo/i,/pubmatic\.com/i,/openx\.net/i],t=null,c=null,d=null,s=null,l=0,g=new Set,p=new WeakSet,_=new WeakSet,w=new Map;function b(){return!!e?.state?.config?.plugins?.ads}function K(f){try{let o=f?.tagName?.toLowerCase()==="iframe"?f:f?.closest?.("iframe");if(!o)return!1;let r=o.getAttribute("src")||"";return r?i.some(a=>a.test(r)):!1}catch{return!1}}function Y(f){let r=(e.state.config.ads||{}).dataSelector||"[data-ad-id],[data-ad-slot],[data-ad-provider]";return f?.closest?.(r)||f?.closest?.("[role='advertisement']")||(f?.tagName?.toLowerCase()==="iframe"?f:f?.closest?.("iframe"))||null}function I(f){try{if(!f)return!1;let r=(e.state.config.ads||{}).dataSelector||"[data-ad-id],[data-ad-slot],[data-ad-provider]";return!!(f.closest?.(r)||f.closest?.("[role='advertisement']")||K(f))}catch{return!1}}function H(f){let r=(e.state.config.ads||{}).dataSelector||"[data-ad-id],[data-ad-slot],[data-ad-provider]",a=Y(f);if(!a)return null;let u=a.closest?.(r)||(a.matches?.(r)?a:null),h=a.tagName?.toLowerCase()==="iframe"?a:a.querySelector?.("iframe")||null,v=a.closest?.("[role='advertisement']")||(a.matches?.("[role='advertisement']")?a:null),y=e.getElementId(u||v||h||a);return y?{element_id:y,ad_id:u?.getAttribute?.("data-ad-id")||null,ad_slot:u?.getAttribute?.("data-ad-slot")||null,ad_provider:u?.getAttribute?.("data-ad-provider")||null}:null}function R(f){try{let o=f.getBoundingClientRect?.();return o?o.width>=40&&o.height>=40:!1}catch{return!1}}function k(f){try{if(!t||!f||p.has(f))return;p.add(f),t.observe(f)}catch{}}function T(){if(!b())return;let o=(e.state.config.ads||{}).containerSelector||"[data-ad-id],[data-ad-slot],[data-ad-provider],[role='advertisement'],iframe";try{document.querySelectorAll(o).forEach(r=>{if(!(g.size>900)&&I(r)){if(d&&!_.has(r))try{d.observe(r),_.add(r)}catch{}R(r)&&g.add(r)}})}catch{}}function N(){if(!b()||t)return;let f=e.state.config.ads||{},o=f.threshold??.5;t=new IntersectionObserver(r=>{for(let a of r){let u=a.target;if(!u||!I(u))continue;let h=H(u);if(!h?.element_id)continue;let v=a.intersectionRatio||0,y=a.isIntersecting&&v>=o;w.has(h.element_id)||w.set(h.element_id,{impTimer:null,impSent:!1,viewStart:null,viewableSent:!1,lastRatio:0});let m=w.get(h.element_id);if(m.lastRatio=v,y&&!m.impSent&&!m.impTimer&&(m.impTimer=setTimeout(()=>{m.impSent=!0,m.impTimer=null,e.enqueue(e.buildEvent("ad_impression",{_event_id:e.uuid(),element_id:h.element_id,ad_id:h.ad_id,ad_slot:h.ad_slot,ad_provider:h.ad_provider}))},f.minVisibleMs??300)),!y&&m.impTimer&&(clearTimeout(m.impTimer),m.impTimer=null),y)m.viewStart===null&&(m.viewStart=e.now());else if(m.viewStart!==null&&!m.viewableSent){let U=e.now()-m.viewStart;m.viewStart=null,U>=(f.minViewableMs??1e3)&&(m.viewableSent=!0,e.enqueue(e.buildEvent("ad_viewable",{_event_id:e.uuid(),element_id:h.element_id,ad_id:h.ad_id,ad_slot:h.ad_slot,ad_provider:h.ad_provider,view_time_ms:U,viewable_percent:Math.round(m.lastRatio*100)})))}w.set(h.element_id,m)}},{threshold:[o]});try{d=new ResizeObserver(r=>{for(let a of r){let u=a.target;!u||!I(u)||R(u)&&(g.add(u),k(u))}})}catch{d=null}T(),g.forEach(r=>k(r)),c=new MutationObserver(()=>{T(),g.forEach(r=>k(r))});try{c.observe(document.documentElement,{childList:!0,subtree:!0,attributes:!0})}catch{}l=0,s=setInterval(()=>{l++,T(),g.forEach(r=>k(r)),l>=(f.rescanTicks??15)&&(clearInterval(s),s=null)},f.rescanIntervalMs??2e3)}function P(){try{c?.disconnect()}catch{}c=null;try{t?.disconnect()}catch{}t=null;try{d?.disconnect()}catch{}d=null,s&&(clearInterval(s),s=null),g.clear(),w.clear()}function j(f){if(!b())return;let o=f.target,r=o?.closest?.("a,button,input,textarea,select,[role='button'],[role='link'],[data-elt],iframe,[role='advertisement'],[data-ad-id],[data-ad-slot],[data-ad-provider]")||o;if(!r||!I(r))return;let a=H(r);a?.element_id&&e.enqueue(e.buildEvent("ad_click",{_event_id:e.uuid(),element_id:a.element_id,ad_id:a.ad_id,ad_slot:a.ad_slot,ad_provider:a.ad_provider}))}return{init(f){e=f,document.addEventListener("click",j,!0),b()&&N()},onConfigChange(){b()?N():P()},onRouteChange(){b()&&(P(),N())}}}function B(e,i){let t=x(),c=i||n.currentUrl||null;W.clear(),n.previousUrl=c,n.currentUrl=t,Ue(e,c,t),n.config.trackPageViews&&C(A("page_view",{trigger:e,_event_id:S()},{previous_url:c}))}function Re(){let e=history.pushState,i=history.replaceState;history.pushState=function(...t){let c=n.currentUrl||x(),d=e.apply(this,t);return setTimeout(()=>B("pushState",c),0),d},history.replaceState=function(...t){let c=n.currentUrl||x(),d=i.apply(this,t);return setTimeout(()=>B("replaceState",c),0),d},window.addEventListener("popstate",()=>{let t=n.currentUrl||x();setTimeout(()=>B("popstate",t),0)}),window.addEventListener("hashchange",()=>{let t=n.currentUrl||x();setTimeout(()=>B("hashchange",t),0)})}function ue(e){if(!Array.isArray(e))return;let[i,t]=e;if(i==="__meta"){n.meta.project_id=t?.project_id||n.meta.project_id,n.meta.cdnBase=t?.cdnBase||n.meta.cdnBase,n.meta.tagVersion=t?.tagVersion||n.meta.tagVersion;return}if(i==="config"){if(!t)return;if(t.collectUrl&&(n.config.collectUrl=t.collectUrl),t.collect_url&&(n.config.collectUrl=t.collect_url),typeof t.debug=="boolean"&&(n.config.debug=t.debug),typeof t.trackPageViews=="boolean"&&(n.config.trackPageViews=t.trackPageViews),typeof t.trackClicks=="boolean"&&(n.config.trackClicks=t.trackClicks),typeof t.trackScroll=="boolean"&&(n.config.trackScroll=t.trackScroll),typeof t.trackErrors=="boolean"&&(n.config.trackErrors=t.trackErrors),typeof t.includeQueryHash=="boolean"&&(n.config.includeQueryHash=t.includeQueryHash),typeof t.sampleRate=="number"&&(n.config.sampleRate=Math.max(0,Math.min(1,t.sampleRate)),se()),t.plugins&&typeof t.plugins=="object"){n.config.plugins=n.config.plugins||{};for(let c in t.plugins)typeof t.plugins[c]=="boolean"&&(n.config.plugins[c]=t.plugins[c])}t.search&&typeof t.search=="object"&&(n.config.search=n.config.search||{},Object.assign(n.config.search,t.search)),t.ads&&typeof t.ads=="object"&&(n.config.ads=n.config.ads||{},Object.assign(n.config.ads,t.ads)),le();return}if(i==="consent"){t&&typeof t.analytics=="boolean"&&(n.config.consentAnalytics=t.analytics),le();return}if(i==="setUserId"){be(t);return}if(i==="event"){if(!t||typeof t!="object")return;let c=t.type||t.event_name||t.eventName;if(!c)return;let d=t.payload||t.properties||t.props||{},s=t.event_ts||t.eventTs;C(A(String(c),{_event_id:S(),...d||{}},{event_ts:typeof s=="number"&&Number.isFinite(s)?s:void 0}));return}i==="flush"&&O({reason:"manual"})}function Ne(){n.entryReferrer=document.referrer||null,n.currentUrl=x(),n.previousUrl=null,oe(),se();let e=window[$]=window[$]||[];e.forEach(ue);let i=e.push.bind(e);e.push=function(...t){return t.forEach(ue),i(...t)},Ce(),n.config.trackClicks&&document.addEventListener("click",ke,!0),n.config.trackScroll&&window.addEventListener("scroll",Ae,{passive:!0}),window.addEventListener("pagehide",()=>O({reason:"pagehide"})),Re(),Ie(),ce(Le()),ce(Me()),Te(),n.config.trackPageViews&&C(A("page_view",{trigger:"initial",_event_id:S()},{previous_url:null})),E("initialized",{project_id:n.meta.project_id,collectUrl:n.config.collectUrl,consent:n.config.consentAnalytics,sampledIn:n.sampledIn,includeQueryHash:n.config.includeQueryHash,plugins:n.config.plugins})}Ne()})();})();
