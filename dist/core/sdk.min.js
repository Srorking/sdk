(()=>{(()=>{let at="__pt_sdk_loaded__";if(window[at])return;window[at]=!0;let Ct="0.2.2",lt="_ptq",ut="__pt_anonymous_id",et="__pt_user_id",dt="__pt_session_id",ft="__pt_session_last",Lt=30*60*1e3,mt=200,At=5e3,It=[25,50,75,100],ht=80,o={meta:{project_id:null,cdnBase:null,tagVersion:null},config:{collectUrl:null,debug:!1,consentAnalytics:!0,trackPageViews:!0,trackClicks:!0,trackScroll:!0,trackErrors:!0,sampleRate:1,useBeaconOnUnload:!0,includeQueryHash:!1,scrollContainerSelector:null,plugins:{cards:!0,search:!1,ads:!1},cards:{threshold:.5,minVisibleMs:300,scopeSelector:"main",cardSelector:"article,[data-article-id],[data-content-id],[data-product-id],[data-item-id],[data-sku],.product,.product-card,.item,.card,[data-testid*='card']",adExcludeSelector:"[data-ad-id],[data-ad-slot],[data-ad-provider],[role='advertisement'],iframe",minW:120,minH:80},search:{minEmitMs:350,maxWaitMs:4500,quietDebounceMs:220,recheckIntervalMs:300,firstFallbackMs:1200,searchContextWindowMs:10*60*1e3,captureRequestWindowMs:2500,scopeSelector:"main",resultItemSelector:"article,[data-article-id],[data-content-id],[data-result],.search-result,.result,[data-testid*='result'],.product,.product-card,.item,.card,[data-product-id],[data-sku],[data-item-id]",adExcludeSelector:"[data-ad-id],[data-ad-slot],[data-ad-provider],[role='advertisement'],iframe"},ads:{threshold:.5,minVisibleMs:300,minViewableMs:1e3,rescanIntervalMs:2e3,rescanTicks:15,containerSelector:"[data-ad-id],[data-ad-slot],[data-ad-provider],[role='advertisement'],iframe",dataSelector:"[data-ad-id],[data-ad-slot],[data-ad-provider]"}},sampleSeed:null,sampledIn:!0,userId:null,entryReferrer:null,currentUrl:null,previousUrl:null,webVitals:{},__pt_scrollRootEl:null,__pt_scrollBound:!1,__pt_force_rescan_ts:0};function F(){return Date.now()}function V(){return typeof crypto<"u"&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,t=>{let n=Math.random()*16|0;return(t==="x"?n:n&3|8).toString(16)})}function Y(t){return!t||typeof t!="string"||(t=t.replace(/\s+/g," ").trim(),!t)?null:(t.length>ht&&(t=t.slice(0,ht)+"\u2026"),t=t.replace(/[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}/gi,"[redacted_email]"),t=t.replace(/\+?\d[\d\s\-()]{7,}\d/g,"[redacted_phone]"),t)}function pt(t){try{return localStorage.getItem(t)}catch{return null}}function gt(t,n){try{localStorage.setItem(t,n)}catch{}}function Mt(t){try{localStorage.removeItem(t)}catch{}}function _t(t){try{return sessionStorage.getItem(t)}catch{return null}}function yt(t,n){try{sessionStorage.setItem(t,n)}catch{}}function Rt(){let t=pt(ut);return t||(t=V(),gt(ut,t)),t}function Tt(){try{let t=F(),n=Number(_t(ft)||0),e=_t(dt);return(!e||!n||t-n>Lt)&&(e=V(),yt(dt,e)),yt(ft,String(t)),e}catch{return V()}}function bt(){if(o.userId)return o.userId;let t=pt(et);return o.userId=t?String(t):null,o.userId}function qt(t){if(t==null||t===""){o.userId=null,Mt(et);return}o.userId=String(t),gt(et,o.userId)}function nt(){if(o.config.includeQueryHash)return window.location.href;let t=new URL(window.location.href);return t.search="",t.hash="",t.toString()}function Pt(t){let n=String(t||"");return/ipad|tablet|silk/i.test(n)?"tablet":/mobi|android|iphone|ipod/i.test(n)?"mobile":"desktop"}function Ot(t){let n=String(t||"");return/windows nt/i.test(n)?"Windows":/mac os x/i.test(n)&&!/iphone|ipad|ipod/i.test(n)?"macOS":/android/i.test(n)?"Android":/iphone|ipad|ipod/i.test(n)?"iOS":/linux/i.test(n)?"Linux":"Other"}function Ut(t){let n=String(t||"");return/edg\//i.test(n)?"Edge":/chrome\//i.test(n)&&!/edg\//i.test(n)?"Chrome":/safari\//i.test(n)&&!/chrome\//i.test(n)?"Safari":/firefox\//i.test(n)?"Firefox":"Other"}function Nt(){let t=navigator.userAgent;return{ua:t,language:navigator.language,timezone:Intl.DateTimeFormat().resolvedOptions().timeZone,device_type:Pt(t),os:Ot(t),browser:Ut(t),screen:{w:window.screen.width,h:window.screen.height,dpr:window.devicePixelRatio||1},viewport:{w:window.innerWidth,h:window.innerHeight},sdk_version:Ct,tag_version:o.meta.tagVersion||null}}function j(t,n={},e={}){let u=nt(),h=e.previous_url!==void 0?e.previous_url:o.previousUrl||null,i=typeof e.event_ts=="number"?e.event_ts:F();return{project_id:o.meta.project_id,event_name:t,event_ts:i,anonymous_id:Rt(),session_id:Tt(),user_id:bt(),page_url:u,page_path:window.location.pathname,page_title:document.title,referrer:o.entryReferrer||document.referrer||null,previous_url:h,context:Nt(),properties:n,web_vitals:o.webVitals||{}}}let X=[],rt=null;function H(...t){o.config.debug&&console.log("[pt-sdk]",...t)}function wt(){return o.sampledIn&&o.config.consentAnalytics!==!1&&!!o.meta.project_id&&!!o.config.collectUrl}function B(t){if(wt()){if(o.config.debug)try{console.log("%cPT_EVT","font-weight:bold;color:#00b894",t.event_name,t)}catch{}X.push(t),X.length>=20?$({reason:"size"}):Dt()}}function Dt(){rt||(rt=setTimeout(()=>{rt=null,$({reason:"timer"})},At))}function Vt(t,{useBeacon:n=!1}={}){if(window.__pt_debug_events=window.__pt_debug_events||[],window.__pt_debug_events.push(t),n&&navigator.sendBeacon)try{let e=new Blob([JSON.stringify(t)],{type:"application/json"}),u=navigator.sendBeacon(o.config.collectUrl,e);H("beacon sent:",u,t);return}catch(e){H("beacon failed, fallback to fetch",e)}fetch(o.config.collectUrl,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t),keepalive:!0}).then(async e=>{if(e.ok)H("collect ok:",e.status,"events:",t.events?.length);else{let u=await e.text().catch(()=>"");H("collect non-2xx:",e.status,u)}}).catch(e=>H("collect failed:",e))}function $({reason:t}={}){if(!X.length||!wt())return;let n=X.splice(0,X.length),e=[];for(let h=0;h<n.length;h+=mt)e.push(n.slice(h,h+mt));let u=o.config.useBeaconOnUnload&&(t==="pagehide"||t==="hidden");e.forEach(h=>{let i={project_id:o.meta.project_id,sent_at:F(),events:h};Vt(i,{useBeacon:u})})}function Ht(t){if(!t||!t.tagName)return null;let n=[],e=t;for(let u=0;u<4&&e&&e.tagName;u++){let h=e.tagName.toLowerCase();if(e.id){h+=`#${e.id}`,n.unshift(h);break}e.classList&&e.classList.length&&(h+="."+Array.from(e.classList).slice(0,2).join(".")),n.unshift(h),e=e.parentElement}return n.join(">")}function ot(t){let n=t?.closest?.("a,button,input,textarea,select,[role='button'],[role='link'],[data-elt]")||t;if(!n)return null;let e=n.closest?.("[data-elt]")||n,u=e.getAttribute?.("data-elt")||e.getAttribute?.("data-testid")||e.getAttribute?.("aria-label")||Ht(e);return Y(String(u||""))||u||null}function jt(t){if(!o.config.trackClicks)return;let n=ot(t.target),e=t.target?.closest?.("a,button,input,textarea,select,[role='button'],[role='link'],[data-elt]")||t.target;B(j("click",{_event_id:V(),element_id:n,element_type:e?.tagName?e.tagName.toLowerCase():null,element_role:e?.getAttribute?.("role")||e?.getAttribute?.("data-role")||null,x:t.clientX,y:t.clientY,button:t.button}))}let it=new Set;function Bt(t){try{return(getComputedStyle(t).overflowY||"").toLowerCase()}catch{return""}}function vt(t){try{if(!t||t===document.body||t===document.documentElement)return!1;let n=Bt(t);if(!(n==="auto"||n==="scroll"))return!1;let e=t.clientHeight||0,u=t.scrollHeight||0;return e<200?!1:u-e>80}catch{return!1}}function ct(){try{let n=o.config.scrollContainerSelector;if(n){let e=document.querySelector(n);if(e)return e}}catch{}let t=document.scrollingElement||document.documentElement;try{if(t&&t.scrollHeight-t.clientHeight>80)return t}catch{}try{let n=["#__next","#root","[role='main']","main",".layout",".app",".container"];for(let e of n){let u=document.querySelector(e);if(u&&vt(u))return u}}catch{}try{let n=[],e=Array.from(document.body?.children||[]);for(let i of e)n.push(i);for(let i of e){let f=Array.from(i.children||[]).slice(0,12);for(let b of f)n.push(b)}let u=null,h=0;for(let i of n){if(!vt(i))continue;let f=(i.scrollHeight||0)-(i.clientHeight||0);f>h&&(h=f,u=i)}if(u)return u}catch{}return t||document.documentElement}function st(){return o.__pt_scrollRootEl||(o.__pt_scrollRootEl=ct()),o.__pt_scrollRootEl}function Wt(){let t=st(),n=t===document.documentElement||t===document.body||t===document.scrollingElement,e=0,u=0,h=1;n?(e=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0,u=document.documentElement.scrollHeight||document.body.scrollHeight||0,h=window.innerHeight||document.documentElement.clientHeight||1):(e=t.scrollTop||0,u=t.scrollHeight||0,h=t.clientHeight||1);let i=Math.max(1,u-h),f=e/i*100;return Math.max(0,Math.min(100,f))}function K(){if(!o.config.trackScroll)return;let t=Wt(),n=Math.floor(t+.5);for(let e of It)n>=e&&!it.has(e)&&(it.add(e),B(j("scroll",{_event_id:V(),scroll_depth:e})))}function zt(){if(!o.__pt_scrollBound){o.__pt_scrollBound=!0,window.addEventListener("scroll",K,{passive:!0,capture:!0});try{let t=st();!(t===document.documentElement||t===document.body||t===document.scrollingElement)&&t&&t.addEventListener&&t.addEventListener("scroll",K,{passive:!0,capture:!0})}catch{}}}function Q(){try{let t=o.__pt_scrollRootEl,n=ct();o.__pt_scrollRootEl=n;let e=t===document.documentElement||t===document.body||t===document.scrollingElement,u=n===document.documentElement||n===document.body||n===document.scrollingElement;t&&!e&&t.removeEventListener&&t.removeEventListener("scroll",K,{capture:!0}),n&&!u&&n.addEventListener&&n.addEventListener("scroll",K,{passive:!0,capture:!0})}catch{}}function Ft(){try{let t=performance.getEntriesByType("navigation")[0];if(t&&t.responseStart&&(o.webVitals.ttfb=Math.round(t.responseStart)),window.PerformanceObserver){new PerformanceObserver(f=>{f.getEntries().forEach(b=>{b.name==="first-contentful-paint"&&(o.webVitals.fcp=Math.round(b.startTime))})}).observe({type:"paint",buffered:!0}),new PerformanceObserver(f=>{let b=f.getEntries(),L=b[b.length-1];L&&(o.webVitals.lcp=Math.round(L.startTime))}).observe({type:"largest-contentful-paint",buffered:!0});let u=0;new PerformanceObserver(f=>{f.getEntries().forEach(b=>{b.hadRecentInput||(u+=b.value)}),o.webVitals.cls=Number(u.toFixed(4))}).observe({type:"layout-shift",buffered:!0}),new PerformanceObserver(f=>{let b=f.getEntries()[0];b&&(o.webVitals.fid=Math.round(b.processingStart-b.startTime))}).observe({type:"first-input",buffered:!0}),Xt()}}catch{}}function Xt(){try{let f=function(x,T){if(!x.length)return 0;let I=x.slice().sort((R,q)=>R-q),P=Math.min(I.length-1,Math.max(0,Math.ceil(T*I.length)-1));return I[P]||0},L=function(){b||(b=setTimeout(()=>{b=null;let x=f(e,.98),T=f(e,.95);o.webVitals.inp=x||0,o.webVitals.inp_p95=T||0,o.webVitals.inp_worst=i||0},400))},C=function(){let x=Date.now();for(let[T,I]of n.entries())x-I.lastSeen>=h&&(e.push(I.maxDur),e.length>u&&e.splice(0,e.length-u),n.delete(T),L())};if(!window.PerformanceObserver||o.__inpObserverStarted)return;o.__inpObserverStarted=!0;let t=new Set(["pointermove","mousemove","scroll","wheel","touchmove"]),n=new Map,e=[],u=2e3,h=2e3,i=0,b=null;o.__inpCleanupInterval=setInterval(C,1e3);let A=new PerformanceObserver(x=>{let T=Date.now();for(let I of x.getEntries()){if(!I||!I.interactionId||t.has(I.name))continue;let P=Math.round(I.duration||0);if(P<=0)continue;let R=I.interactionId,q=n.get(R);q?(P>q.maxDur&&(q.maxDur=P),q.lastSeen=T,n.set(R,q)):n.set(R,{maxDur:P,lastSeen:T}),P>i&&(i=P)}C()});try{A.observe({type:"event",buffered:!0,durationThreshold:40})}catch{A.observe({type:"event",buffered:!0})}}catch{}}function St(){(o.sampleSeed===null||o.sampleSeed===void 0)&&(o.sampleSeed=Math.random());let t=typeof o.config.sampleRate=="number"?o.config.sampleRate:1,n=Math.max(0,Math.min(1,t));o.sampledIn=o.sampleSeed<n}function Yt(){if(!o.config.trackErrors)return;let t=new Set,n=i=>{try{let f=JSON.stringify(i);return f.length>800?f.slice(0,800):f}catch{return String(i)}},e=i=>{try{if(i==null)return null;let f=String(i).trim();return f?(f.length>500&&(f=f.slice(0,500)+"\u2026"),f):null}catch{return null}},u=(i,f)=>{try{let b=i||f?.fileName||f?.sourceURL||f?.scriptURL||null;if(b)return b;let L=String(f?.stack||"");if(!L)return null;let C=L.match(/(https?:\/\/[^\s)]+|file:\/\/[^\s)]+)/i);if(C&&C[1])return C[1];let A=L.match(/(\b\/[^\s)]+):\d+:\d+/);return A&&A[1]?A[1]:null}catch{return null}},h=i=>{let f=n(i);t.has(f)||(t.add(f),B(j("error",{_event_id:V(),...i})))};window.addEventListener("error",i=>{try{if(!i.message&&(i.target||i.srcElement)){let C=i.target||i.srcElement,A=C?.currentSrc||C?.src||C?.href||C?.getAttribute?.("src")||C?.getAttribute?.("href")||null,x=e(A);h({error_type:"resource",message:"resource_load_error",source_url:x,resource_url:x,resource_tag:(C?.tagName||"").toLowerCase()||null,element_id:ot(C)||null,is_fatal:!1});return}let b=Y(i?.message)||"js_error",L=e(u(i?.filename,i?.error))||e(i?.filename)||null;h({error_type:"js",message:b,filename:i?.filename||null,lineno:i?.lineno||null,colno:i?.colno||null,source_url:L,is_fatal:!1})}catch{h({error_type:"js",message:"js_error",source_url:null,is_fatal:!1})}},!0),window.addEventListener("unhandledrejection",i=>{try{let f=i?.reason?.message||String(i?.reason||""),b=Y(f)||"unhandled_promise",L=e(u(null,i?.reason))||null;h({error_type:"unhandledrejection",message:b,source_url:L,is_fatal:!1})}catch{h({error_type:"unhandledrejection",message:"unhandled_promise",source_url:null,is_fatal:!1})}})}function $t(t){Z.forEach(n=>{try{n.onPageContextChange?.(t)}catch(e){H("plugin onPageContextChange failed",e)}})}function G(t){let n=nt();n!==o.currentUrl&&(o.previousUrl=o.currentUrl,o.currentUrl=n,it.clear(),Q(),o.__pt_force_rescan_ts=F(),$t(t),o.config.trackPageViews&&B(j("page_view",{trigger:t,_event_id:V()},{previous_url:o.previousUrl})))}function Kt(){if(window.__pt_spa_patched)return;window.__pt_spa_patched=!0;let t=history.pushState,n=history.replaceState;history.pushState=function(){let e=t.apply(this,arguments);return setTimeout(()=>G("pushState"),0),e},history.replaceState=function(){let e=n.apply(this,arguments);return setTimeout(()=>G("replaceState"),0),e},window.addEventListener("popstate",()=>G("popstate")),window.addEventListener("hashchange",()=>G("hashchange"))}let Z=[];function J(t){t&&typeof t.init=="function"&&Z.push(t)}function Qt(){let t={state:o,enqueue:B,buildEvent:j,uuid:V,sanitizeText:Y,getElementId:ot,dbg:H,now:F};Z.forEach(n=>{try{n.init(t)}catch(e){H("plugin init failed",e)}})}function Et(){Z.forEach(t=>{try{t.onConfigChange?.(o.config)}catch(n){H("plugin onConfigChange failed",n)}})}function Gt(){let t=null,n=null,e=null,u=null,h=null,i=0,f=new Set,b=new WeakSet,L=new WeakSet,C=new WeakMap;function A(){return t?.state?.config?.plugins?.cards!==!1}function x(_){try{if(!_||_.hidden)return!1;let s=window.getComputedStyle?getComputedStyle(_):null;if(s&&(s.display==="none"||s.visibility==="hidden"||s.opacity==="0")||_.getClientRects&&_.getClientRects().length===0)return!1;let p=_.getBoundingClientRect?.();return p?p.width>0&&p.height>0:!1}catch{return!0}}function T(_,s,p){try{let v=_.getBoundingClientRect?.();return v?v.width>=s&&v.height>=p:!1}catch{return!1}}function I(_,s){try{return s?!!(_?.matches?.(s)||_?.closest?.(s)):!1}catch{return!1}}function P(_){try{if(!_||_.nodeType!==1||_.closest("header,nav,footer"))return!1;let s=_.getBoundingClientRect?.();if(!s||s.width<160||s.height<100)return!1;let p=!!_.querySelector("a[href]");if(!p)return!1;let v=!!_.querySelector("img,picture,video"),c=!!_.querySelector("h1,h2,h3"),y=(_.innerText||"").trim(),g=y.length>=30,a=/\$\s?\d+|‚Ç¨\s?\d+|¬£\s?\d+|\b\d+\s?(usd|eur|gbp)\b/i.test(y);return v&&(c||g)||c&&g||a&&p}catch{return!1}}function R(){if(!A())return;let _=t.state.config.cards||{},s=document.querySelector(_.scopeSelector||"main")||document.body||document.documentElement,p=_.cardSelector||"article",v=_.adExcludeSelector||null,c=_.minW??120,y=_.minH??80,g=0;try{s.querySelectorAll(p).forEach(a=>{if(!(f.size>1200)&&x(a)&&T(a,c,y)&&!I(a,v)&&(f.add(a),g++,u&&!L.has(a)))try{u.observe(a),L.add(a)}catch{}})}catch{}if(g<5&&f.size<20)try{let a=s.querySelectorAll("article,li,section,div"),E=0;for(let r of a){if(E++,E>1800||f.size>1200)break;if(x(r)&&T(r,c,y)&&!I(r,v)&&P(r)&&(f.add(r),u&&!L.has(r)))try{u.observe(r),L.add(r)}catch{}}}catch{}}function q(_){try{if(!n||!_||b.has(_))return;b.add(_),n.observe(_)}catch{}}function O(){if(!A()||n)return;let _=t.state.config.cards||{},s=_.threshold??.5;n=new IntersectionObserver(p=>{for(let v of p){let c=v.target;if(!c)continue;let y=_.adExcludeSelector||null;if(I(c,y))continue;let g=v.isIntersecting&&(v.intersectionRatio||0)>=s,a=C.get(c);a||(a={timer:null,sent:!1,impression_id:null,lastRatio:0},C.set(c,a)),a.lastRatio=v.intersectionRatio||0,g&&!a.sent&&!a.timer&&(a.impression_id=a.impression_id||t.uuid(),a.timer=setTimeout(()=>{a.sent=!0,a.timer=null,t.enqueue(t.buildEvent("card_impression",{_event_id:t.uuid(),element_id:t.getElementId(c),impression_id:a.impression_id,viewport_percent:Math.round((a.lastRatio||0)*100)}))},_.minVisibleMs??300)),!g&&a.timer&&(clearTimeout(a.timer),a.timer=null),C.set(c,a)}},{threshold:[s]});try{u=new ResizeObserver(p=>{for(let v of p){let c=v.target;c&&(f.add(c),q(c))}})}catch{u=null}R(),f.forEach(p=>q(p)),e=new MutationObserver(()=>{R(),f.forEach(p=>q(p))});try{e.observe(document.documentElement,{childList:!0,subtree:!0,attributes:!0})}catch{}i=0,h=setInterval(()=>{i++,R(),f.forEach(p=>q(p)),i>=12&&(clearInterval(h),h=null)},1200)}function W(){try{e&&e.disconnect()}catch{}e=null;try{n&&n.disconnect()}catch{}n=null;try{u&&u.disconnect()}catch{}u=null,h&&(clearInterval(h),h=null),f.clear()}function N(){try{R(),f.forEach(_=>q(_))}catch{}h||(i=0,h=setInterval(()=>{i++,R(),f.forEach(_=>q(_)),i>=8&&(clearInterval(h),h=null)},1100))}return{init(_){t=_,A()&&O()},onConfigChange(){A()?O():W()},onPageContextChange(){A()&&N()}}}function Zt(){let t=null,n=null,e=null,u=null,h=null,i={query:null,results_count:null,search_latency_ms:null,ts:0};function f(){return!!t?.state?.config?.plugins?.search}function b(r){let m=(r?.tagName||"").toLowerCase();if(m!=="input"&&m!=="textarea")return!1;let d=(r.getAttribute?.("type")||"").toLowerCase(),l=r.getAttribute?.("role")||"",w=r.getAttribute?.("name")||"",M=r.getAttribute?.("placeholder")||"";return l==="searchbox"||d==="search"||/search/i.test(w)||/search/i.test(M)}function L(r){try{let m=r?.closest?.("form")||null;if(m){let d=Array.from(m.querySelectorAll("input,textarea")).find(b);if(d)return d}return Array.from(document.querySelectorAll("input,textarea")).find(b)||null}catch{return null}}function C(r){try{if(!r)return!1;let m=(r.tagName||"").toLowerCase();if(!["button","a","div","span"].includes(m))return!1;let d=(r.getAttribute?.("type")||"").toLowerCase();if(m==="button"&&d==="submit"){let z=r.closest?.("form");if(z&&Array.from(z.querySelectorAll("input,textarea")).find(b))return!0}let l=(r.getAttribute?.("role")||"").toLowerCase(),w=(r.getAttribute?.("aria-label")||"").toLowerCase(),M=(r.getAttribute?.("title")||"").toLowerCase(),k=(r.getAttribute?.("data-elt")||r.getAttribute?.("data-testid")||"").toLowerCase(),S=(r.innerText||"").toLowerCase(),U=`${w} ${M} ${k} ${S}`.trim(),D=/search|find|go|submit|lookup|magnifier|üîç/.test(U);return m==="button"&&(d==="submit"||d==="button")||l==="button"||l==="link"||m==="a"?D:!1}catch{return!1}}function A(){let r=t?.state?.config?.search?.searchContextWindowMs??6e5;return!i?.query||!i?.ts?!1:t.now()-i.ts<=r}function x(r){try{if(!r||r.hidden)return!1;let m=window.getComputedStyle?getComputedStyle(r):null;if(m&&(m.display==="none"||m.visibility==="hidden"||m.opacity==="0")||r.getClientRects&&r.getClientRects().length===0)return!1;let d=r.getBoundingClientRect?.();return d?d.width>0&&d.height>0:!1}catch{return!0}}function T(r){try{let d=(r||document.body||document.documentElement).querySelectorAll("[data-testid*='no-result'],[data-testid*='no_results'],[class*='no-result'],[id*='no-result'],[role='status'],[role='alert']");for(let l of d){let w=(l.innerText||"").toLowerCase().trim();if(w&&(w.includes("no results")||w.includes("0 results")||w.includes("nothing found")||w.includes("\u0644\u0645 \u064A\u062A\u0645 \u0627\u0644\u0639\u062B\u0648\u0631")||w.includes("\u0644\u0627 \u062A\u0648\u062C\u062F \u0646\u062A\u0627\u0626\u062C")||w.includes("\u0645\u0627 \u0641\u064A \u0646\u062A\u0627\u0626\u062C")||w.includes("\u0644\u0627 \u064A\u0648\u062C\u062F \u0646\u062A\u0627\u0626\u062C")))return!0}}catch{}return!1}function I(){try{let r=t.state.config.search||{},m=document.querySelector(r.scopeSelector||"main")||document.body||document.documentElement,d=r.resultItemSelector,l=r.adExcludeSelector,w=Array.from(m.querySelectorAll(d||"article,.result,.search-result,.product,.card,.item")),M=[];for(let k of w){if(!k||!x(k)||k.closest?.("header,nav,footer")||l&&(k.matches?.(l)||k.closest?.(l)))continue;let S=k.getBoundingClientRect?.();S&&(S.width<90||S.height<50)||M.push(k)}return{scope:m,nodes:M}}catch{return{scope:document.body||document.documentElement,nodes:[]}}}function P(){let{scope:r,nodes:m}=I();if(!m.length)return{count:0,scope:r};let d=new Set([document.body,document.documentElement,r]),l=new Map;for(let S of m){let U=S.parentElement;for(let D=0;D<4&&U&&!d.has(U);D++)l.set(U,(l.get(U)||0)+1),U=U.parentElement}let w=null,M=0;for(let[S,U]of l.entries())!S||d.has(S)||S===document.body||S===document.documentElement||U>M&&(w=S,M=U);return{count:M>0?M:m.length,scope:r}}function R(r){try{let m=[];for(let d=0;d<r.length&&d<20;d++){let l=r[d],M=(l.querySelector?.("a[href]")||l.closest?.("a[href]"))?.getAttribute?.("href")||"",k=l.getAttribute?.("data-id")||l.getAttribute?.("data-item-id")||l.id||"";m.push(String(M||k||t.getElementId(l)||"").slice(0,120))}return m.join("|")}catch{return""}}function q(){if(e){try{e.disconnect()}catch{}e=null}u&&(clearTimeout(u),u=null),h&&(clearTimeout(h),h=null)}function O(){n=null,q()}function W(){if(e)return;let r=t.state.config.search||{},m=document.querySelector(r.scopeSelector||"main")||document.body||document.documentElement;e=new MutationObserver(()=>{n&&(u&&clearTimeout(u),u=setTimeout(()=>{N(!1)},r.quietDebounceMs??220))});try{e.observe(m,{childList:!0,subtree:!0,attributes:!0})}catch{}}function N(r){if(!n)return!1;let m=t.state.config.search||{},d=Math.max(0,t.now()-n.startTs),{count:l,scope:w}=P(),M=T(w);if(!(r||n.reqDone&&d>=(m.minEmitMs??350)||d>=(m.maxWaitMs??4500)||l>0&&d>=(m.minEmitMs??350)))return!1;let S=0;M?S=0:S=Math.max(0,l||0);try{let{nodes:D}=I(),z=R(D);n.baselineSig&&z&&z===n.baselineSig&&S>0&&(n.reqDone||(S=0))}catch{}let U=typeof n.reqLatencyMs=="number"?Math.round(n.reqLatencyMs):Math.round(d);return i={query:n.query||"",results_count:S,search_latency_ms:U,ts:t.now()},t.enqueue(t.buildEvent("search",{_event_id:t.uuid(),element_id:n.elementId||"search_input",query:i.query,results_count:i.results_count,search_latency_ms:i.search_latency_ms,latency_source:typeof n.reqLatencyMs=="number"?"network":"dom"})),O(),!0}function _(){let r=t.state.config.search||{};if(!n||N(!1))return;let m=Math.max(0,t.now()-n.startTs),d=r.maxWaitMs??4500;if(m>=d){N(!0);return}h=setTimeout(_,r.recheckIntervalMs??300)}function s(r){if(!f())return;let m=t.sanitizeText(r?.value)||"";if(!m)return;let d=(()=>{try{let{nodes:w}=I();return R(w)}catch{return""}})();n={token:t.uuid(),startTs:t.now(),elementId:t.getElementId(r)||"search_input",query:m,baselineSig:d,reqCaptured:!1,reqDone:!1,reqLatencyMs:null},q(),W();let l=t.state.config.search||{};h=setTimeout(_,l.firstFallbackMs??1200)}function p(r){try{return String(r||"")}catch{return""}}function v(r,m){let d=p(r).toLowerCase();if(!d)return!1;if(d.includes("/search")||d.includes("search=")||d.includes("q=")||d.includes("query=")||d.includes("suggest")||d.includes("autocomplete"))return!0;if(m)try{let l=encodeURIComponent(String(m).toLowerCase());if(l&&(d.includes(l)||d.includes(String(m).toLowerCase())))return!0}catch{}return!1}function c(r){if(!n)return!1;let d=(t.state.config.search||{}).captureRequestWindowMs??2500,l=t.now()-n.startTs;return l<0||l>d?!1:v(r,n.query)}function y(r){n&&(n.reqDone=!0,n.reqLatencyMs=Math.max(0,r),setTimeout(()=>N(!1),150))}function g(){if(window.__pt_search_fetch_patched)return;window.__pt_search_fetch_patched=!0;let r=window.fetch;typeof r=="function"&&(window.fetch=async function(...m){let d=performance.now(),l=m[0],w=typeof l=="string"?l:l?.url,M=f()&&n&&!n.reqCaptured&&c(w);M&&(n.reqCaptured=!0);let k;try{return k=await r.apply(this,m),k}finally{if(M){let S=performance.now();y(S-d)}}})}function a(){if(window.__pt_search_xhr_patched)return;window.__pt_search_xhr_patched=!0;let r=window.XMLHttpRequest;if(!r||!r.prototype)return;let m=r.prototype.open,d=r.prototype.send;r.prototype.open=function(l,w){return this.__pt_url=w,m.apply(this,arguments)},r.prototype.send=function(){let l=performance.now(),w=this.__pt_url,M=f()&&n&&!n.reqCaptured&&c(w);M&&(n.reqCaptured=!0);let k=()=>{if(M){let S=performance.now();y(S-l)}};return this.addEventListener("load",k),this.addEventListener("error",k),this.addEventListener("abort",k),d.apply(this,arguments)}}function E(r){if(!f()||!A()||!i?.query)return;let m=t.state.config.search||{},d=document.querySelector(m.scopeSelector||"main")||document.body||document.documentElement,l=m.adExcludeSelector||"[data-ad-id],[role='advertisement'],iframe",w=m.resultItemSelector||"article,.result,.search-result,.product,.card,.item",M=r.target,k=M?.closest?.("a,button,[role='link'],[role='button']")||M;if(!k||l&&(k.matches?.(l)||k.closest?.(l)))return;let S=k.closest?.(w);if(!S||l&&(S.matches?.(l)||S.closest?.(l)))return;let D=Array.from(d.querySelectorAll(w)).filter(tt=>tt&&x(tt)&&!(l&&(tt.matches?.(l)||tt.closest?.(l)))).indexOf(S),z=D>=0?D+1:null,xt=S.getAttribute?.("data-article-id")||S.getAttribute?.("data-content-id")||S.getAttribute?.("data-result-id")||k.getAttribute?.("href")||null;t.enqueue(t.buildEvent("search_result_click",{_event_id:t.uuid(),element_id:t.getElementId(k),query:i.query,clicked_result_id:xt,result_rank:z,results_count:typeof i.results_count=="number"?i.results_count:null,search_latency_ms:typeof i.search_latency_ms=="number"?i.search_latency_ms:null}))}return{init(r){t=r,g(),a(),document.addEventListener("keydown",m=>{if(!f())return;let d=m.target;b(d)&&m.key==="Enter"&&s(d)},!0),document.addEventListener("submit",m=>{if(!f())return;let d=m.target;if(!d||d.nodeType!==1)return;let l=Array.from(d.querySelectorAll("input,textarea")).find(b);l&&s(l)},!0),document.addEventListener("click",m=>{if(!f())return;let d=m.target?.closest?.("button,a,[role='button'],[role='link'],div,span");if(!d||!C(d))return;let l=L(d);l&&s(l)},!0),document.addEventListener("click",E,!0)},onConfigChange(){f()||O()},onPageContextChange(){O()}}}function Jt(){let t=null,n=[/doubleclick\.net/i,/googlesyndication\.com/i,/adservice\.google/i,/googleadservices\.com/i,/gampad\/ads/i,/adnxs\.com/i,/criteo/i,/pubmatic\.com/i,/openx\.net/i],e=null,u=null,h=null,i=null,f=0,b=new Set,L=new WeakSet,C=new WeakSet,A=new Map,x=new Map;function T(){return!!t?.state?.config?.plugins?.ads}function I(c){try{let y=c?.tagName?.toLowerCase()==="iframe"?c:c?.closest?.("iframe");if(!y)return!1;let g=y.getAttribute("src")||"";return g?n.some(a=>a.test(g)):!1}catch{return!1}}function P(c){let g=(t.state.config.ads||{}).dataSelector||"[data-ad-id],[data-ad-slot],[data-ad-provider]";try{return c?.closest?.(g)||c?.closest?.("[role='advertisement']")||(c?.tagName?.toLowerCase()==="iframe"?c:c?.closest?.("iframe"))||null}catch{return null}}function R(c){try{if(!c)return!1;let g=(t.state.config.ads||{}).dataSelector||"[data-ad-id],[data-ad-slot],[data-ad-provider]";return!!(c.closest?.(g)||c.matches?.(g)||c.closest?.("[role='advertisement']")||c.matches?.("[role='advertisement']")||I(c))}catch{return!1}}function q(c){let g=(t.state.config.ads||{}).dataSelector||"[data-ad-id],[data-ad-slot],[data-ad-provider]",a=P(c);if(!a)return null;let E=a.closest?.(g)||(a.matches?.(g)?a:null),r=a.tagName?.toLowerCase()==="iframe"?a:a.querySelector?.("iframe")||null,m=a.closest?.("[role='advertisement']")||(a.matches?.("[role='advertisement']")?a:null),d=t.getElementId(E||m||r||a);return d?{element_id:d,ad_id:E?.getAttribute?.("data-ad-id")||null,ad_slot:E?.getAttribute?.("data-ad-slot")||null,ad_provider:E?.getAttribute?.("data-ad-provider")||null}:null}function O(c){try{let y=c.getBoundingClientRect?.();return y?y.width>=40&&y.height>=40:!1}catch{return!1}}function W(c){let g=(t.state.config.ads||{}).dedupeWindowMs??5e3,a=t.now(),E=x.get(c);if(E&&a-E<g)return!0;if(x.set(c,a),x.size>500)for(let[r,m]of x.entries())a-m>g&&x.delete(r);return!1}function N(c){try{if(!e||!c||L.has(c))return;L.add(c),e.observe(c)}catch{}}function _(){if(!T())return;let c=t.state.config.ads||{},y=c.containerSelector||"[data-ad-id],[data-ad-slot],[data-ad-provider],[role='advertisement'],iframe";try{document.querySelectorAll(y).forEach(g=>{if(b.size>900)return;let a=P(g)||g;if(a&&R(a)&&O(a)){if(a.tagName?.toLowerCase()==="iframe"){let E=c.dataSelector||"[data-ad-id],[data-ad-slot],[data-ad-provider]";if(a.closest?.(E)||a.closest?.("[role='advertisement']"))return}if(b.add(a),h&&!C.has(a))try{h.observe(a),C.add(a)}catch{}}})}catch{}}function s(){if(!T()||e)return;let c=t.state.config.ads||{},y=c.threshold??.5;e=new IntersectionObserver(g=>{for(let a of g){let E=a.target;if(!E||!R(E))continue;let r=q(E);if(!r?.element_id)continue;let m=a.intersectionRatio||0,d=a.isIntersecting&&m>=y;A.has(r.element_id)||A.set(r.element_id,{impTimer:null,impSent:!1,viewStart:null,viewableSent:!1,lastRatio:0});let l=A.get(r.element_id);if(l.lastRatio=m,d&&!l.impSent&&!l.impTimer&&(l.impTimer=setTimeout(()=>{l.impSent=!0,l.impTimer=null;let w=r.ad_id||r.ad_slot||r.element_id;W(w)||t.enqueue(t.buildEvent("ad_impression",{_event_id:t.uuid(),element_id:r.element_id,ad_id:r.ad_id,ad_slot:r.ad_slot,ad_provider:r.ad_provider}))},c.minVisibleMs??300)),!d&&l.impTimer&&(clearTimeout(l.impTimer),l.impTimer=null),d)l.viewStart===null&&(l.viewStart=t.now());else if(l.viewStart!==null&&!l.viewableSent){let w=t.now()-l.viewStart;l.viewStart=null,w>=(c.minViewableMs??1e3)&&(l.viewableSent=!0,t.enqueue(t.buildEvent("ad_viewable",{_event_id:t.uuid(),element_id:r.element_id,ad_id:r.ad_id,ad_slot:r.ad_slot,ad_provider:r.ad_provider,view_time_ms:w,viewable_percent:Math.round(l.lastRatio*100)})))}A.set(r.element_id,l)}},{threshold:[y]});try{h=new ResizeObserver(g=>{for(let a of g){let E=a.target;!E||!R(E)||O(E)&&(b.add(E),N(E))}})}catch{h=null}_(),b.forEach(g=>N(g)),u=new MutationObserver(()=>{_(),b.forEach(g=>N(g))});try{u.observe(document.documentElement,{childList:!0,subtree:!0,attributes:!0})}catch{}f=0,i=setInterval(()=>{f++,_(),b.forEach(g=>N(g)),f>=(c.rescanTicks??15)&&(clearInterval(i),i=null)},c.rescanIntervalMs??2e3)}function p(){try{u&&u.disconnect()}catch{}u=null;try{e&&e.disconnect()}catch{}e=null;try{h&&h.disconnect()}catch{}h=null,i&&(clearInterval(i),i=null),b.clear(),A.clear(),x.clear()}function v(c){if(!T())return;let y=c.target,g=P(y)||y;if(!g||!R(g))return;let a=q(g);a?.element_id&&t.enqueue(t.buildEvent("ad_click",{_event_id:t.uuid(),element_id:a.element_id,ad_id:a.ad_id,ad_slot:a.ad_slot,ad_provider:a.ad_provider}))}return{init(c){t=c,document.addEventListener("click",v,!0),T()&&s()},onConfigChange(){T()?s():p()}}}function te(){let t=null,n="__pt_checkout_id_ss",e="__pt_checkout_id_ls",u=1500,h=new Map;function i(){return!!t?.state?.config?.plugins?.checkout}function f(s){try{return sessionStorage.getItem(s)}catch{return null}}function b(s,p){try{sessionStorage.setItem(s,p)}catch{}}function L(s){try{sessionStorage.removeItem(s)}catch{}}function C(s){try{return localStorage.getItem(s)}catch{return null}}function A(s,p){try{localStorage.setItem(s,p)}catch{}}function x(s){try{localStorage.removeItem(s)}catch{}}function T(){let s=f(n)||C(e);return s||(s=t.uuid(),b(n,s),A(e,s)),s}function I(){L(n),x(e)}function P(s){try{return/(checkout|payment|subscribe|billing|order|3ds|stripe|paypal)/i.test(String(s||""))}catch{return!1}}function R(s){let p=(location.pathname+" "+location.href).toLowerCase(),v=(typeof s=="string"?s:s?.innerText||s?.getAttribute?.("aria-label")||s?.getAttribute?.("data-elt")||s?.getAttribute?.("data-testid")||"").toLowerCase(),c=p+" "+v;return/(confirm|success|complete|thank)/i.test(c)?"payment_confirm":/(payment|card|cvv|cvc|3ds|stripe|paypal)/i.test(c)?"payment_form":/(plan|pricing|choose|select)/i.test(c)?"plan_select":(/(checkout|subscribe|billing|order)/i.test(c),"checkout_start")}function q(s,p,v){let c=`${T()}|${s}|${p}|${v||""}`,y=t.now(),g=h.get(c)||0;return y-g<u?!1:(h.set(c,y),!0)}function O(s,p,v,c={}){if(!i())return;let y=T();q(s,p,v)&&(t.enqueue(t.buildEvent("checkout",{_event_id:t.uuid(),element_id:v||null,checkout_id:y,checkout_step:s,status:p,...c})),s==="payment_confirm"&&p==="success"&&I())}function W(){if(window.__pt_checkout_fetch_patched)return;window.__pt_checkout_fetch_patched=!0;let s=window.fetch;typeof s=="function"&&(window.fetch=async function(...p){let v=performance.now(),c=p[0],y=typeof c=="string"?c:c?.url,g;try{return g=await s.apply(this,p),g}finally{try{if(!i())return;if(y&&P(y)){let a=Math.round(performance.now()-v),E=!!(g&&g.ok),r=R(String(y));O(r,E?"success":"fail","checkout_network",{checkout_latency_ms:a,checkout_url_hint:String(y).slice(0,300)})}}catch{}}})}function N(){if(window.__pt_checkout_xhr_patched)return;window.__pt_checkout_xhr_patched=!0;let s=window.XMLHttpRequest;if(!s||!s.prototype)return;let p=s.prototype.open,v=s.prototype.send;s.prototype.open=function(c,y){return this.__pt_checkout_url=y,p.apply(this,arguments)},s.prototype.send=function(){let c=performance.now(),y=this.__pt_checkout_url,g=()=>{try{if(!i())return;if(y&&P(y)){let a=Math.round(performance.now()-c),E=this.status>=200&&this.status<300,r=R(String(y));O(r,E?"success":"fail","checkout_network",{checkout_latency_ms:a,checkout_url_hint:String(y).slice(0,300),xhr_status:this.status||null})}}catch{}};return this.addEventListener("load",g),this.addEventListener("error",g),this.addEventListener("abort",g),v.apply(this,arguments)}}function _(){document.addEventListener("click",s=>{try{if(!i())return;let p=s.target?.closest?.("button,a,[role='button'],[role='link'],[data-elt],[data-testid]")||null;if(!p)return;let v=(p.getAttribute?.("data-elt")||p.getAttribute?.("data-testid")||p.getAttribute?.("aria-label")||p.innerText||"").toLowerCase();if(!/(checkout|pay|subscribe|payment|plan|pricing|order|buy|purchase)/i.test(v))return;let c=R(p),y=t.getElementId(p);O(c,"start",y)}catch{}},!0),document.addEventListener("submit",s=>{try{if(!i())return;let p=s.target;if(!p||p.nodeType!==1)return;let v=(p.innerText||"").toLowerCase();if(!(/(card|cvv|cvc|expiry|expiration|3ds|stripe|paypal|payment)/i.test(v)||/payment/i.test(location.pathname+" "+location.href)))return;O("payment_form","start","payment_form_submit")}catch{}},!0)}return{init(s){t=s,W(),N(),_()},onConfigChange(){}}}function kt(t){if(!Array.isArray(t))return;let[n,e]=t;if(n==="__meta"){o.meta.project_id=e?.project_id||o.meta.project_id,o.meta.cdnBase=e?.cdnBase||o.meta.cdnBase,o.meta.tagVersion=e?.tagVersion||o.meta.tagVersion;return}if(n==="config"){if(!e)return;if(e.collectUrl&&(o.config.collectUrl=e.collectUrl),typeof e.debug=="boolean"&&(o.config.debug=e.debug),typeof e.trackPageViews=="boolean"&&(o.config.trackPageViews=e.trackPageViews),typeof e.trackClicks=="boolean"&&(o.config.trackClicks=e.trackClicks),typeof e.trackScroll=="boolean"&&(o.config.trackScroll=e.trackScroll),typeof e.trackErrors=="boolean"&&(o.config.trackErrors=e.trackErrors),typeof e.includeQueryHash=="boolean"&&(o.config.includeQueryHash=e.includeQueryHash),typeof e.scrollContainerSelector=="string"&&(o.config.scrollContainerSelector=e.scrollContainerSelector||null,Q()),typeof e.sampleRate=="number"&&(o.config.sampleRate=Math.max(0,Math.min(1,e.sampleRate)),St()),e.plugins&&typeof e.plugins=="object"){o.config.plugins=o.config.plugins||{};for(let u in e.plugins)typeof e.plugins[u]=="boolean"&&(o.config.plugins[u]=e.plugins[u])}e.cards&&typeof e.cards=="object"&&(o.config.cards=o.config.cards||{},Object.assign(o.config.cards,e.cards)),e.search&&typeof e.search=="object"&&(o.config.search=o.config.search||{},Object.assign(o.config.search,e.search)),e.ads&&typeof e.ads=="object"&&(o.config.ads=o.config.ads||{},Object.assign(o.config.ads,e.ads)),Et();return}if(n==="consent"){e&&typeof e.analytics=="boolean"&&(o.config.consentAnalytics=e.analytics),Et();return}if(n==="setUserId"){qt(e);return}if(n==="event"){if(!e)return;let u=e.type||e.event_name;if(!u)return;let h=e.payload||e.properties||{},i=typeof e.event_ts=="number"?e.event_ts:void 0;B(j(u,{_event_id:V(),...h},{event_ts:i}));return}n==="flush"&&$({reason:"manual"})}function ee(){o.entryReferrer=document.referrer||null,o.currentUrl=nt(),o.previousUrl=null,bt(),St();let t=window[lt]=window[lt]||[];t.forEach(kt);let n=t.push.bind(t);t.push=function(...e){return e.forEach(kt),n(...e)},Kt(),Ft(),Yt(),o.config.trackClicks&&document.addEventListener("click",jt,!0),o.config.trackScroll&&(o.__pt_scrollRootEl=ct(),zt(),setTimeout(()=>Q(),800),setTimeout(()=>Q(),2e3)),window.addEventListener("pagehide",()=>$({reason:"pagehide"})),J(Gt()),J(Zt()),J(Jt()),J(te()),Qt(),o.config.trackPageViews&&B(j("page_view",{trigger:"initial",_event_id:V()},{previous_url:null})),H("initialized",{project_id:o.meta.project_id,collectUrl:o.config.collectUrl,consent:o.config.consentAnalytics,sampledIn:o.sampledIn,includeQueryHash:o.config.includeQueryHash,plugins:o.config.plugins,scrollRoot:(()=>{let e=st();return e===document.scrollingElement?"document.scrollingElement":e?.tagName||"unknown"})()})}ee()})();})();
