(()=>{(()=>{let Y="0.2.2",R="_ptq";if(window.__pt_sdk_loaded)return;window.__pt_sdk_loaded=Y;let ee="__pt_anonymous_id",X="__pt_user_id",te="__pt_session_id",ne="__pt_session_last",he=30*60*1e3,re=200,pe=5e3,_e=[25,50,75,100],ie=80,n={meta:{project_id:null,cdnBase:null,tagVersion:null},config:{collectUrl:null,debug:!1,consentAnalytics:!0,trackPageViews:!0,trackClicks:!0,trackScroll:!0,trackErrors:!0,sampleRate:1,useBeaconOnUnload:!0,includeQueryHash:!1,plugins:{search:!1,ads:!1},search:{minEmitMs:350,maxWaitMs:4500,quietDebounceMs:220,recheckIntervalMs:300,firstFallbackMs:2200,scopeSelector:"main",resultItemSelector:"article,[data-article-id],[data-content-id],[data-result],.search-result,.result,[data-testid*='result']",adExcludeSelector:"[data-ad-id],[data-ad-slot],[data-ad-provider],[role='advertisement'],iframe"},ads:{threshold:.5,minVisibleMs:300,minViewableMs:1e3,rescanIntervalMs:2e3,rescanTicks:15,containerSelector:"[data-ad-id],[data-ad-slot],[data-ad-provider],[role='advertisement'],iframe",dataSelector:"[data-ad-id],[data-ad-slot],[data-ad-provider]"}},sampleSeed:null,sampledIn:!0,userId:null,entryReferrer:null,currentUrl:null,previousUrl:null,webVitals:{}};function Q(){return Date.now()}function k(){return typeof crypto<"u"&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{let r=Math.random()*16|0;return(e==="x"?r:r&3|8).toString(16)})}function I(e){return e==null||(e=String(e).replace(/\s+/g," ").trim(),!e)?null:(e.length>ie&&(e=e.slice(0,ie)+"\u2026"),e=e.replace(/[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}/gi,"[redacted_email]"),e=e.replace(/\+?\d[\d\s\-()]{7,}\d/g,"[redacted_phone]"),e)}function oe(e){try{return localStorage.getItem(e)}catch{return null}}function ae(e,r){try{localStorage.setItem(e,r)}catch{}}function ye(e){try{localStorage.removeItem(e)}catch{}}function se(e){try{return sessionStorage.getItem(e)}catch{return null}}function ce(e,r){try{sessionStorage.setItem(e,r)}catch{}}function be(){let e=oe(ee);return e||(e=k(),ae(ee,e)),e}function ve(){try{let e=Q(),r=Number(se(ne)||0),t=se(te);return(!t||!r||e-r>he)&&(t=k(),ce(te,t)),ce(ne,String(e)),t}catch{return k()}}function le(){if(n.userId)return n.userId;let e=oe(X);return n.userId=e?String(e):null,n.userId}function we(e){if(e==null||e===""){n.userId=null,ye(X);return}n.userId=String(e),ae(X,n.userId)}function T(){if(n.config.includeQueryHash)return window.location.href;let e=new URL(window.location.href);return e.search="",e.hash="",e.toString()}function Se(){return{ua:navigator.userAgent,language:navigator.language,timezone:Intl.DateTimeFormat().resolvedOptions().timeZone,screen:{w:window.screen.width,h:window.screen.height,dpr:window.devicePixelRatio||1},viewport:{w:window.innerWidth,h:window.innerHeight},sdk_version:Y,tag_version:n.meta.tagVersion||null}}function A(e,r={},t={}){let s=T(),d=t.previous_url!==void 0?t.previous_url:n.previousUrl||null;return{project_id:n.meta.project_id,event_name:e,event_ts:Q(),anonymous_id:be(),session_id:ve(),user_id:le(),page_url:s,page_path:window.location.pathname,page_title:document.title,referrer:n.entryReferrer||document.referrer||null,previous_url:d,context:Se(),properties:r,web_vitals:n.webVitals||{}}}let O=[],P=null;function V(...e){n.config.debug&&console.log("[pt-sdk]",...e)}function ue(){return n.sampledIn&&n.config.consentAnalytics!==!1&&!!n.meta.project_id&&!!n.config.collectUrl}function L(e){ue()&&(O.push(e),O.length>=20?B({reason:"size"}):Ee())}function Ee(){P||(P=setTimeout(()=>{P=null,B({reason:"timer"})},pe))}function ke(){let e=n.config.collectUrl;try{let r=new URL(e);return n.meta.project_id&&!r.searchParams.has("siteId")&&r.searchParams.set("siteId",n.meta.project_id),r.toString()}catch{return e}}function xe(e,{useBeacon:r=!1}={}){let t=ke();if(window.__pt_debug_events=window.__pt_debug_events||[],window.__pt_debug_events.push(e),r&&navigator.sendBeacon)try{let s=new Blob([JSON.stringify(e)],{type:"application/json"});navigator.sendBeacon(t,s);return}catch{}fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e),keepalive:!0}).catch(()=>{})}function B({reason:e}={}){if(P&&(clearTimeout(P),P=null),!O.length||!ue())return;let r=O.splice(0,O.length),t=[];for(let d=0;d<r.length;d+=re)t.push(r.slice(d,d+re));let s=n.config.useBeaconOnUnload&&(e==="pagehide"||e==="hidden");t.forEach(d=>{let l={project_id:n.meta.project_id,sent_at:Q(),events:d};xe(l,{useBeacon:s})})}function Ae(e){if(!e||!e.tagName)return null;let r=[],t=e;for(let s=0;s<4&&t&&t.tagName;s++){let d=t.tagName.toLowerCase();if(t.id){d+=`#${t.id}`,r.unshift(d);break}t.classList&&t.classList.length&&(d+="."+Array.from(t.classList).slice(0,2).join(".")),r.unshift(d),t=t.parentElement}return r.join(">")}function Ce(e){try{let r=2166136261;for(let t=0;t<e.length;t++)r^=e.charCodeAt(t),r=r+((r<<1)+(r<<4)+(r<<7)+(r<<8)+(r<<24))>>>0;return r.toString(36)}catch{return String(Math.floor(Math.random()*1e9)).toString(36)}}function Z(e){let r=e?.closest?.("a,button,input,textarea,select,[role='button'],[role='link'],[data-elt]")||e;if(!r)return null;let t=r.closest?.("[data-elt]")||r,s=t.getAttribute?.("data-elt")||t.getAttribute?.("data-testid")||t.getAttribute?.("id")||t.getAttribute?.("aria-label")||null;if(s&&String(s).trim())return I(String(s).trim())||String(s).trim();let d=Ae(t);return d?`e_${Ce(d)}`:null}function Ie(e){if(!n.config.trackClicks)return;let r=Z(e.target),t=e.target?.closest?.("a,button,input,textarea,select,[role='button'],[role='link'],[data-elt]")||e.target;L(A("click",{_event_id:k(),element_id:r,element_type:t?.tagName?t.tagName.toLowerCase():null,element_role:t?.getAttribute?.("role")||t?.getAttribute?.("data-role")||null,x:e.clientX,y:e.clientY,button:e.button}))}let J=new Set;function Le(){let e=document.documentElement,r=e.scrollTop||document.body.scrollTop||0,t=e.scrollHeight||document.body.scrollHeight||0,s=e.clientHeight||1;return Math.max(0,Math.min(100,r/Math.max(1,t-s)*100))}function Ue(){if(!n.config.trackScroll)return;let e=Le();for(let r of _e)e>=r&&!J.has(r)&&(J.add(r),L(A("scroll",{_event_id:k(),element_id:"page",scroll_depth:r})))}function Te(){L(A("visibility",{_event_id:k(),state:document.visibilityState})),document.visibilityState==="hidden"&&B({reason:"hidden"})}function Me(){try{let e=performance.getEntriesByType("navigation")[0];if(e&&e.responseStart&&(n.webVitals.ttfb=Math.round(e.responseStart)),window.PerformanceObserver){new PerformanceObserver(o=>{o.getEntries().forEach(g=>{g.name==="first-contentful-paint"&&(n.webVitals.fcp=Math.round(g.startTime))})}).observe({type:"paint",buffered:!0}),new PerformanceObserver(o=>{let g=o.getEntries(),h=g[g.length-1];h&&(n.webVitals.lcp=Math.round(h.startTime))}).observe({type:"largest-contentful-paint",buffered:!0});let s=0;new PerformanceObserver(o=>{o.getEntries().forEach(g=>{g.hadRecentInput||(s+=g.value)}),n.webVitals.cls=Number(s.toFixed(4))}).observe({type:"layout-shift",buffered:!0}),new PerformanceObserver(o=>{let g=o.getEntries()[0];g&&(n.webVitals.fid=Math.round(g.processingStart-g.startTime))}).observe({type:"first-input",buffered:!0})}}catch{}}function de(){(n.sampleSeed===null||n.sampleSeed===void 0)&&(n.sampleSeed=Math.random());let e=typeof n.config.sampleRate=="number"?n.config.sampleRate:1,r=Math.max(0,Math.min(1,e));n.sampledIn=n.sampleSeed<r}function Re(){let e=new Set,r=l=>{try{let o=JSON.stringify(l);return o.length>800?o.slice(0,800):o}catch{return String(l)}},t=l=>{try{if(l==null)return null;let o=String(l).trim();return o?(o.length>500&&(o=o.slice(0,500)+"\u2026"),o):null}catch{return null}},s=(l,o,g)=>{try{let h=g||l||o?.fileName||o?.sourceURL||o?.scriptURL||o?.resourceUrl||null;if(h)return h;let x=String(o?.stack||"");if(!x)return null;let y=x.match(/(https?:\/\/[^\s)]+|file:\/\/[^\s)]+)[:)]?\d*[:)]?\d*/i);if(y&&y[1])return y[1];let E=x.match(/(\b\/[^\s)]+):\d+:\d+/);return E&&E[1]?E[1]:null}catch{return null}},d=l=>{let o=r(l);e.has(o)||(e.add(o),logEvent(A("error",l)))};window.addEventListener("error",l=>{try{if(!l.message&&(l.target||l.srcElement)){let h=l.target||l.srcElement,x=(h?.tagName||"").toLowerCase()||null,y=h?.currentSrc||h?.src||h?.href||h?.getAttribute?.("src")||h?.getAttribute?.("href")||null,E=t(y),U=t(s(null,null,E));d({error_type:"resource",message:"resource_load_error",resource_tag:x,resource_url:E,source_url:U,element_id:Z(h)||null,is_fatal:!1});return}let g=t(s(l.filename,l.error,null))||t(l.filename)||null;d({error_type:"js_exception",message:I(l.message)||"js_error",source_url:g,line:Number.isFinite(l.lineno)?l.lineno:null,column:Number.isFinite(l.colno)?l.colno:null,stack:I(l.error?.stack)||null,is_fatal:!1})}catch{d({error_type:"js_exception",message:"js_error",source_url:null,is_fatal:!1})}},!0),window.addEventListener("unhandledrejection",l=>{try{let o=l.reason,g=o?.message||(typeof o=="string"?o:null)||String(o),h=t(s(null,o,null))||null;d({error_type:"unhandledrejection",message:I(g)||"unhandled_promise",source_url:h,stack:I(o?.stack)||null,is_fatal:!1})}catch{d({error_type:"unhandledrejection",message:"unhandled_promise",source_url:null,is_fatal:!1})}}),window.addEventListener("rejectionhandled",l=>{try{let o=l.reason,g=o?.message||(typeof o=="string"?o:null)||String(o),h=t(s(null,o,null))||null;d({error_type:"rejectionhandled",message:I(g)||"rejection_handled_late",source_url:h,stack:I(o?.stack)||null,is_fatal:!1})}catch{d({error_type:"rejectionhandled",message:"rejection_handled_late",source_url:null,is_fatal:!1})}})}let W=[];function fe(e){e&&typeof e.init=="function"&&W.push(e)}function Pe(){let e={state:n,enqueue:L,buildEvent:A,uuid:k,sanitizeText:I,getElementId:Z,dbg:V,now:Q};W.forEach(r=>{try{r.init(e)}catch(t){V("plugin init failed",t)}})}function ge(){W.forEach(e=>{try{e.onConfigChange?.(n.config)}catch(r){V("plugin onConfigChange failed",r)}})}function Ne(e,r,t){W.forEach(s=>{try{s.onRouteChange?.({kind:e,prevUrl:r,nextUrl:t})}catch(d){V("plugin onRouteChange failed",d)}})}function je(){let e=null,r=null,t=null,s=null,d=null,l=null,o=null,g=null,h={query:null,results_count:0,search_latency_ms:null},x=[/doubleclick\.net/i,/googlesyndication\.com/i,/adservice\.google/i,/googleadservices\.com/i,/gampad\/ads/i,/adnxs\.com/i,/criteo/i,/pubmatic\.com/i,/openx\.net/i];function y(){return!!e?.state?.config?.plugins?.search}function E(){try{if(/search/i.test(location.pathname)||/search/i.test(location.href))return!0;let i=location.search||"";return/[?&](q|query|search)=/i.test(i)}catch{return!1}}function U(i){let c=(i?.tagName||"").toLowerCase();if(c!=="input"&&c!=="textarea")return!1;let a=(i.getAttribute?.("type")||"").toLowerCase(),u=i.getAttribute?.("role")||"",S=i.getAttribute?.("name")||"",b=i.getAttribute?.("placeholder")||"";return u==="searchbox"||a==="search"||/search/i.test(S)||/search/i.test(b)}function G(i){try{let c=i?.closest?.("form")||null;if(c){let a=Array.from(c.querySelectorAll("input,textarea")).find(U);if(a)return a}return Array.from(document.querySelectorAll("input,textarea")).find(U)||null}catch{return null}}function N(i){try{if(!i)return!1;let c=(i.tagName||"").toLowerCase();if(!["button","a","div","span"].includes(c))return!1;let a=(i.getAttribute?.("type")||"").toLowerCase(),u=(i.getAttribute?.("role")||"").toLowerCase(),S=(i.getAttribute?.("aria-label")||"").toLowerCase(),b=(i.getAttribute?.("title")||"").toLowerCase(),v=(i.getAttribute?.("data-elt")||i.getAttribute?.("data-testid")||"").toLowerCase(),C=(i.innerText||"").toLowerCase(),q=`${S} ${b} ${v} ${C}`.trim();return c==="button"&&(a==="submit"||a==="button")?/search|find|go/.test(q):u==="button"||u==="link"?/search|find|go/.test(q):c==="a"?/search|find|go/.test(q):!1}catch{return!1}}function H(i){try{if(!i||i.hidden)return!1;let c=window.getComputedStyle?getComputedStyle(i):null;if(c&&(c.display==="none"||c.visibility==="hidden"||c.opacity==="0")||i.getClientRects&&i.getClientRects().length===0)return!1;let a=i.getBoundingClientRect?.();return a?a.width>0&&a.height>0:!1}catch{return!0}}function M(i){try{if(!i)return!1;let c=e.state.config.search?.adExcludeSelector||"[data-ad-id],[data-ad-slot],[data-ad-provider],[role='advertisement'],iframe";if(c&&(i.matches?.(c)||i.closest?.(c)))return!0;let a=i.tagName?.toLowerCase()==="iframe"?i:i.closest?.("iframe");if(a){let q=a.getAttribute("src")||"";if(q&&x.some(Be=>Be.test(q)))return!0}let u=(i.className||"").toString().toLowerCase(),S=(i.id||"").toString().toLowerCase(),b=(i.getAttribute?.("aria-label")||"").toLowerCase(),v=(i.getAttribute?.("data-testid")||"").toLowerCase(),C=`${u} ${S} ${b} ${v}`;return!!/\b(ad|ads|advert|advertisement|sponsor|sponsored|promoted|promo)\b/i.test(C)}catch{return!1}}function j(i){let a=(e.state.config.search||{}).resultItemSelector||"article,[data-article-id],[data-content-id]";return i&&i.closest?.(a)||null}function F(){try{let i=e.state.config.search||{},c=document.querySelector(i.scopeSelector||"main")||document.body||document.documentElement,a=i.resultItemSelector||"article,[data-article-id],[data-content-id]",u=Array.from(c.querySelectorAll(a)),S=new Set;for(let b of u){if(!b||!H(b)||b.closest?.("header,nav,footer")||M(b))continue;let v=b.getBoundingClientRect?.();v&&(v.width<80||v.height<40)||S.add(b)}return S.size}catch{return 0}}function z(){try{let i=e.state.config.search||{},c=document.querySelector(i.scopeSelector||"main")||document.body||document.documentElement,a=i.resultItemSelector||"article,[data-article-id],[data-content-id]",u=Array.from(c.querySelectorAll(a)),S=[],b=new Set;for(let v of u){if(!v||b.has(v)||!H(v)||v.closest?.("header,nav,footer")||M(v))continue;let C=v.getBoundingClientRect?.();C&&(C.width<80||C.height<40)||(b.add(v),S.push(v))}return S}catch{return[]}}function $(){if(l){try{l.disconnect()}catch{}l=null}o&&(clearTimeout(o),o=null),g&&(clearTimeout(g),g=null)}function D(){r=null,t=null,s=null,d=null,$()}function f(i=!1){if(!r||!t)return!1;let c=e.state.config.search||{},a=Math.max(0,e.now()-t),u=F();return i||u>0&&a>=(c.minEmitMs??350)||a>=(c.maxWaitMs??4500)?(h={query:d||"",results_count:u,search_latency_ms:Math.round(a)},e.enqueue(e.buildEvent("search",{_event_id:e.uuid(),element_id:s||"search_input",query:h.query,results_count:h.results_count,search_latency_ms:h.search_latency_ms})),D(),!0):!1}function _(){if(l)return;let i=e.state.config.search||{},c=document.querySelector(i.scopeSelector||"main")||document.body||document.documentElement;l=new MutationObserver(()=>{r&&(o&&clearTimeout(o),o=setTimeout(()=>{f(!1)},i.quietDebounceMs??220))});try{l.observe(c,{childList:!0,subtree:!0,attributes:!0})}catch{}}function m(){let i=e.state.config.search||{};if(!r||!t)return;let c=Math.max(0,e.now()-t),a=i.maxWaitMs??4500;if(!f(!1)){if(c>=a){f(!0);return}g=setTimeout(m,i.recheckIntervalMs??300)}}function p(i){if(!y())return;let c=e.sanitizeText(i?.value)||"";if(!c)return;r=e.uuid(),t=e.now(),s=e.getElementId(i)||"search_input",d=c,$(),_();let a=e.state.config.search||{};g=setTimeout(m,a.firstFallbackMs??2200)}function w(i){if(!y()||!E()||!h||(h.results_count||0)<=0)return;let c=i.target,a=c?.closest?.("a,button,[role='link'],[role='button']")||c;if(!a||M(a))return;let u=j(a);if(!u||M(u))return;let b=z().indexOf(u),v=b>=0?b+1:null,C=u.getAttribute?.("data-article-id")||u.getAttribute?.("data-content-id")||u.getAttribute?.("data-result-id")||a.getAttribute?.("href")||null;e.enqueue(e.buildEvent("search_result_click",{_event_id:e.uuid(),element_id:e.getElementId(a),query:h.query,clicked_result_id:C,result_rank:v,results_count:h.results_count}))}return{init(i){e=i,document.addEventListener("keydown",c=>{if(!y())return;let a=c.target;U(a)&&c.key==="Enter"&&p(a)},!0),document.addEventListener("submit",c=>{if(!y())return;let a=c.target;if(!a||a.nodeType!==1)return;let u=Array.from(a.querySelectorAll("input,textarea")).find(U);u&&p(u)},!0),document.addEventListener("click",c=>{if(!y())return;let a=c.target?.closest?.("button,a,[role='button'],[role='link'],div,span");if(!a||!N(a))return;let u=G(a);u&&p(u)},!0),document.addEventListener("click",w,!0)},onRouteChange(){D(),h={query:null,results_count:0,search_latency_ms:null}},onConfigChange(){y()||D()}}}function qe(){let e=null,r=[/doubleclick\.net/i,/googlesyndication\.com/i,/adservice\.google/i,/googleadservices\.com/i,/gampad\/ads/i,/adnxs\.com/i,/criteo/i,/pubmatic\.com/i,/openx\.net/i],t=null,s=null,d=null,l=null,o=0,g=new Set,h=new WeakSet,x=new WeakSet,y=new Map;function E(){return!!e?.state?.config?.plugins?.ads}function U(f){try{let _=f?.tagName?.toLowerCase()==="iframe"?f:f?.closest?.("iframe");if(!_)return!1;let m=_.getAttribute("src")||"";return m?r.some(p=>p.test(m)):!1}catch{return!1}}function G(f){let m=(e.state.config.ads||{}).dataSelector||"[data-ad-id],[data-ad-slot],[data-ad-provider]";return f?.closest?.(m)||f?.closest?.("[role='advertisement']")||(f?.tagName?.toLowerCase()==="iframe"?f:f?.closest?.("iframe"))||null}function N(f){try{if(!f)return!1;let m=(e.state.config.ads||{}).dataSelector||"[data-ad-id],[data-ad-slot],[data-ad-provider]";return!!(f.closest?.(m)||f.closest?.("[role='advertisement']")||U(f))}catch{return!1}}function H(f){let m=(e.state.config.ads||{}).dataSelector||"[data-ad-id],[data-ad-slot],[data-ad-provider]",p=G(f);if(!p)return null;let w=p.closest?.(m)||(p.matches?.(m)?p:null),i=p.tagName?.toLowerCase()==="iframe"?p:p.querySelector?.("iframe")||null,c=p.closest?.("[role='advertisement']")||(p.matches?.("[role='advertisement']")?p:null),a=e.getElementId(w||c||i||p);return a?{element_id:a,ad_id:w?.getAttribute?.("data-ad-id")||null,ad_slot:w?.getAttribute?.("data-ad-slot")||null,ad_provider:w?.getAttribute?.("data-ad-provider")||null}:null}function M(f){try{let _=f.getBoundingClientRect?.();return _?_.width>=40&&_.height>=40:!1}catch{return!1}}function j(f){try{if(!t||!f||h.has(f))return;h.add(f),t.observe(f)}catch{}}function F(){if(!E())return;let _=(e.state.config.ads||{}).containerSelector||"[data-ad-id],[data-ad-slot],[data-ad-provider],[role='advertisement'],iframe";try{document.querySelectorAll(_).forEach(m=>{if(!(g.size>900)&&N(m)){if(d&&!x.has(m))try{d.observe(m),x.add(m)}catch{}M(m)&&g.add(m)}})}catch{}}function z(){if(!E()||t)return;let f=e.state.config.ads||{},_=f.threshold??.5;t=new IntersectionObserver(m=>{for(let p of m){let w=p.target;if(!w||!N(w))continue;let i=H(w);if(!i?.element_id)continue;let c=p.intersectionRatio||0,a=p.isIntersecting&&c>=_;y.has(i.element_id)||y.set(i.element_id,{impTimer:null,impSent:!1,viewStart:null,viewableSent:!1,lastRatio:0});let u=y.get(i.element_id);if(u.lastRatio=c,a&&!u.impSent&&!u.impTimer&&(u.impTimer=setTimeout(()=>{u.impSent=!0,u.impTimer=null,e.enqueue(e.buildEvent("ad_impression",{_event_id:e.uuid(),element_id:i.element_id,ad_id:i.ad_id,ad_slot:i.ad_slot,ad_provider:i.ad_provider}))},f.minVisibleMs??300)),!a&&u.impTimer&&(clearTimeout(u.impTimer),u.impTimer=null),a)u.viewStart===null&&(u.viewStart=e.now());else if(u.viewStart!==null&&!u.viewableSent){let S=e.now()-u.viewStart;u.viewStart=null,S>=(f.minViewableMs??1e3)&&(u.viewableSent=!0,e.enqueue(e.buildEvent("ad_viewable",{_event_id:e.uuid(),element_id:i.element_id,ad_id:i.ad_id,ad_slot:i.ad_slot,ad_provider:i.ad_provider,view_time_ms:S,viewable_percent:Math.round(u.lastRatio*100)})))}y.set(i.element_id,u)}},{threshold:[_]});try{d=new ResizeObserver(m=>{for(let p of m){let w=p.target;!w||!N(w)||M(w)&&(g.add(w),j(w))}})}catch{d=null}F(),g.forEach(m=>j(m)),s=new MutationObserver(()=>{F(),g.forEach(m=>j(m))});try{s.observe(document.documentElement,{childList:!0,subtree:!0,attributes:!0})}catch{}o=0,l=setInterval(()=>{o++,F(),g.forEach(m=>j(m)),o>=(f.rescanTicks??15)&&(clearInterval(l),l=null)},f.rescanIntervalMs??2e3)}function $(){try{s&&s.disconnect()}catch{}s=null;try{t&&t.disconnect()}catch{}t=null;try{d&&d.disconnect()}catch{}d=null,l&&(clearInterval(l),l=null),g.clear(),y.clear()}function D(f){if(!E())return;let _=f.target,m=_?.closest?.("a,button,input,textarea,select,[role='button'],[role='link'],[data-elt],iframe,[role='advertisement'],[data-ad-id],[data-ad-slot],[data-ad-provider]")||_;if(!m||!N(m))return;let p=H(m);p?.element_id&&e.enqueue(e.buildEvent("ad_click",{_event_id:e.uuid(),element_id:p.element_id,ad_id:p.ad_id,ad_slot:p.ad_slot,ad_provider:p.ad_provider}))}return{init(f){e=f,document.addEventListener("click",D,!0),E()&&z()},onConfigChange(){E()?z():$()},onRouteChange(){E()&&($(),z())}}}function K(e,r){let t=T(),s=r||n.currentUrl||null;J.clear(),n.previousUrl=s,n.currentUrl=t,Ne(e,s,t),L(A("route",{kind:e,_event_id:k()},{previous_url:s})),n.config.trackPageViews&&L(A("page_view",{trigger:e,_event_id:k()},{previous_url:s}))}function Oe(){let e=history.pushState,r=history.replaceState;history.pushState=function(...t){let s=n.currentUrl||T(),d=e.apply(this,t);return setTimeout(()=>K("pushState",s),0),d},history.replaceState=function(...t){let s=n.currentUrl||T(),d=r.apply(this,t);return setTimeout(()=>K("replaceState",s),0),d},window.addEventListener("popstate",()=>{let t=n.currentUrl||T();setTimeout(()=>K("popstate",t),0)}),window.addEventListener("hashchange",()=>{let t=n.currentUrl||T();setTimeout(()=>K("hashchange",t),0)})}function me(e){if(!Array.isArray(e))return;let[r,t]=e;if(r==="__meta"){n.meta.project_id=t?.project_id||n.meta.project_id,n.meta.cdnBase=t?.cdnBase||n.meta.cdnBase,n.meta.tagVersion=t?.tagVersion||n.meta.tagVersion;return}if(r==="config"){if(!t)return;if(t.collectUrl&&(n.config.collectUrl=t.collectUrl),typeof t.debug=="boolean"&&(n.config.debug=t.debug),typeof t.trackPageViews=="boolean"&&(n.config.trackPageViews=t.trackPageViews),typeof t.trackClicks=="boolean"&&(n.config.trackClicks=t.trackClicks),typeof t.trackScroll=="boolean"&&(n.config.trackScroll=t.trackScroll),typeof t.trackErrors=="boolean"&&(n.config.trackErrors=t.trackErrors),typeof t.includeQueryHash=="boolean"&&(n.config.includeQueryHash=t.includeQueryHash),typeof t.sampleRate=="number"&&(n.config.sampleRate=Math.max(0,Math.min(1,t.sampleRate)),de()),t.plugins&&typeof t.plugins=="object"){n.config.plugins=n.config.plugins||{};for(let s in t.plugins)typeof t.plugins[s]=="boolean"&&(n.config.plugins[s]=t.plugins[s])}t.search&&typeof t.search=="object"&&(n.config.search=n.config.search||{},Object.assign(n.config.search,t.search)),t.ads&&typeof t.ads=="object"&&(n.config.ads=n.config.ads||{},Object.assign(n.config.ads,t.ads)),ge();return}if(r==="consent"){t&&typeof t.analytics=="boolean"&&(n.config.consentAnalytics=t.analytics),ge();return}if(r==="setUserId"){we(t);return}if(r==="event"){if(!t||!t.type)return;L(A(t.type,{_event_id:k(),...t.payload||{}}));return}r==="flush"&&B({reason:"manual"})}function Ve(){n.entryReferrer=document.referrer||null,n.currentUrl=T(),n.previousUrl=null,le(),de();let e=window[R]=window[R]||[];e.forEach(me);let r=e.push.bind(e);e.push=function(...t){return t.forEach(me),r(...t)},Me(),n.config.trackClicks&&document.addEventListener("click",Ie,!0),n.config.trackScroll&&window.addEventListener("scroll",Ue,{passive:!0}),document.addEventListener("visibilitychange",Te),window.addEventListener("pagehide",()=>B({reason:"pagehide"})),Oe(),Re(),fe(je()),fe(qe()),Pe(),n.config.trackPageViews&&L(A("page_view",{trigger:"initial",_event_id:k()},{previous_url:null})),window.PrimeTracker={identify(t){window[R].push(["setUserId",t])},track(t,s){window[R].push(["event",{type:t,payload:s}])},consent(t){window[R].push(["consent",{analytics:!!t}])},flush(){window[R].push(["flush"])},version:Y},V("initialized",{project_id:n.meta.project_id,collectUrl:n.config.collectUrl,consent:n.config.consentAnalytics,sampledIn:n.sampledIn,includeQueryHash:n.config.includeQueryHash,plugins:n.config.plugins})}Ve()})();})();
