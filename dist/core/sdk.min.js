(()=>{(()=>{let ae="__pt_sdk_loaded__";if(window[ae])return;window[ae]=!0;let ke="0.2.2",le="_ptq",ue="__pt_anonymous_id",ee="__pt_user_id",de="__pt_session_id",fe="__pt_session_last",Ae=30*60*1e3,me=200,Me=5e3,Ie=[25,50,75,100],he=80,r={meta:{project_id:null,cdnBase:null,tagVersion:null},config:{collectUrl:null,debug:!1,consentAnalytics:!0,trackPageViews:!0,trackClicks:!0,trackScroll:!0,trackErrors:!0,sampleRate:1,useBeaconOnUnload:!0,includeQueryHash:!1,scrollContainerSelector:null,plugins:{cards:!0,search:!1,ads:!1},cards:{threshold:.5,minVisibleMs:300,scopeSelector:"main",cardSelector:"article,[data-article-id],[data-content-id],[data-product-id],[data-item-id],[data-sku],.product,.product-card,.item,.card,[data-testid*='card']",adExcludeSelector:"[data-ad-id],[data-ad-slot],[data-ad-provider],[role='advertisement'],iframe",minW:120,minH:80},search:{minEmitMs:350,maxWaitMs:4500,quietDebounceMs:220,recheckIntervalMs:300,firstFallbackMs:1200,searchContextWindowMs:10*60*1e3,captureRequestWindowMs:2500,scopeSelector:"main",resultItemSelector:"article,[data-article-id],[data-content-id],[data-result],.search-result,.result,[data-testid*='result'],.product,.product-card,.item,.card,[data-product-id],[data-sku],[data-item-id]",adExcludeSelector:"[data-ad-id],[data-ad-slot],[data-ad-provider],[role='advertisement'],iframe"},ads:{threshold:.5,minVisibleMs:300,minViewableMs:1e3,rescanIntervalMs:2e3,rescanTicks:15,containerSelector:"[data-ad-id],[data-ad-slot],[data-ad-provider],[role='advertisement'],iframe",dataSelector:"[data-ad-id],[data-ad-slot],[data-ad-provider]"}},sampleSeed:null,sampledIn:!0,userId:null,entryReferrer:null,currentUrl:null,previousUrl:null,webVitals:{},__pt_scrollRootEl:null,__pt_scrollBound:!1,__pt_force_rescan_ts:0};function F(){return Date.now()}function V(){return typeof crypto<"u"&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{let n=Math.random()*16|0;return(e==="x"?n:n&3|8).toString(16)})}function K(e){return!e||typeof e!="string"||(e=e.replace(/\s+/g," ").trim(),!e)?null:(e.length>he&&(e=e.slice(0,he)+"\u2026"),e=e.replace(/[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}/gi,"[redacted_email]"),e=e.replace(/\+?\d[\d\s\-()]{7,}\d/g,"[redacted_phone]"),e)}function pe(e){try{return localStorage.getItem(e)}catch{return null}}function ge(e,n){try{localStorage.setItem(e,n)}catch{}}function Le(e){try{localStorage.removeItem(e)}catch{}}function _e(e){try{return sessionStorage.getItem(e)}catch{return null}}function ye(e,n){try{sessionStorage.setItem(e,n)}catch{}}function Re(){let e=pe(ue);return e||(e=V(),ge(ue,e)),e}function qe(){try{let e=F(),n=Number(_e(fe)||0),t=_e(de);return(!t||!n||e-n>Ae)&&(t=V(),ye(de,t)),ye(fe,String(e)),t}catch{return V()}}function be(){if(r.userId)return r.userId;let e=pe(ee);return r.userId=e?String(e):null,r.userId}function Te(e){if(e==null||e===""){r.userId=null,Le(ee);return}r.userId=String(e),ge(ee,r.userId)}function te(){if(r.config.includeQueryHash)return window.location.href;let e=new URL(window.location.href);return e.search="",e.hash="",e.toString()}function Ue(){return{ua:navigator.userAgent,language:navigator.language,timezone:Intl.DateTimeFormat().resolvedOptions().timeZone,screen:{w:window.screen.width,h:window.screen.height,dpr:window.devicePixelRatio||1},viewport:{w:window.innerWidth,h:window.innerHeight},sdk_version:ke,tag_version:r.meta.tagVersion||null}}function B(e,n={},t={}){let a=te(),m=t.previous_url!==void 0?t.previous_url:r.previousUrl||null,i=typeof t.event_ts=="number"?t.event_ts:F();return{project_id:r.meta.project_id,event_name:e,event_ts:i,anonymous_id:Re(),session_id:qe(),user_id:be(),page_url:a,page_path:window.location.pathname,page_title:document.title,referrer:r.entryReferrer||document.referrer||null,previous_url:m,context:Ue(),properties:n,web_vitals:r.webVitals||{}}}let Y=[],ne=null;function j(...e){r.config.debug&&console.log("[pt-sdk]",...e)}function ve(){return r.sampledIn&&r.config.consentAnalytics!==!1&&!!r.meta.project_id&&!!r.config.collectUrl}function W(e){if(ve()){if(r.config.debug)try{console.log("%cPT_EVT","font-weight:bold;color:#00b894",e.event_name,e)}catch{}Y.push(e),Y.length>=20?Q({reason:"size"}):Pe()}}function Pe(){ne||(ne=setTimeout(()=>{ne=null,Q({reason:"timer"})},Me))}function Oe(e,{useBeacon:n=!1}={}){if(window.__pt_debug_events=window.__pt_debug_events||[],window.__pt_debug_events.push(e),n&&navigator.sendBeacon)try{let t=new Blob([JSON.stringify(e)],{type:"application/json"}),a=navigator.sendBeacon(r.config.collectUrl,t);j("beacon sent:",a,e);return}catch(t){j("beacon failed, fallback to fetch",t)}fetch(r.config.collectUrl,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e),keepalive:!0}).then(async t=>{if(t.ok)j("collect ok:",t.status,"events:",e.events?.length);else{let a=await t.text().catch(()=>"");j("collect non-2xx:",t.status,a)}}).catch(t=>j("collect failed:",t))}function Q({reason:e}={}){if(!Y.length||!ve())return;let n=Y.splice(0,Y.length),t=[];for(let m=0;m<n.length;m+=me)t.push(n.slice(m,m+me));let a=r.config.useBeaconOnUnload&&(e==="pagehide"||e==="hidden");t.forEach(m=>{let i={project_id:r.meta.project_id,sent_at:F(),events:m};Oe(i,{useBeacon:a})})}function Ne(e){if(!e||!e.tagName)return null;let n=[],t=e;for(let a=0;a<4&&t&&t.tagName;a++){let m=t.tagName.toLowerCase();if(t.id){m+=`#${t.id}`,n.unshift(m);break}t.classList&&t.classList.length&&(m+="."+Array.from(t.classList).slice(0,2).join(".")),n.unshift(m),t=t.parentElement}return n.join(">")}function re(e){let n=e?.closest?.("a,button,input,textarea,select,[role='button'],[role='link'],[data-elt]")||e;if(!n)return null;let t=n.closest?.("[data-elt]")||n,a=t.getAttribute?.("data-elt")||t.getAttribute?.("data-testid")||t.getAttribute?.("aria-label")||Ne(t);return K(String(a||""))||a||null}function Ve(e){if(!r.config.trackClicks)return;let n=re(e.target),t=e.target?.closest?.("a,button,input,textarea,select,[role='button'],[role='link'],[data-elt]")||e.target;W(B("click",{_event_id:V(),element_id:n,element_type:t?.tagName?t.tagName.toLowerCase():null,element_role:t?.getAttribute?.("role")||t?.getAttribute?.("data-role")||null,x:e.clientX,y:e.clientY,button:e.button}))}let oe=new Set;function je(e){try{return(getComputedStyle(e).overflowY||"").toLowerCase()}catch{return""}}function we(e){try{if(!e||e===document.body||e===document.documentElement)return!1;let n=je(e);if(!(n==="auto"||n==="scroll"))return!1;let t=e.clientHeight||0,a=e.scrollHeight||0;return t<200?!1:a-t>80}catch{return!1}}function ie(){try{let n=r.config.scrollContainerSelector;if(n){let t=document.querySelector(n);if(t)return t}}catch{}let e=document.scrollingElement||document.documentElement;try{if(e&&e.scrollHeight-e.clientHeight>80)return e}catch{}try{let n=["#__next","#root","[role='main']","main",".layout",".app",".container"];for(let t of n){let a=document.querySelector(t);if(a&&we(a))return a}}catch{}try{let n=[],t=Array.from(document.body?.children||[]);for(let i of t)n.push(i);for(let i of t){let l=Array.from(i.children||[]).slice(0,12);for(let p of l)n.push(p)}let a=null,m=0;for(let i of n){if(!we(i))continue;let l=(i.scrollHeight||0)-(i.clientHeight||0);l>m&&(m=l,a=i)}if(a)return a}catch{}return e||document.documentElement}function se(){return r.__pt_scrollRootEl||(r.__pt_scrollRootEl=ie()),r.__pt_scrollRootEl}function De(){let e=se(),n=e===document.documentElement||e===document.body||e===document.scrollingElement,t=0,a=0,m=1;n?(t=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0,a=document.documentElement.scrollHeight||document.body.scrollHeight||0,m=window.innerHeight||document.documentElement.clientHeight||1):(t=e.scrollTop||0,a=e.scrollHeight||0,m=e.clientHeight||1);let i=Math.max(1,a-m),l=t/i*100;return Math.max(0,Math.min(100,l))}function X(){if(!r.config.trackScroll)return;let e=De(),n=Math.floor(e+.5);for(let t of Ie)n>=t&&!oe.has(t)&&(oe.add(t),W(B("scroll",{_event_id:V(),scroll_depth:t})))}function He(){if(!r.__pt_scrollBound){r.__pt_scrollBound=!0,window.addEventListener("scroll",X,{passive:!0,capture:!0});try{let e=se();!(e===document.documentElement||e===document.body||e===document.scrollingElement)&&e&&e.addEventListener&&e.addEventListener("scroll",X,{passive:!0,capture:!0})}catch{}}}function $(){try{let e=r.__pt_scrollRootEl,n=ie();r.__pt_scrollRootEl=n;let t=e===document.documentElement||e===document.body||e===document.scrollingElement,a=n===document.documentElement||n===document.body||n===document.scrollingElement;e&&!t&&e.removeEventListener&&e.removeEventListener("scroll",X,{capture:!0}),n&&!a&&n.addEventListener&&n.addEventListener("scroll",X,{passive:!0,capture:!0})}catch{}}function Be(){try{let e=performance.getEntriesByType("navigation")[0];if(e&&e.responseStart&&(r.webVitals.ttfb=Math.round(e.responseStart)),window.PerformanceObserver){new PerformanceObserver(l=>{l.getEntries().forEach(p=>{p.name==="first-contentful-paint"&&(r.webVitals.fcp=Math.round(p.startTime))})}).observe({type:"paint",buffered:!0}),new PerformanceObserver(l=>{let p=l.getEntries(),k=p[p.length-1];k&&(r.webVitals.lcp=Math.round(k.startTime))}).observe({type:"largest-contentful-paint",buffered:!0});let a=0;new PerformanceObserver(l=>{l.getEntries().forEach(p=>{p.hadRecentInput||(a+=p.value)}),r.webVitals.cls=Number(a.toFixed(4))}).observe({type:"layout-shift",buffered:!0}),new PerformanceObserver(l=>{let p=l.getEntries()[0];p&&(r.webVitals.fid=Math.round(p.processingStart-p.startTime))}).observe({type:"first-input",buffered:!0}),We()}}catch{}}function We(){try{let l=function(S,T){if(!S.length)return 0;let M=S.slice().sort((L,I)=>L-I),U=Math.min(M.length-1,Math.max(0,Math.ceil(T*M.length)-1));return M[U]||0},k=function(){p||(p=setTimeout(()=>{p=null;let S=l(t,.98),T=l(t,.95);r.webVitals.inp=S||0,r.webVitals.inp_p95=T||0,r.webVitals.inp_worst=i||0},400))},C=function(){let S=Date.now();for(let[T,M]of n.entries())S-M.lastSeen>=m&&(t.push(M.maxDur),t.length>a&&t.splice(0,t.length-a),n.delete(T),k())};if(!window.PerformanceObserver||r.__inpObserverStarted)return;r.__inpObserverStarted=!0;let e=new Set(["pointermove","mousemove","scroll","wheel","touchmove"]),n=new Map,t=[],a=2e3,m=2e3,i=0,p=null;r.__inpCleanupInterval=setInterval(C,1e3);let A=new PerformanceObserver(S=>{let T=Date.now();for(let M of S.getEntries()){if(!M||!M.interactionId||e.has(M.name))continue;let U=Math.round(M.duration||0);if(U<=0)continue;let L=M.interactionId,I=n.get(L);I?(U>I.maxDur&&(I.maxDur=U),I.lastSeen=T,n.set(L,I)):n.set(L,{maxDur:U,lastSeen:T}),U>i&&(i=U)}C()});try{A.observe({type:"event",buffered:!0,durationThreshold:40})}catch{A.observe({type:"event",buffered:!0})}}catch{}}function Se(){(r.sampleSeed===null||r.sampleSeed===void 0)&&(r.sampleSeed=Math.random());let e=typeof r.config.sampleRate=="number"?r.config.sampleRate:1,n=Math.max(0,Math.min(1,e));r.sampledIn=r.sampleSeed<n}function ze(){if(!r.config.trackErrors)return;let e=new Set,n=i=>{try{let l=JSON.stringify(i);return l.length>800?l.slice(0,800):l}catch{return String(i)}},t=i=>{try{if(i==null)return null;let l=String(i).trim();return l?(l.length>500&&(l=l.slice(0,500)+"\u2026"),l):null}catch{return null}},a=(i,l)=>{try{let p=i||l?.fileName||l?.sourceURL||l?.scriptURL||null;if(p)return p;let k=String(l?.stack||"");if(!k)return null;let C=k.match(/(https?:\/\/[^\s)]+|file:\/\/[^\s)]+)/i);if(C&&C[1])return C[1];let A=k.match(/(\b\/[^\s)]+):\d+:\d+/);return A&&A[1]?A[1]:null}catch{return null}},m=i=>{let l=n(i);e.has(l)||(e.add(l),W(B("error",{_event_id:V(),...i})))};window.addEventListener("error",i=>{try{if(!i.message&&(i.target||i.srcElement)){let C=i.target||i.srcElement,A=C?.currentSrc||C?.src||C?.href||C?.getAttribute?.("src")||C?.getAttribute?.("href")||null,S=t(A);m({error_type:"resource",message:"resource_load_error",source_url:S,resource_url:S,resource_tag:(C?.tagName||"").toLowerCase()||null,element_id:re(C)||null,is_fatal:!1});return}let p=K(i?.message)||"js_error",k=t(a(i?.filename,i?.error))||t(i?.filename)||null;m({error_type:"js",message:p,filename:i?.filename||null,lineno:i?.lineno||null,colno:i?.colno||null,source_url:k,is_fatal:!1})}catch{m({error_type:"js",message:"js_error",source_url:null,is_fatal:!1})}},!0),window.addEventListener("unhandledrejection",i=>{try{let l=i?.reason?.message||String(i?.reason||""),p=K(l)||"unhandled_promise",k=t(a(null,i?.reason))||null;m({error_type:"unhandledrejection",message:p,source_url:k,is_fatal:!1})}catch{m({error_type:"unhandledrejection",message:"unhandled_promise",source_url:null,is_fatal:!1})}})}function Fe(e){G.forEach(n=>{try{n.onPageContextChange?.(e)}catch(t){j("plugin onPageContextChange failed",t)}})}function Z(e){let n=te();n!==r.currentUrl&&(r.previousUrl=r.currentUrl,r.currentUrl=n,oe.clear(),$(),r.__pt_force_rescan_ts=F(),Fe(e),r.config.trackPageViews&&W(B("page_view",{trigger:e,_event_id:V()},{previous_url:r.previousUrl})))}function Ye(){if(window.__pt_spa_patched)return;window.__pt_spa_patched=!0;let e=history.pushState,n=history.replaceState;history.pushState=function(){let t=e.apply(this,arguments);return setTimeout(()=>Z("pushState"),0),t},history.replaceState=function(){let t=n.apply(this,arguments);return setTimeout(()=>Z("replaceState"),0),t},window.addEventListener("popstate",()=>Z("popstate")),window.addEventListener("hashchange",()=>Z("hashchange"))}let G=[];function ce(e){e&&typeof e.init=="function"&&G.push(e)}function Ke(){let e={state:r,enqueue:W,buildEvent:B,uuid:V,sanitizeText:K,getElementId:re,dbg:j,now:F};G.forEach(n=>{try{n.init(e)}catch(t){j("plugin init failed",t)}})}function Ee(){G.forEach(e=>{try{e.onConfigChange?.(r.config)}catch(n){j("plugin onConfigChange failed",n)}})}function Qe(){let e=null,n=null,t=null,a=null,m=null,i=0,l=new Set,p=new WeakSet,k=new WeakSet,C=new WeakMap;function A(){return e?.state?.config?.plugins?.cards!==!1}function S(h){try{if(!h||h.hidden)return!1;let w=window.getComputedStyle?getComputedStyle(h):null;if(w&&(w.display==="none"||w.visibility==="hidden"||w.opacity==="0")||h.getClientRects&&h.getClientRects().length===0)return!1;let E=h.getBoundingClientRect?.();return E?E.width>0&&E.height>0:!1}catch{return!0}}function T(h,w,E){try{let R=h.getBoundingClientRect?.();return R?R.width>=w&&R.height>=E:!1}catch{return!1}}function M(h,w){try{return w?!!(h?.matches?.(w)||h?.closest?.(w)):!1}catch{return!1}}function U(h){try{if(!h||h.nodeType!==1||h.closest("header,nav,footer"))return!1;let w=h.getBoundingClientRect?.();if(!w||w.width<160||w.height<100)return!1;let E=!!h.querySelector("a[href]");if(!E)return!1;let R=!!h.querySelector("img,picture,video"),d=!!h.querySelector("h1,h2,h3"),b=(h.innerText||"").trim(),g=b.length>=30,f=/\$\s?\d+|‚Ç¨\s?\d+|¬£\s?\d+|\b\d+\s?(usd|eur|gbp)\b/i.test(b);return R&&(d||g)||d&&g||f&&E}catch{return!1}}function L(){if(!A())return;let h=e.state.config.cards||{},w=document.querySelector(h.scopeSelector||"main")||document.body||document.documentElement,E=h.cardSelector||"article",R=h.adExcludeSelector||null,d=h.minW??120,b=h.minH??80,g=0;try{w.querySelectorAll(E).forEach(f=>{if(!(l.size>1200)&&S(f)&&T(f,d,b)&&!M(f,R)&&(l.add(f),g++,a&&!k.has(f)))try{a.observe(f),k.add(f)}catch{}})}catch{}if(g<5&&l.size<20)try{let f=w.querySelectorAll("article,li,section,div"),q=0;for(let o of f){if(q++,q>1800||l.size>1200)break;if(S(o)&&T(o,d,b)&&!M(o,R)&&U(o)&&(l.add(o),a&&!k.has(o)))try{a.observe(o),k.add(o)}catch{}}}catch{}}function I(h){try{if(!n||!h||p.has(h))return;p.add(h),n.observe(h)}catch{}}function D(){if(!A()||n)return;let h=e.state.config.cards||{},w=h.threshold??.5;n=new IntersectionObserver(E=>{for(let R of E){let d=R.target;if(!d)continue;let b=h.adExcludeSelector||null;if(M(d,b))continue;let g=R.isIntersecting&&(R.intersectionRatio||0)>=w,f=C.get(d);f||(f={timer:null,sent:!1,impression_id:null,lastRatio:0},C.set(d,f)),f.lastRatio=R.intersectionRatio||0,g&&!f.sent&&!f.timer&&(f.impression_id=f.impression_id||e.uuid(),f.timer=setTimeout(()=>{f.sent=!0,f.timer=null,e.enqueue(e.buildEvent("card_impression",{_event_id:e.uuid(),element_id:e.getElementId(d),impression_id:f.impression_id,viewport_percent:Math.round((f.lastRatio||0)*100)}))},h.minVisibleMs??300)),!g&&f.timer&&(clearTimeout(f.timer),f.timer=null),C.set(d,f)}},{threshold:[w]});try{a=new ResizeObserver(E=>{for(let R of E){let d=R.target;d&&(l.add(d),I(d))}})}catch{a=null}L(),l.forEach(E=>I(E)),t=new MutationObserver(()=>{L(),l.forEach(E=>I(E))});try{t.observe(document.documentElement,{childList:!0,subtree:!0,attributes:!0})}catch{}i=0,m=setInterval(()=>{i++,L(),l.forEach(E=>I(E)),i>=12&&(clearInterval(m),m=null)},1200)}function H(){try{t&&t.disconnect()}catch{}t=null;try{n&&n.disconnect()}catch{}n=null;try{a&&a.disconnect()}catch{}a=null,m&&(clearInterval(m),m=null),l.clear()}function O(){try{L(),l.forEach(h=>I(h))}catch{}m||(i=0,m=setInterval(()=>{i++,L(),l.forEach(h=>I(h)),i>=8&&(clearInterval(m),m=null)},1100))}return{init(h){e=h,A()&&D()},onConfigChange(){A()?D():H()},onPageContextChange(){A()&&O()}}}function Xe(){let e=null,n=null,t=null,a=null,m=null,i={query:null,results_count:null,search_latency_ms:null,ts:0};function l(){return!!e?.state?.config?.plugins?.search}function p(o){let u=(o?.tagName||"").toLowerCase();if(u!=="input"&&u!=="textarea")return!1;let c=(o.getAttribute?.("type")||"").toLowerCase(),s=o.getAttribute?.("role")||"",_=o.getAttribute?.("name")||"",x=o.getAttribute?.("placeholder")||"";return s==="searchbox"||c==="search"||/search/i.test(_)||/search/i.test(x)}function k(o){try{let u=o?.closest?.("form")||null;if(u){let c=Array.from(u.querySelectorAll("input,textarea")).find(p);if(c)return c}return Array.from(document.querySelectorAll("input,textarea")).find(p)||null}catch{return null}}function C(o){try{if(!o)return!1;let u=(o.tagName||"").toLowerCase();if(!["button","a","div","span"].includes(u))return!1;let c=(o.getAttribute?.("type")||"").toLowerCase();if(u==="button"&&c==="submit"){let z=o.closest?.("form");if(z&&Array.from(z.querySelectorAll("input,textarea")).find(p))return!0}let s=(o.getAttribute?.("role")||"").toLowerCase(),_=(o.getAttribute?.("aria-label")||"").toLowerCase(),x=(o.getAttribute?.("title")||"").toLowerCase(),v=(o.getAttribute?.("data-elt")||o.getAttribute?.("data-testid")||"").toLowerCase(),y=(o.innerText||"").toLowerCase(),P=`${_} ${x} ${v} ${y}`.trim(),N=/search|find|go|submit|lookup|magnifier|üîç/.test(P);return u==="button"&&(c==="submit"||c==="button")||s==="button"||s==="link"||u==="a"?N:!1}catch{return!1}}function A(){let o=e?.state?.config?.search?.searchContextWindowMs??6e5;return!i?.query||!i?.ts?!1:e.now()-i.ts<=o}function S(o){try{if(!o||o.hidden)return!1;let u=window.getComputedStyle?getComputedStyle(o):null;if(u&&(u.display==="none"||u.visibility==="hidden"||u.opacity==="0")||o.getClientRects&&o.getClientRects().length===0)return!1;let c=o.getBoundingClientRect?.();return c?c.width>0&&c.height>0:!1}catch{return!0}}function T(o){try{let c=(o||document.body||document.documentElement).querySelectorAll("[data-testid*='no-result'],[data-testid*='no_results'],[class*='no-result'],[id*='no-result'],[role='status'],[role='alert']");for(let s of c){let _=(s.innerText||"").toLowerCase().trim();if(_&&(_.includes("no results")||_.includes("0 results")||_.includes("nothing found")||_.includes("\u0644\u0645 \u064A\u062A\u0645 \u0627\u0644\u0639\u062B\u0648\u0631")||_.includes("\u0644\u0627 \u062A\u0648\u062C\u062F \u0646\u062A\u0627\u0626\u062C")||_.includes("\u0645\u0627 \u0641\u064A \u0646\u062A\u0627\u0626\u062C")||_.includes("\u0644\u0627 \u064A\u0648\u062C\u062F \u0646\u062A\u0627\u0626\u062C")))return!0}}catch{}return!1}function M(){try{let o=e.state.config.search||{},u=document.querySelector(o.scopeSelector||"main")||document.body||document.documentElement,c=o.resultItemSelector,s=o.adExcludeSelector,_=Array.from(u.querySelectorAll(c||"article,.result,.search-result,.product,.card,.item")),x=[];for(let v of _){if(!v||!S(v)||v.closest?.("header,nav,footer")||s&&(v.matches?.(s)||v.closest?.(s)))continue;let y=v.getBoundingClientRect?.();y&&(y.width<90||y.height<50)||x.push(v)}return{scope:u,nodes:x}}catch{return{scope:document.body||document.documentElement,nodes:[]}}}function U(){let{scope:o,nodes:u}=M();if(!u.length)return{count:0,scope:o};let c=new Set([document.body,document.documentElement,o]),s=new Map;for(let y of u){let P=y.parentElement;for(let N=0;N<4&&P&&!c.has(P);N++)s.set(P,(s.get(P)||0)+1),P=P.parentElement}let _=null,x=0;for(let[y,P]of s.entries())!y||c.has(y)||y===document.body||y===document.documentElement||P>x&&(_=y,x=P);return{count:x>0?x:u.length,scope:o}}function L(o){try{let u=[];for(let c=0;c<o.length&&c<20;c++){let s=o[c],x=(s.querySelector?.("a[href]")||s.closest?.("a[href]"))?.getAttribute?.("href")||"",v=s.getAttribute?.("data-id")||s.getAttribute?.("data-item-id")||s.id||"";u.push(String(x||v||e.getElementId(s)||"").slice(0,120))}return u.join("|")}catch{return""}}function I(){if(t){try{t.disconnect()}catch{}t=null}a&&(clearTimeout(a),a=null),m&&(clearTimeout(m),m=null)}function D(){n=null,I()}function H(){if(t)return;let o=e.state.config.search||{},u=document.querySelector(o.scopeSelector||"main")||document.body||document.documentElement;t=new MutationObserver(()=>{n&&(a&&clearTimeout(a),a=setTimeout(()=>{O(!1)},o.quietDebounceMs??220))});try{t.observe(u,{childList:!0,subtree:!0,attributes:!0})}catch{}}function O(o){if(!n)return!1;let u=e.state.config.search||{},c=Math.max(0,e.now()-n.startTs),{count:s,scope:_}=U(),x=T(_);if(!(o||n.reqDone&&c>=(u.minEmitMs??350)||c>=(u.maxWaitMs??4500)||s>0&&c>=(u.minEmitMs??350)))return!1;let y=0;x?y=0:y=Math.max(0,s||0);try{let{nodes:N}=M(),z=L(N);n.baselineSig&&z&&z===n.baselineSig&&y>0&&(n.reqDone||(y=0))}catch{}let P=typeof n.reqLatencyMs=="number"?Math.round(n.reqLatencyMs):Math.round(c);return i={query:n.query||"",results_count:y,search_latency_ms:P,ts:e.now()},e.enqueue(e.buildEvent("search",{_event_id:e.uuid(),element_id:n.elementId||"search_input",query:i.query,results_count:i.results_count,search_latency_ms:i.search_latency_ms,latency_source:typeof n.reqLatencyMs=="number"?"network":"dom"})),D(),!0}function h(){let o=e.state.config.search||{};if(!n||O(!1))return;let u=Math.max(0,e.now()-n.startTs),c=o.maxWaitMs??4500;if(u>=c){O(!0);return}m=setTimeout(h,o.recheckIntervalMs??300)}function w(o){if(!l())return;let u=e.sanitizeText(o?.value)||"";if(!u)return;let c=(()=>{try{let{nodes:_}=M();return L(_)}catch{return""}})();n={token:e.uuid(),startTs:e.now(),elementId:e.getElementId(o)||"search_input",query:u,baselineSig:c,reqCaptured:!1,reqDone:!1,reqLatencyMs:null},I(),H();let s=e.state.config.search||{};m=setTimeout(h,s.firstFallbackMs??1200)}function E(o){try{return String(o||"")}catch{return""}}function R(o,u){let c=E(o).toLowerCase();if(!c)return!1;if(c.includes("/search")||c.includes("search=")||c.includes("q=")||c.includes("query=")||c.includes("suggest")||c.includes("autocomplete"))return!0;if(u)try{let s=encodeURIComponent(String(u).toLowerCase());if(s&&(c.includes(s)||c.includes(String(u).toLowerCase())))return!0}catch{}return!1}function d(o){if(!n)return!1;let c=(e.state.config.search||{}).captureRequestWindowMs??2500,s=e.now()-n.startTs;return s<0||s>c?!1:R(o,n.query)}function b(o){n&&(n.reqDone=!0,n.reqLatencyMs=Math.max(0,o),setTimeout(()=>O(!1),150))}function g(){if(window.__pt_search_fetch_patched)return;window.__pt_search_fetch_patched=!0;let o=window.fetch;typeof o=="function"&&(window.fetch=async function(...u){let c=performance.now(),s=u[0],_=typeof s=="string"?s:s?.url,x=l()&&n&&!n.reqCaptured&&d(_);x&&(n.reqCaptured=!0);let v;try{return v=await o.apply(this,u),v}finally{if(x){let y=performance.now();b(y-c)}}})}function f(){if(window.__pt_search_xhr_patched)return;window.__pt_search_xhr_patched=!0;let o=window.XMLHttpRequest;if(!o||!o.prototype)return;let u=o.prototype.open,c=o.prototype.send;o.prototype.open=function(s,_){return this.__pt_url=_,u.apply(this,arguments)},o.prototype.send=function(){let s=performance.now(),_=this.__pt_url,x=l()&&n&&!n.reqCaptured&&d(_);x&&(n.reqCaptured=!0);let v=()=>{if(x){let y=performance.now();b(y-s)}};return this.addEventListener("load",v),this.addEventListener("error",v),this.addEventListener("abort",v),c.apply(this,arguments)}}function q(o){if(!l()||!A()||!i?.query)return;let u=e.state.config.search||{},c=document.querySelector(u.scopeSelector||"main")||document.body||document.documentElement,s=u.adExcludeSelector||"[data-ad-id],[role='advertisement'],iframe",_=u.resultItemSelector||"article,.result,.search-result,.product,.card,.item",x=o.target,v=x?.closest?.("a,button,[role='link'],[role='button']")||x;if(!v||s&&(v.matches?.(s)||v.closest?.(s)))return;let y=v.closest?.(_);if(!y||s&&(y.matches?.(s)||y.closest?.(s)))return;let N=Array.from(c.querySelectorAll(_)).filter(J=>J&&S(J)&&!(s&&(J.matches?.(s)||J.closest?.(s)))).indexOf(y),z=N>=0?N+1:null,Ce=y.getAttribute?.("data-article-id")||y.getAttribute?.("data-content-id")||y.getAttribute?.("data-result-id")||v.getAttribute?.("href")||null;e.enqueue(e.buildEvent("search_result_click",{_event_id:e.uuid(),element_id:e.getElementId(v),query:i.query,clicked_result_id:Ce,result_rank:z,results_count:typeof i.results_count=="number"?i.results_count:null,search_latency_ms:typeof i.search_latency_ms=="number"?i.search_latency_ms:null}))}return{init(o){e=o,g(),f(),document.addEventListener("keydown",u=>{if(!l())return;let c=u.target;p(c)&&u.key==="Enter"&&w(c)},!0),document.addEventListener("submit",u=>{if(!l())return;let c=u.target;if(!c||c.nodeType!==1)return;let s=Array.from(c.querySelectorAll("input,textarea")).find(p);s&&w(s)},!0),document.addEventListener("click",u=>{if(!l())return;let c=u.target?.closest?.("button,a,[role='button'],[role='link'],div,span");if(!c||!C(c))return;let s=k(c);s&&w(s)},!0),document.addEventListener("click",q,!0)},onConfigChange(){l()||D()},onPageContextChange(){D()}}}function $e(){let e=null,n=[/doubleclick\.net/i,/googlesyndication\.com/i,/adservice\.google/i,/googleadservices\.com/i,/gampad\/ads/i,/adnxs\.com/i,/criteo/i,/pubmatic\.com/i,/openx\.net/i],t=null,a=null,m=null,i=null,l=0,p=new Set,k=new WeakSet,C=new WeakSet,A=new Map;function S(){return!!e?.state?.config?.plugins?.ads}function T(d){try{let b=((d?.className||"")+" "+(d?.id||"")).toLowerCase();return/\b(ad|ads|advert|advertisement|sponsor|sponsored|promoted)\b/.test(b)}catch{return!1}}function M(d){try{let b=d?.tagName?.toLowerCase()==="iframe"?d:d?.closest?.("iframe");if(!b)return!1;let g=b.getAttribute("src")||"";return g?n.some(f=>f.test(g)):!1}catch{return!1}}function U(d){let g=(e.state.config.ads||{}).dataSelector||"[data-ad-id],[data-ad-slot],[data-ad-provider]";return d?.closest?.(g)||d?.closest?.("[role='advertisement']")||(d?.tagName?.toLowerCase()==="iframe"?d:d?.closest?.("iframe"))||null}function L(d){try{if(!d)return!1;let g=(e.state.config.ads||{}).dataSelector||"[data-ad-id],[data-ad-slot],[data-ad-provider]";return!!(d.closest?.(g)||d.closest?.("[role='advertisement']")||M(d)||T(d)||T(d.closest?.("*")))}catch{return!1}}function I(d){let g=(e.state.config.ads||{}).dataSelector||"[data-ad-id],[data-ad-slot],[data-ad-provider]",f=U(d);if(!f)return null;let q=f.closest?.(g)||(f.matches?.(g)?f:null),o=f.tagName?.toLowerCase()==="iframe"?f:f.querySelector?.("iframe")||null,u=f.closest?.("[role='advertisement']")||(f.matches?.("[role='advertisement']")?f:null),c=e.getElementId(q||u||o||f);return c?{element_id:c,ad_id:q?.getAttribute?.("data-ad-id")||null,ad_slot:q?.getAttribute?.("data-ad-slot")||null,ad_provider:q?.getAttribute?.("data-ad-provider")||null}:null}function D(d){try{let b=d.getBoundingClientRect?.();return b?b.width>=40&&b.height>=40:!1}catch{return!1}}function H(d){try{if(!t||!d||k.has(d))return;k.add(d),t.observe(d)}catch{}}function O(){if(!S())return;let b=(e.state.config.ads||{}).containerSelector||"[data-ad-id],[data-ad-slot],[data-ad-provider],[role='advertisement'],iframe";try{document.querySelectorAll(b).forEach(g=>{if(!(p.size>900)&&L(g)){if(m&&!C.has(g))try{m.observe(g),C.add(g)}catch{}D(g)&&p.add(g)}})}catch{}}function h(){if(!S()||t)return;let d=e.state.config.ads||{},b=d.threshold??.5;t=new IntersectionObserver(g=>{for(let f of g){let q=f.target;if(!q||!L(q))continue;let o=I(q);if(!o?.element_id)continue;let u=f.intersectionRatio||0,c=f.isIntersecting&&u>=b;A.has(o.element_id)||A.set(o.element_id,{impTimer:null,impSent:!1,viewStart:null,viewableSent:!1,lastRatio:0});let s=A.get(o.element_id);if(s.lastRatio=u,c&&!s.impSent&&!s.impTimer&&(s.impTimer=setTimeout(()=>{s.impSent=!0,s.impTimer=null,e.enqueue(e.buildEvent("ad_impression",{_event_id:e.uuid(),element_id:o.element_id,ad_id:o.ad_id,ad_slot:o.ad_slot,ad_provider:o.ad_provider}))},d.minVisibleMs??300)),!c&&s.impTimer&&(clearTimeout(s.impTimer),s.impTimer=null),c)s.viewStart===null&&(s.viewStart=e.now());else if(s.viewStart!==null&&!s.viewableSent){let _=e.now()-s.viewStart;s.viewStart=null,_>=(d.minViewableMs??1e3)&&(s.viewableSent=!0,e.enqueue(e.buildEvent("ad_viewable",{_event_id:e.uuid(),element_id:o.element_id,ad_id:o.ad_id,ad_slot:o.ad_slot,ad_provider:o.ad_provider,view_time_ms:_,viewable_percent:Math.round(s.lastRatio*100)})))}A.set(o.element_id,s)}},{threshold:[b]});try{m=new ResizeObserver(g=>{for(let f of g){let q=f.target;!q||!L(q)||D(q)&&(p.add(q),H(q))}})}catch{m=null}O(),p.forEach(g=>H(g)),a=new MutationObserver(()=>{O(),p.forEach(g=>H(g))});try{a.observe(document.documentElement,{childList:!0,subtree:!0,attributes:!0})}catch{}l=0,i=setInterval(()=>{l++,O(),p.forEach(g=>H(g)),l>=(d.rescanTicks??15)&&(clearInterval(i),i=null)},d.rescanIntervalMs??2e3)}function w(){try{a&&a.disconnect()}catch{}a=null;try{t&&t.disconnect()}catch{}t=null;try{m&&m.disconnect()}catch{}m=null,i&&(clearInterval(i),i=null),p.clear(),A.clear()}function E(){S()&&(O(),p.forEach(d=>H(d)),i||h())}function R(d){if(!S())return;let b=d.target,g=b?.closest?.("a,button,input,textarea,select,[role='button'],[role='link'],[data-elt],iframe,[role='advertisement'],[data-ad-id],[data-ad-slot],[data-ad-provider]")||b;if(!g||!L(g))return;let f=I(g);f?.element_id&&e.enqueue(e.buildEvent("ad_click",{_event_id:e.uuid(),element_id:f.element_id,ad_id:f.ad_id,ad_slot:f.ad_slot,ad_provider:f.ad_provider}))}return{init(d){e=d,document.addEventListener("click",R,!0),S()&&h()},onConfigChange(){S()?h():w()},onPageContextChange(){E()}}}function xe(e){if(!Array.isArray(e))return;let[n,t]=e;if(n==="__meta"){r.meta.project_id=t?.project_id||r.meta.project_id,r.meta.cdnBase=t?.cdnBase||r.meta.cdnBase,r.meta.tagVersion=t?.tagVersion||r.meta.tagVersion;return}if(n==="config"){if(!t)return;if(t.collectUrl&&(r.config.collectUrl=t.collectUrl),typeof t.debug=="boolean"&&(r.config.debug=t.debug),typeof t.trackPageViews=="boolean"&&(r.config.trackPageViews=t.trackPageViews),typeof t.trackClicks=="boolean"&&(r.config.trackClicks=t.trackClicks),typeof t.trackScroll=="boolean"&&(r.config.trackScroll=t.trackScroll),typeof t.trackErrors=="boolean"&&(r.config.trackErrors=t.trackErrors),typeof t.includeQueryHash=="boolean"&&(r.config.includeQueryHash=t.includeQueryHash),typeof t.scrollContainerSelector=="string"&&(r.config.scrollContainerSelector=t.scrollContainerSelector||null,$()),typeof t.sampleRate=="number"&&(r.config.sampleRate=Math.max(0,Math.min(1,t.sampleRate)),Se()),t.plugins&&typeof t.plugins=="object"){r.config.plugins=r.config.plugins||{};for(let a in t.plugins)typeof t.plugins[a]=="boolean"&&(r.config.plugins[a]=t.plugins[a])}t.cards&&typeof t.cards=="object"&&(r.config.cards=r.config.cards||{},Object.assign(r.config.cards,t.cards)),t.search&&typeof t.search=="object"&&(r.config.search=r.config.search||{},Object.assign(r.config.search,t.search)),t.ads&&typeof t.ads=="object"&&(r.config.ads=r.config.ads||{},Object.assign(r.config.ads,t.ads)),Ee();return}if(n==="consent"){t&&typeof t.analytics=="boolean"&&(r.config.consentAnalytics=t.analytics),Ee();return}if(n==="setUserId"){Te(t);return}if(n==="event"){if(!t)return;let a=t.type||t.event_name;if(!a)return;let m=t.payload||t.properties||{},i=typeof t.event_ts=="number"?t.event_ts:void 0;W(B(a,{_event_id:V(),...m},{event_ts:i}));return}n==="flush"&&Q({reason:"manual"})}function Ze(){r.entryReferrer=document.referrer||null,r.currentUrl=te(),r.previousUrl=null,be(),Se();let e=window[le]=window[le]||[];e.forEach(xe);let n=e.push.bind(e);e.push=function(...t){return t.forEach(xe),n(...t)},Ye(),Be(),ze(),r.config.trackClicks&&document.addEventListener("click",Ve,!0),r.config.trackScroll&&(r.__pt_scrollRootEl=ie(),He(),setTimeout(()=>$(),800),setTimeout(()=>$(),2e3)),window.addEventListener("pagehide",()=>Q({reason:"pagehide"})),ce(Qe()),ce(Xe()),ce($e()),Ke(),r.config.trackPageViews&&W(B("page_view",{trigger:"initial",_event_id:V()},{previous_url:null})),j("initialized",{project_id:r.meta.project_id,collectUrl:r.config.collectUrl,consent:r.config.consentAnalytics,sampledIn:r.sampledIn,includeQueryHash:r.config.includeQueryHash,plugins:r.config.plugins,scrollRoot:(()=>{let t=se();return t===document.scrollingElement?"document.scrollingElement":t?.tagName||"unknown"})()})}Ze()})();})();
